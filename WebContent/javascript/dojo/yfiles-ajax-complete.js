/****************************************************************************
 **
 ** This file is part of yFiles AJAX.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Unauthorized redistribution of this file and reverse engineering are
 ** strictly forbidden.
 **
 ** Copyright (c) 2006-2010 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/

if(!dojo._hasResource["yfiles.client.tiles.Graph"]){dojo._hasResource["yfiles.client.tiles.Graph"]=true;dojo.provide("yfiles.client.tiles.Graph");dojo.declare("yfiles.client.tiles.Graph",null,{_name:null,_baseURL:null,constructor:function(_1,_2){if(_1){this._baseURL=_1;}else{this._baseURL=".";}if(_2){this._name=_2;this.load(_2);}},getName:function(){return this._name;},getBaseURL:function(){return this._baseURL;},load:function(_3,_4,_5){var _6={path:_3};if(_4){_6.reload="true";}var _7=this;dojo.xhrPost({url:this._baseURL+"/loadGraph",content:_6,load:function(_8,_9){_7._name=_3;_7.onLoad(_3,_5);},error:function(_a,_b){_7.onLoadFailed(_3,_5);}});},createNode:function(x,y,_c,_d){var _e={name:this._name,x:x,y:y};if(_c){_e.type=_c;}if(this._name){var _f=this;dojo.xhrPost({url:this._baseURL+"/createNode",content:_e,load:function(_10,_11){_f.onNodeCreated(_10.id,_10.bounds,this._name,x,y,_d);},error:function(_12,_13){_f.onNodeCreationFailed(_f._name,x,y,_d);},handleAs:"json"});}else{this.onNodeCreationFailed(null,x,y,_d);}},createEdge:function(_14,_15,_16,_17){if(this._name){var _18=this;var _19=_16?1:0;dojo.xhrPost({url:this._baseURL+"/createEdge",content:{name:this._name,source:_14,target:_15,route:_19},load:function(_1a,_1b){_18.onEdgeCreated(_1a.id,_1a.bounds,_18._name,_14,_15,_17);},error:function(_1c,_1d){_18.onEdgeCreationFailed(_18._name,_14,_15,_17);},handleAs:"json"});}else{this.onEdgeCreationFailed(null,_14,_15,_17);}},removeAt:function(x,y,_1e){if(this._name){var _1f=this;dojo.xhrPost({url:this._baseURL+"/removeAt?name="+this._name+"&x="+x+"&y="+y,load:function(_20,_21){_1f.onRemove([_20.id],_20.bounds,_1f._name,x,y,_1e);},error:function(_22,_23){_1f.onRemoveFailed([],_1f._name,x,y,_1e);},handleAs:"json"});}else{this.onRemoveFailed([],null,x,y,_1e);}},remove:function(ids,_24){if(this._name&&ids.length>0){var _25=ids[0];for(var i=1;i<ids.length;i++){_25=_25+","+ids[i];}var _26=this;dojo.xhrPost({url:this._baseURL+"/remove",content:{name:this._name,ids:_25},load:function(_27,_28){_26.onRemove(ids,_27.bounds,_26._name,_24);},error:function(_29,_2a){_26.onRemoveFailed(ids,_26._name,_24);},handleAs:"json"});}else{this.onRemoveFailed(ids,null,_24);}},moveNodes:function(_2b,x,y,_2c,_2d){if(this._name&&_2b.length>0){var ids=_2b[0];for(var i=1;i<_2b.length;i++){ids=ids+","+_2b[i];}var _2e=_2c?1:0;var _2f=this;dojo.xhrPost({url:this._baseURL+"/moveNodes",content:{name:this._name,ids:ids,x:x,y:y,route:_2e},load:function(_30,_31){_2f.onNodesMoved(_30.bounds,_2f._name,_2b,x,y,_2d);},error:function(_32,_33){_2f.onNodesMoveFailed(_2f._name,_2b,x,y,_2d);},handleAs:"json"});}else{this.onNodesMoveFailed(null,_2b,x,y,_2d);}},getLabel:function(id,_34,_35,_36,_37){if(this._name){var _38=this;dojo.xhrPost({url:this._baseURL+"/getLabel",content:{name:this._name,id:id},load:function(_39,_3a){_35.call(_34,_39,_38._name,id,_37);},error:function(_3b,_3c){if(_36){_36.call(_34,_38._name,id,_37);}},handleAs:"text"});}else{if(_36){_36.call(_34,null,id,_37);}}},setLabel:function(id,_3d,_3e){if(this._name){var _3f=this;var nl=encodeURIComponent(_3d);dojo.xhrPost({url:this._baseURL+"/setLabel",content:{name:this._name,id:id,"label":nl},load:function(_40,_41){_3f.onLabelSet(_3d,_3f._name,id,_3e);},error:function(_42,_43){_3f.onLabelSetFailed(_3d,_3f._name,id,_3e);},handleAs:"text"});}else{this.onLabelSetFailed(_3d,null,id,_3e);}},getBounds:function(_44,_45,_46,_47,_48){var _49={path:this._name};if(_47){_49.seq=_47;}if(this._name){var _4a=this;dojo.xhrGet({url:this._baseURL+"/getWorldBounds",content:_49,load:function(_4b,_4c){_45.call(_44,_4b,_4a._name,_48);},error:function(_4d,_4e){if(_46){_46.call(_44,_4a._name,_48);}},handleAs:"json"});}else{if(_46){_46.call(_44,null,_48);}}},onLoad:function(_4f,_50){},onLoadFailed:function(_51,_52){},onNodeCreated:function(id,_53,_54,x,y,_55){},onNodeCreationFailed:function(_56,x,y,_57){},onEdgeCreated:function(id,_58,_59,_5a,_5b,_5c){},onEdgeCreationFailed:function(_5d,_5e,_5f,_60){},onRemove:function(ids,_61,_62,x,y,_63){},onRemoveFailed:function(ids,_64,x,y,_65){},onNodesMoved:function(_66,_67,ids,x,y,_68){},onNodesMoveFailed:function(_69,ids,x,y,_6a){},onLabelSet:function(_6b,_6c,id,_6d){},onLabelSetFailed:function(_6e,_6f,id,_70){}});}if(!dojo._hasResource["dojox.collections._base"]){dojo._hasResource["dojox.collections._base"]=true;dojo.provide("dojox.collections._base");dojox.collections.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};dojox.collections.Iterator=function(arr){var a=arr;var _71=0;this.element=a[_71]||null;this.atEnd=function(){return (_71>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_71++];return this.element;};this.map=function(fn,_72){return dojo.map(a,fn,_72);};this.reset=function(){_71=0;this.element=a[_71];};};dojox.collections.DictionaryIterator=function(obj){var a=[];var _73={};for(var p in obj){if(!_73[p]){a.push(obj[p]);}}var _74=0;this.element=a[_74]||null;this.atEnd=function(){return (_74>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_74++];return this.element;};this.map=function(fn,_75){return dojo.map(a,fn,_75);};this.reset=function(){_74=0;this.element=a[_74];};};}if(!dojo._hasResource["dojox.collections.Dictionary"]){dojo._hasResource["dojox.collections.Dictionary"]=true;dojo.provide("dojox.collections.Dictionary");dojox.collections.Dictionary=function(_76){var _77={};this.count=0;var _78={};this.add=function(k,v){var b=(k in _77);_77[k]=new dojox.collections.DictionaryEntry(k,v);if(!b){this.count++;}};this.clear=function(){_77={};this.count=0;};this.clone=function(){return new dojox.collections.Dictionary(this);};this.contains=this.containsKey=function(k){if(_78[k]){return false;}return (_77[k]!=null);};this.containsValue=function(v){var e=this.getIterator();while(e.get()){if(e.element.value==v){return true;}}return false;};this.entry=function(k){return _77[k];};this.forEach=function(fn,_79){var a=[];for(var p in _77){if(!_78[p]){a.push(_77[p]);}}dojo.forEach(a,fn,_79);};this.getKeyList=function(){return (this.getIterator()).map(function(_7a){return _7a.key;});};this.getValueList=function(){return (this.getIterator()).map(function(_7b){return _7b.value;});};this.item=function(k){if(k in _77){return _77[k].valueOf();}return undefined;};this.getIterator=function(){return new dojox.collections.DictionaryIterator(_77);};this.remove=function(k){if(k in _77&&!_78[k]){delete _77[k];this.count--;return true;}return false;};if(_76){var e=_76.getIterator();while(e.get()){this.add(e.element.key,e.element.value);}}};}if(!dojo._hasResource["yfiles.client.tiles.GraphBounds"]){dojo._hasResource["yfiles.client.tiles.GraphBounds"]=true;dojo.provide("yfiles.client.tiles.GraphBounds");dojo.declare("yfiles.client.tiles.GraphBounds",null,{minX:null,maxX:null,minY:null,maxY:null,constructor:function(_7c,_7d,_7e,_7f){this.minX=_7c;this.maxX=_7d;this.minY=_7e;this.maxY=_7f;},width:function(){return this.maxX-this.minX;},height:function(){return this.maxY-this.minY;},area:function(){return this.width()*this.height();},center:function(){return {x:this.minX+this.width()/2,y:this.minY+this.height()/2};},scale:function(_80){return new yfiles.client.tiles.GraphBounds(_80*this.minX,_80*this.maxX,_80*this.minY,_80*this.maxY);},round:function(){return new yfiles.client.tiles.GraphBounds(Math.floor(this.minX),Math.floor(this.maxX),Math.floor(this.minY),Math.floor(this.maxY));},union:function(_81){return new yfiles.client.tiles.GraphBounds(Math.min(this.minX,_81.minX),Math.max(this.maxX,_81.maxX),Math.min(this.minY,_81.minY),Math.max(this.maxY,_81.maxY));},intersect:function(_82){return new yfiles.client.tiles.GraphBounds(Math.max(this.minX,_82.minX),Math.min(this.maxX,_82.maxX),Math.max(this.minY,_82.minY),Math.min(this.maxY,_82.maxY));},shift:function(_83,_84){return new yfiles.client.tiles.GraphBounds(this.minX+_83,this.maxX+_83,this.minY+_84,this.maxY+_84);}});}if(!dojo._hasResource["yfiles.client.tiles.HitTest"]){dojo._hasResource["yfiles.client.tiles.HitTest"]=true;dojo.provide("yfiles.client.tiles.HitTest");dojo.declare("yfiles.client.tiles.HitTest",null,{_edgeTestSensitivity:5,_nodeEvents:false,_edgeEvents:false,_nodeLabelEvents:false,_edgeLabelEvents:false,_paperEvents:false,_baseURL:".",_path:null,_worldBounds:null,_nodes:null,_nodeLabels:null,_edges:null,_edgeLabels:null,_NODE_EVENTS:1,_EDGE_EVENTS:2,_NODE_LABEL_EVENTS:4,_EDGE_LABEL_EVENTS:8,_PAPER_EVENTS:16,_eventMask:0,constructor:function(_85,_86,_87,_88,_89,_8a,_8b,_8c){this._baseURL=_85;this._path=_86;this._worldBounds=_87;this.setEventTypes(_88,_89,_8a,_8b,_8c);},getGraphName:function(){return this._path;},getEventMask:function(){return this._eventMask;},setEventTypes:function(_8d,_8e,_8f,_90,_91){this._createMaps();this._nodeEvents=_8d;this._edgeEvents=_8e;this._nodeLabelEvents=_8f;this._edgeLabelEvents=_90;this._paperEvents=_91;if(this._nodeEvents){this._eventMask|=this._NODE_EVENTS;}if(this._edgeEvents){this._eventMask|=this._EDGE_EVENTS;}if(this._nodeLabelEvents){this._eventMask|=this._NODE_LABEL_EVENTS;}if(this._edgeLabelEvents){this._eventMask|=this._EDGE_LABEL_EVENTS;}this._getElementBounds();},setGraphParameters:function(_92,_93,_94,_95){this._setParams(_92,_93,_94);if(_92||_93||_94){this.clear();this._getElementBounds(_94,_95);}else{if(dojo.isFunction(_95)){_95(this._baseURL,this._path,this._worldBounds);}}},setData:function(_96,_97,_98,_99,_9a){this._setParams(_98,_99,_9a);this.clear();this._createGraph(_96,_97);},setEdgeTestSensitivity:function(_9b){this._edgeTestSensitivity=_9b;},getEmptyHitInfo:function(_9c,_9d){return {hit:false,x:_9c,y:_9d,nodes:[],edges:[],nodeLabels:[],edgeLabels:[]};},getHitInfo:function(_9e,_9f,_a0){var res=this.getEmptyHitInfo(_9e,_9f);var hit=false;if(this._edgeLabelEvents){hit=this._rectangleHitTest(this._edgeLabels,_9e,_9f,_a0,res.edgeLabels);}if(hit){res.firstHit=res.edgeLabels[0];res.hit=true;}if(res.hit&&_a0){return res;}if(this._edgeEvents){hit=this._polyLineHitTest(this._edges,_9e,_9f,_a0,res.edges);res.hit=res.hit||hit;}if(hit&&!res.firstHit){res.firstHit=res.edges[0];}if(res.hit&&_a0){return res;}if(this._nodeLabelEvents){hit=this._rectangleHitTest(this._nodeLabels,_9e,_9f,_a0,res.nodeLabels);res.hit=res.hit||hit;}if(hit&&!res.firstHit){res.firstHit=res.nodeLabels[0];}if(res.hit&&_a0){return res;}if(this._nodeEvents){hit=this._rectangleHitTest(this._nodes,_9e,_9f,_a0,res.nodes);res.hit=res.hit||hit;}if(hit&&!res.firstHit){res.firstHit=res.nodes[0];}if(res.hit&&_a0){return res;}if(this._paperEvents){res.hit=true;}return res;},getOverlaps:function(x1,y1,x2,y2){var res=this.getEmptyHitInfo(x1,y1);if(this._nodeLabelEvents){this._rectangleOverlapTest(this._nodeLabels,x1,y1,x2,y2,res.nodeLabels);}if(this._nodeEvents){this._rectangleOverlapTest(this._nodes,x1,y1,x2,y2,res.nodes);}if(this._edgeLabelEvents){this._rectangleOverlapTest(this._edgeLabels,x1,y1,x2,y2,res.edgeLabels);}if(this._edgeEvents){this._polyLineOverlapTest(this._edges,x1,y1,x2,y2,res.edges);}return res;},getBoundsForId:function(id){var _a1=this._byId(id);if(_a1){if(_a1.t!="e"){return yfiles.client.tiles.HitTest._getRectBounds(_a1);}else{return yfiles.client.tiles.HitTest._getEdgeBounds(_a1);}}else{return null;}},getControlPoints:function(_a2){var _a3=this._byId(_a2);if(_a3&&_a3.t=="e"){return _a3.p;}else{return null;}},getLabelInfo:function(_a4){var _a5=this._byId(_a4);if(!_a5){return null;}var idx=_a4.lastIndexOf("-");if(idx){var _a6=_a4.substring(2,idx);var _a7=_a4.substring(0,1)+_a6;return {mainElementId:_a7,labelIndex:_a5.p};}else{return null;}},refresh:function(){this.clear();this._getElementBounds();},clear:function(){this._nodes.clear();this._nodeLabels.clear();this._edges.clear();this._edgeLabels.clear();},isActive:function(){return this._eventMask!=0;},onNewData:function(){},_createMaps:function(){this._nodes=new dojox.collections.Dictionary();this._nodeLabels=new dojox.collections.Dictionary();this._edges=new dojox.collections.Dictionary();this._edgeLabels=new dojox.collections.Dictionary();},_setParams:function(_a8,_a9,_aa){if(_a8){this._baseURL=_a8;}if(_a9){this._path=_a9;}if(_aa){this._worldBounds=_aa;}},_getElementBounds:function(_ab,_ac){var bb=_ab?_ab:this._worldBounds;var cb=dojo.isFunction(_ac)?_ac:function(a,b,c){};if(!bb||!this._path||this._path==""){cb(this._baseURL,this._path,this._worldBounds);return;}if(!this._nodeEvents&&!this._edgeEvents&&!this._nodeLabelEvents&&!this._edgeLabelEvents){cb(this._baseURL,this._path,this._worldBounds);return;}var _ad=this;dojo.xhrPost({url:this._baseURL+"/getElementBounds?path="+this._path+"&x="+bb.minX+"&y="+bb.minY+"&width="+bb.width()+"&height="+bb.height()+"&types="+this._eventMask,load:function(_ae,_af){setTimeout(dojo.hitch(_ad,_ad._createGraph,_ae,cb),0);},handleAs:"json"});},_getCategory:function(_b0){switch(_b0.t){case "n":return this._nodes;case "nl":return this._nodeLabels;case "e":return this._edges;case "el":return this._edgeLabels;}return null;},_byId:function(id,_b1){if(_b1){return _b1.item(id);}var _b2=null;var _b3=[this._nodes,this._edges,this._nodeLabels,this._edgeLabels];for(var i=0;i<_b3.length;i++){_b1=_b3[i];_b2=_b1.item(id);if(_b2){return _b2;}}return null;},_createGraph:function(_b4,_b5){var cb=dojo.isFunction(_b5)?_b5:function(a,b,c){};var _b6=_b4.length;if(_b6>0){for(var i=0;i<_b6;i++){var _b7=_b4[i];setTimeout(dojo.hitch(this,this._createElement,_b7,i==_b6-1,cb),0);}}else{_b5(this._baseURL,this._path,this._worldBounds);}},_createElement:function(_b8,_b9,cb){var id=_b8.i;var _ba=this._getCategory(_b8);_ba.add(id,_b8);if(_b9){cb(this._baseURL,this._path,this._worldBounds);this.onNewData();}},_rectangleHitTest:function(_bb,_bc,_bd,_be,_bf){var hit=false;var _c0=_bb.getIterator();var _c1=_c0.get();while(_c1){var _c2=_c1.value;if(_c2.x<=_bc&&_c2.x+_c2.w>=_bc&&_c2.y<=_bd&&_c2.y+_c2.h>=_bd){_bf.push(_c2);if(_be){return true;}else{hit=true;}}_c1=_c0.get();}return hit;},_rectangleOverlapTest:function(_c3,x1,y1,x2,y2,_c4){var _c5=_c3.getIterator();var _c6=_c5.get();while(_c6){var _c7=_c6.value;if(this._rectangleIntersection(x1,y1,x2,y2,_c7.x,_c7.y,_c7.x+_c7.w,_c7.y+_c7.h)){_c4.push(_c7);}_c6=_c5.get();}},_rectangleIntersection:function(ax1,ay1,ax2,ay2,bx1,by1,bx2,by2){return (Math.max(ax1,bx1)<=Math.min(ax2,bx2)&&Math.max(ay1,by1)<=Math.min(ay2,by2));},_lineSegmentIntersection:function(ax1,ay1,ax2,ay2,bx1,by1,bx2,by2){var a1=ay2-ay1;var b1=ax1-ax2;var c1=a1*ax1+b1*ay1;var a2=by2-by1;var b2=bx1-bx2;var c2=a2*bx1+b2*by1;var det=a1*b2-a2*b1;if(Math.abs(det)<=1e-7){return false;}else{var x=(b2*c1-b1*c2)/det;var y=(a1*c2-a2*c1)/det;return (Math.min(ax1,ax2)<=x&&x<=Math.max(ax1,ax2)&&Math.min(ay1,ay2)<=y&&y<=Math.max(ay1,ay2)&&Math.min(bx1,bx2)<=x&&x<=Math.max(bx1,bx2)&&Math.min(by1,by2)<=y&&y<=Math.max(by1,by2));}},_polyLineHitTest:function(_c8,_c9,_ca,_cb,_cc){var eps=this._edgeTestSensitivity;var hit=false;var _cd=_c8.getIterator();var _ce=_cd.get();while(_ce){var _cf=_ce.value;if(this._polyLineContains(_cf.p,_c9,_ca,eps)){_cc.push(_cf);if(_cb){return true;}else{hit=true;}}_ce=_cd.get();}return hit;},_polyLineOverlapTest:function(_d0,x1,y1,x2,y2,_d1){var _d2=_d0.getIterator();var _d3=_d2.get();while(_d3){var _d4=_d3.value;if(this._controlPointsIn(_d4.p,x1,y1,x2,y2)||this._intersects(_d4.p,x1,y1,x2,y2)){_d1.push(_d4);}_d3=_d2.get();}},_polyLineContains:function(_d5,_d6,_d7,_d8){var x1=_d5[0].x;var y1=_d5[0].y;var x2,y2;for(var i=1;i<_d5.length;i++){x2=_d5[i].x;y2=_d5[i].y;if(this._lineContains(x1,y1,x2,y2,_d6,_d7,_d8)){return true;}x1=x2;y1=y2;}return false;},_controlPointsIn:function(pts,x1,y1,x2,y2){for(var i=0;i<pts.length;i++){if(x1<=pts[i].x&&x2>=pts[i].x&&y1<=pts[i].y&&y2>=pts[i].y){return true;}}return false;},_intersects:function(pts,x1,y1,x2,y2){for(var i=1;i<pts.length;i++){var p0=pts[i-1];var p1=pts[i];if(this._lineSegmentIntersection(p0.x,p0.y,p1.x,p1.y,x1,y1,x2,y1)||this._lineSegmentIntersection(p0.x,p0.y,p1.x,p1.y,x2,y1,x2,y2)||this._lineSegmentIntersection(p0.x,p0.y,p1.x,p1.y,x1,y2,x2,y2)||this._lineSegmentIntersection(p0.x,p0.y,p1.x,p1.y,x1,y1,x1,y2)){return true;}}return false;},_lineContains:function(x1,y1,x2,y2,_d9,_da,_db){if(_d9+_db<Math.min(x1,x2)||_da+_db<Math.min(y1,y2)||_d9-_db>Math.max(x1,x2)||_da-_db>Math.max(y1,y2)){return false;}var tdx=_d9-x1;var tdy=_da-y1;var _dc=_db*_db;var _dd=tdx*tdx+tdy*tdy;if(_dd<_dc){return true;}var _de=_d9-x2;var _df=_da-y2;var _e0=_de*_de+_df*_df;if(_e0<_dc){return true;}var dx=x2-x1;var dy=y2-y1;var l=Math.sqrt(dx*dx+dy*dy);if(l==0){return false;}var s=(dx*tdx+dy*tdy)/l;if(s<-_db||s>l+_db){return false;}var d2=_dd-s*s;return d2<_dc;}});yfiles.client.tiles.HitTest.getElementType=function(_e1){if(!_e1){return null;}var _e2="";if(dojo.isString(_e1)){var idx=_e1.indexOf("-");if(idx>0){_e2=_e1.substring(0,idx);}}else{if(_e1.firstHit){_e2=_e1.firstHit.t;}}switch(_e2){case "n":return "Node";case "nl":return "NodeLabel";case "e":return "Edge";case "el":return "EdgeLabel";}return "Paper";};yfiles.client.tiles.HitTest.getHitId=function(_e3){if(_e3&&_e3.firstHit){return _e3.firstHit.i;}else{return null;}};yfiles.client.tiles.HitTest.getHitIds=function(_e4){var res=[];if(_e4){var _e5=["nodes","edges","nodeLabels","edgeLabels"];for(var i=0;i<_e5.length;i++){var _e6=_e4[_e5[i]];for(var j=0;j<_e6.length;j++){res.push(_e6[j].i);}}}return res;};yfiles.client.tiles.HitTest.getBounds=function(_e7){if(!_e7||!_e7.firstHit){return null;}if(_e7.t!="e"){return this._getRectBounds(_e7.firstHit);}else{return this._getEdgeBounds(_e7.firstHit);}};yfiles.client.tiles.HitTest.getHitCount=function(_e8){if(!_e8){return 0;}var _e9=0;var _ea=[_e8.nodes,_e8.edges,_e8.nodeLabels,_e8.edgeLabels];for(var i=0;i<_ea.length;i++){var _eb=_ea[i];_e9+=_eb.length;}return _e9;};yfiles.client.tiles.HitTest.getUrl=function(_ec){if(_ec&&_ec.firstHit&&_ec.firstHit.u){return _ec.firstHit.u;}else{return null;}};yfiles.client.tiles.HitTest.getDescription=function(_ed){if(_ed&&_ed.firstHit&&_ed.firstHit.d){return _ed.firstHit.d;}else{return null;}};yfiles.client.tiles.HitTest.setCoords=function(_ee,x,y){_ee.x=x;_ee.y=y;};yfiles.client.tiles.HitTest._getRectBounds=function(_ef){return new yfiles.client.tiles.GraphBounds(_ef.x,_ef.x+_ef.w,_ef.y,_ef.y+_ef.h);};yfiles.client.tiles.HitTest._getEdgeBounds=function(_f0){var pts=_f0.p;var p0=pts[0];var res=new yfiles.client.tiles.GraphBounds(p0.x,p0.x,p0.y,p0.y);for(var i=1;i<pts.length;i++){res=res.union(new yfiles.client.tiles.GraphBounds(pts[i].x,pts[i].x,pts[i].y,pts[i].y));}return res;};}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId);}while(dojo.byId(id));return id;};dojo.dnd._empty={};dojo.dnd.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var d=dojo.doc,dd=d.documentElement,w=window,b=dojo.body();if(dojo.isMozilla){return {w:dd.clientWidth,h:w.innerHeight};}else{if(!dojo.isOpera&&w.innerWidth){return {w:w.innerWidth,h:w.innerHeight};}else{if(!dojo.isOpera&&dd&&dd.clientWidth){return {w:dd.clientWidth,h:dd.clientHeight};}else{if(b.clientWidth){return {w:b.clientWidth,h:b.clientHeight};}}}}return null;};dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(e){var v=dojo.dnd.getViewport(),dx=0,dy=0;if(e.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=-dojo.dnd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=dojo.dnd.H_AUTOSCROLL_VALUE;}}if(e.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=-dojo.dnd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=dojo.dnd.V_AUTOSCROLL_VALUE;}}window.scrollBy(dx,dy);};dojo.dnd._validNodes={"div":1,"p":1,"td":1};dojo.dnd._validOverflow={"auto":1,"scroll":1};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in dojo.dnd._validNodes)){var s=dojo.getComputedStyle(n);if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo.position(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft,ry+=dojo.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _f1=n.scrollLeft,_f2=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_f1!=n.scrollLeft||_f2!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}dojo.dnd.autoScroll(e);};}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(_f3,e,_f4){this.node=dojo.byId(_f3);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=this.host=_f4,d=_f3.ownerDocument,_f5=dojo.connect(d,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(d,"onmousemove",this,"onMouseMove"),dojo.connect(d,"onmouseup",this,"onMouseUp"),dojo.connect(d,"ondragstart",dojo.stopEvent),dojo.connect(d.body,"onselectstart",dojo.stopEvent),_f5];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY});dojo.stopEvent(e);},onMouseUp:function(e){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}dojo.stopEvent(e);},onFirstMove:function(){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left));t=Math.round(parseFloat(s.top));break;default:s.position="absolute";var m=dojo.marginBox(this.node);var b=dojo.doc.body;var bs=dojo.getComputedStyle(b);var bm=dojo._getMarginBox(b,bs);var bc=dojo._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this);}dojo.disconnect(this.events.pop());},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});}if(!dojo._hasResource["dojox.uuid._base"]){dojo._hasResource["dojox.uuid._base"]=true;dojo.provide("dojox.uuid._base");dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_f6,_f7){if(!_f6){if(!_f7){_f7="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_f7);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_f8){_f8=_f8.toString();var _f9=(dojo.isString(_f8)&&(_f8.length==36)&&(_f8==_f8.toLowerCase()));if(_f9){var _fa=_f8.split("-");_f9=((_fa.length==5)&&(_fa[0].length==8)&&(_fa[1].length==4)&&(_fa[2].length==4)&&(_fa[3].length==4)&&(_fa[4].length==12));var _fb=16;for(var i in _fa){var _fc=_fa[i];var _fd=parseInt(_fc,_fb);_f9=_f9&&isFinite(_fd);}}return _f9;};dojox.uuid.getVariant=function(_fe){if(!dojox.uuid._ourVariantLookupTable){var _ff=dojox.uuid.variant;var _100=[];_100[0]=_ff.NCS;_100[1]=_ff.NCS;_100[2]=_ff.NCS;_100[3]=_ff.NCS;_100[4]=_ff.NCS;_100[5]=_ff.NCS;_100[6]=_ff.NCS;_100[7]=_ff.NCS;_100[8]=_ff.DCE;_100[9]=_ff.DCE;_100[10]=_ff.DCE;_100[11]=_ff.DCE;_100[12]=_ff.MICROSOFT;_100[13]=_ff.MICROSOFT;_100[14]=_ff.UNKNOWN;_100[15]=_ff.UNKNOWN;dojox.uuid._ourVariantLookupTable=_100;}_fe=_fe.toString();var _101=_fe.charAt(19);var _102=16;var _103=parseInt(_101,_102);dojox.uuid.assert((_103>=0)&&(_103<=16));return dojox.uuid._ourVariantLookupTable[_103];};dojox.uuid.getVersion=function(_104){var _105="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_104)==dojox.uuid.variant.DCE,_105);_104=_104.toString();var _106=_104.charAt(14);var _107=16;var _108=parseInt(_106,_107);return _108;};dojox.uuid.getNode=function(_109){var _10a="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_109)==dojox.uuid.version.TIME_BASED,_10a);_109=_109.toString();var _10b=_109.split("-");var _10c=_10b[4];return _10c;};dojox.uuid.getTimestamp=function(_10d,_10e){var _10f="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_10d)==dojox.uuid.version.TIME_BASED,_10f);_10d=_10d.toString();if(!_10e){_10e=null;}switch(_10e){case "string":case String:return dojox.uuid.getTimestamp(_10d,Date).toUTCString();break;case "hex":var _110=_10d.split("-");var _111=_110[0];var _112=_110[1];var _113=_110[2];_113=_113.slice(1);var _114=_113+_112+_111;dojox.uuid.assert(_114.length==15);return _114;break;case null:case "date":case Date:var _115=3394248;var _116=16;var _117=_10d.split("-");var _118=parseInt(_117[0],_116);var _119=parseInt(_117[1],_116);var _11a=parseInt(_117[2],_116);var _11b=_11a&4095;_11b<<=16;_11b+=_119;_11b*=4294967296;_11b+=_118;var _11c=_11b/10000;var _11d=60*60;var _11e=_115;var _11f=_11e*_11d;var _120=_11f*1000;var _121=_11c-_120;var _122=new Date(_121);return _122;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_10e);break;}};}if(!dojo._hasResource["dojox.uuid"]){dojo._hasResource["dojox.uuid"]=true;dojo.provide("dojox.uuid");}if(!dojo._hasResource["dojox.uuid.Uuid"]){dojo._hasResource["dojox.uuid.Uuid"]=true;dojo.provide("dojox.uuid.Uuid");dojox.uuid.Uuid=function(_123){this._uuidString=dojox.uuid.NIL_UUID;if(_123){dojox.uuid.assert(dojo.isString(_123));this._uuidString=_123.toLowerCase();dojox.uuid.assert(this.isValid());}else{var _124=dojox.uuid.Uuid.getGenerator();if(_124){this._uuidString=_124();dojox.uuid.assert(this.isValid());}}};dojox.uuid.Uuid.compare=function(_125,_126){var _127=_125.toString();var _128=_126.toString();if(_127>_128){return 1;}if(_127<_128){return -1;}return 0;};dojox.uuid.Uuid.setGenerator=function(_129){dojox.uuid.assert(!_129||dojo.isFunction(_129));dojox.uuid.Uuid._ourGenerator=_129;};dojox.uuid.Uuid.getGenerator=function(){return dojox.uuid.Uuid._ourGenerator;};dojox.uuid.Uuid.prototype.toString=function(){return this._uuidString;};dojox.uuid.Uuid.prototype.compare=function(_12a){return dojox.uuid.Uuid.compare(this,_12a);};dojox.uuid.Uuid.prototype.isEqual=function(_12b){return (this.compare(_12b)==0);};dojox.uuid.Uuid.prototype.isValid=function(){return dojox.uuid.isValid(this);};dojox.uuid.Uuid.prototype.getVariant=function(){return dojox.uuid.getVariant(this);};dojox.uuid.Uuid.prototype.getVersion=function(){if(!this._versionNumber){this._versionNumber=dojox.uuid.getVersion(this);}return this._versionNumber;};dojox.uuid.Uuid.prototype.getNode=function(){if(!this._nodeString){this._nodeString=dojox.uuid.getNode(this);}return this._nodeString;};dojox.uuid.Uuid.prototype.getTimestamp=function(_12c){if(!_12c){_12c=null;}switch(_12c){case "string":case String:return this.getTimestamp(Date).toUTCString();break;case "hex":if(!this._timestampAsHexString){this._timestampAsHexString=dojox.uuid.getTimestamp(this,"hex");}return this._timestampAsHexString;break;case null:case "date":case Date:if(!this._timestampAsDate){this._timestampAsDate=dojox.uuid.getTimestamp(this,Date);}return this._timestampAsDate;break;default:dojox.uuid.assert(false,"The getTimestamp() method dojox.uuid.Uuid was passed a bogus returnType: "+_12c);break;}};}if(!dojo._hasResource["dojox.uuid.generateTimeBasedUuid"]){dojo._hasResource["dojox.uuid.generateTimeBasedUuid"]=true;dojo.provide("dojox.uuid.generateTimeBasedUuid");dojox.uuid.generateTimeBasedUuid=function(node){var _12d=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(node);return _12d;};dojox.uuid.generateTimeBasedUuid.isValidNode=function(node){var _12e=16;var _12f=parseInt(node,_12e);var _130=dojo.isString(node)&&node.length==12&&isFinite(_12f);return _130;};dojox.uuid.generateTimeBasedUuid.setNode=function(node){dojox.uuid.assert((node===null)||this.isValidNode(node));this._uniformNode=node;};dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode;};dojox.uuid.generateTimeBasedUuid._generator=new function(){this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var _131=null;var _132=null;var _133=null;var _134=0;var _135=null;var _136=null;var _137=16;function _138(_139){_139[2]+=_139[3]>>>16;_139[3]&=65535;_139[1]+=_139[2]>>>16;_139[2]&=65535;_139[0]+=_139[1]>>>16;_139[1]&=65535;dojox.uuid.assert((_139[0]>>>16)===0);};function _13a(x){var _13b=new Array(0,0,0,0);_13b[3]=x%65536;x-=_13b[3];x/=65536;_13b[2]=x%65536;x-=_13b[2];x/=65536;_13b[1]=x%65536;x-=_13b[1];x/=65536;_13b[0]=x;return _13b;};function _13c(_13d,_13e){dojox.uuid.assert(dojo.isArray(_13d));dojox.uuid.assert(dojo.isArray(_13e));dojox.uuid.assert(_13d.length==4);dojox.uuid.assert(_13e.length==4);var _13f=new Array(0,0,0,0);_13f[3]=_13d[3]+_13e[3];_13f[2]=_13d[2]+_13e[2];_13f[1]=_13d[1]+_13e[1];_13f[0]=_13d[0]+_13e[0];_138(_13f);return _13f;};function _140(_141,_142){dojox.uuid.assert(dojo.isArray(_141));dojox.uuid.assert(dojo.isArray(_142));dojox.uuid.assert(_141.length==4);dojox.uuid.assert(_142.length==4);var _143=false;if(_141[0]*_142[0]!==0){_143=true;}if(_141[0]*_142[1]!==0){_143=true;}if(_141[0]*_142[2]!==0){_143=true;}if(_141[1]*_142[0]!==0){_143=true;}if(_141[1]*_142[1]!==0){_143=true;}if(_141[2]*_142[0]!==0){_143=true;}dojox.uuid.assert(!_143);var _144=new Array(0,0,0,0);_144[0]+=_141[0]*_142[3];_138(_144);_144[0]+=_141[1]*_142[2];_138(_144);_144[0]+=_141[2]*_142[1];_138(_144);_144[0]+=_141[3]*_142[0];_138(_144);_144[1]+=_141[1]*_142[3];_138(_144);_144[1]+=_141[2]*_142[2];_138(_144);_144[1]+=_141[3]*_142[1];_138(_144);_144[2]+=_141[2]*_142[3];_138(_144);_144[2]+=_141[3]*_142[2];_138(_144);_144[3]+=_141[3]*_142[3];_138(_144);return _144;};function _145(_146,_147){while(_146.length<_147){_146="0"+_146;}return _146;};function _148(){var _149=Math.floor((Math.random()%1)*Math.pow(2,32));var _14a=_149.toString(_137);while(_14a.length<8){_14a="0"+_14a;}return _14a;};this.generateUuidString=function(node){if(node){dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(node));}else{if(dojox.uuid.generateTimeBasedUuid._uniformNode){node=dojox.uuid.generateTimeBasedUuid._uniformNode;}else{if(!_131){var _14b=32768;var _14c=Math.floor((Math.random()%1)*Math.pow(2,15));var _14d=(_14b|_14c).toString(_137);_131=_14d+_148();}node=_131;}}if(!_132){var _14e=32768;var _14f=Math.floor((Math.random()%1)*Math.pow(2,14));_132=(_14e|_14f).toString(_137);}var now=new Date();var _150=now.valueOf();var _151=_13a(_150);if(!_135){var _152=_13a(60*60);var _153=_13a(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);var _154=_140(_153,_152);var _155=_13a(1000);_135=_140(_154,_155);_136=_13a(10000);}var _156=_151;var _157=_13c(_135,_156);var _158=_140(_157,_136);if(now.valueOf()==_133){_158[3]+=_134;_138(_158);_134+=1;if(_134==10000){while(now.valueOf()==_133){now=new Date();}}}else{_133=now.valueOf();_134=1;}var _159=_158[2].toString(_137);var _15a=_158[3].toString(_137);var _15b=_145(_159,4)+_145(_15a,4);var _15c=_158[1].toString(_137);_15c=_145(_15c,4);var _15d=_158[0].toString(_137);_15d=_145(_15d,3);var _15e="-";var _15f="1";var _160=_15b+_15e+_15c+_15e+_15f+_15d+_15e+_132+_15e+node;_160=_160.toLowerCase();return _160;};}();}if(!dojo._hasResource["yfiles.client.tiles.GraphHighlighter"]){dojo._hasResource["yfiles.client.tiles.GraphHighlighter"]=true;dojo.provide("yfiles.client.tiles.GraphHighlighter");dojo.declare("yfiles.client.tiles.GraphHighlighter",null,{constructor:function(){},drawNodeHighlight:function(_161,_162,_163){dojo.style(_162,"opacity",0.3);dojo.style(_162,"display","block");dojo.style(_162,"position","absolute");dojo.addClass(_162,"yFilesGraphCanvasOverlay");},drawEdgeHighlight:function(_164,_165,_166,_167){var pt=_167[_166];var _168=dojo.doc.createElement("div");dojo.style(_168,"left",(pt.x*_164.zoom-5)+"px");dojo.style(_168,"top",(pt.y*_164.zoom-5)+"px");dojo.style(_168,"width","10px");dojo.style(_168,"height","10px");dojo.style(_168,"opacity",0.7);dojo.style(_168,"display","block");dojo.style(_168,"position","absolute");dojo.addClass(_168,"yFilesGraphCanvasOverlay");_165.appendChild(_168);if(_166>0){var prev=_167[_166-1];_168=dojo.doc.createElement("div");var x=(pt.x+prev.x)/2;var y=(pt.y+prev.y)/2;dojo.style(_168,"left",(x*_164.zoom-5)+"px");dojo.style(_168,"top",(y*_164.zoom-5)+"px");dojo.style(_168,"width","10px");dojo.style(_168,"height","10px");dojo.style(_168,"opacity",0.7);dojo.style(_168,"display","block");dojo.style(_168,"position","absolute");dojo.addClass(_168,"yFilesGraphCanvasOverlay");_165.appendChild(_168);}}});}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_169){if(this._hash[_169.id]){throw new Error("Tried to register widget with id=="+_169.id+" but that id is already registered");}this._hash[_169.id]=_169;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_16a){_16a=_16a||dojo.global;var i=0,id;for(id in this._hash){func.call(_16a,this._hash[id],i++,this._hash);}return this;},filter:function(_16b,_16c){_16c=_16c||dojo.global;var res=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_16b.call(_16c,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new dijit.WidgetSet(),id,_16d;for(id in this._hash){_16d=this._hash[id];if(_16d.declaredClass==cls){res.add(_16d);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_16e){return dojo.map(this.toArray(),func,_16e);},every:function(func,_16f){_16f=_16f||dojo.global;var x=0,i;for(i in this._hash){if(!func.call(_16f,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_170){_170=_170||dojo.global;var x=0,i;for(i in this._hash){if(func.call(_170,this._hash[i],x++,this._hash)){return true;}}return false;}});dijit.registry=new dijit.WidgetSet();dijit._widgetTypeCtr={};dijit.getUniqueId=function(_171){var id;do{id=_171+"_"+(_171 in dijit._widgetTypeCtr?++dijit._widgetTypeCtr[_171]:dijit._widgetTypeCtr[_171]=0);}while(dijit.byId(id));return id;};dijit.findWidgets=function(root){var _172=[];function _173(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _174=node.getAttribute("widgetId");if(_174){var _175=dijit.byId(_174);_172.push(_175);}else{_173(node);}}}};_173(root);return _172;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_176){if(!_176._destroyed){if(_176.destroyRecursive){_176.destroyRecursive();}else{if(_176.destroy){_176.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byId=function(id){return typeof id=="string"?dijit.registry._hash[id]:id;};dijit.byNode=function(node){return dijit.registry.byId(node.getAttribute("widgetId"));};dijit.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return dijit.byId(id);}node=node.parentNode;}return null;};dijit._isElementShown=function(elem){var _177=dojo.style(elem);return (_177.visibility!="hidden")&&(_177.visibility!="collapsed")&&(_177.display!="none")&&(dojo.attr(elem,"type")!="hidden");};dijit.isTabNavigable=function(elem){if(dojo.attr(elem,"disabled")){return false;}else{if(dojo.hasAttr(elem,"tabIndex")){return dojo.attr(elem,"tabIndex")>=0;}else{switch(elem.nodeName.toLowerCase()){case "a":return dojo.hasAttr(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz){return elem.contentDocument.designMode=="on";}else{if(dojo.isWebKit){var doc=elem.contentDocument,body=doc&&doc.body;return body&&body.contentEditable=="true";}else{doc=elem.contentWindow.document;body=doc&&doc.body;return body&&body.firstChild&&body.firstChild.contentEditable=="true";}}default:return elem.contentEditable=="true";}}}};dijit._getTabNavigable=function(root){var _178,last,_179,_17a,_17b,_17c;var _17d=function(_17e){dojo.query("> *",_17e).forEach(function(_17f){var _180=dijit._isElementShown(_17f);if(_180&&dijit.isTabNavigable(_17f)){var _181=dojo.attr(_17f,"tabIndex");if(!dojo.hasAttr(_17f,"tabIndex")||_181==0){if(!_178){_178=_17f;}last=_17f;}else{if(_181>0){if(!_179||_181<_17a){_17a=_181;_179=_17f;}if(!_17b||_181>=_17c){_17c=_181;_17b=_17f;}}}}if(_180&&_17f.nodeName.toUpperCase()!="SELECT"){_17d(_17f);}});};if(dijit._isElementShown(root)){_17d(root);}return {first:_178,last:last,lowest:_179,highest:_17b};};dijit.getFirstInTabbingOrder=function(root){var _182=dijit._getTabNavigable(dojo.byId(root));return _182.lowest?_182.lowest:_182.first;};dijit.getLastInTabbingOrder=function(root){var _183=dijit._getTabNavigable(dojo.byId(root));return _183.last?_183.last:_183.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_184){var _185=dojo.doc,mark=_184.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_185.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_185.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_185.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_186){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_186||dojo.global,dijit.getBookmark),openedForWindow:_186};},focus:function(_187){if(!_187){return;}var node="node" in _187?_187.node:_187,_188=_187.bookmark,_189=_187.openedForWindow,_18a=_188?_188.isCollapsed:false;if(node){var _18b=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_18b&&_18b.focus){try{_18b.focus();}catch(e){}}dijit._onFocusNode(node);}if(_188&&dojo.withGlobal(_189||dojo.global,dijit.isCollapsed)&&!_18a){if(_189){_189.focus();}try{dojo.withGlobal(_189||dojo.global,dijit.moveToBookmark,null,[_188]);}catch(e2){}}},_activeStack:[],registerIframe:function(_18c){return dijit.registerWin(_18c.contentWindow,_18c);},unregisterIframe:function(_18d){dijit.unregisterWin(_18d);},registerWin:function(_18e,_18f){var _190=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);dijit._onTouchNode(_18f||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_18e.document.documentElement:_18e.document;if(doc){if(dojo.isIE){doc.attachEvent("onmousedown",_190);var _191=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_18f||evt.srcElement);}else{dijit._onTouchNode(_18f||evt.srcElement);}};doc.attachEvent("onactivate",_191);var _192=function(evt){dijit._onBlurNode(_18f||evt.srcElement);};doc.attachEvent("ondeactivate",_192);return function(){doc.detachEvent("onmousedown",_190);doc.detachEvent("onactivate",_191);doc.detachEvent("ondeactivate",_192);doc=null;};}else{doc.addEventListener("mousedown",_190,true);var _193=function(evt){dijit._onFocusNode(_18f||evt.target);};doc.addEventListener("focus",_193,true);var _194=function(evt){dijit._onBlurNode(_18f||evt.target);};doc.addEventListener("blur",_194,true);return function(){doc.removeEventListener("mousedown",_190,true);doc.removeEventListener("focus",_193,true);doc.removeEventListener("blur",_194,true);doc=null;};}}},unregisterWin:function(_195){_195&&_195();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _196=[];try{while(node){var _197=dojo.attr(node,"dijitPopupParent");if(_197){node=dijit.byId(_197).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dijit.getDocumentWindow(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId");if(id){_196.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_196,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_198,by){var _199=dijit._activeStack;dijit._activeStack=_198;for(var _19a=0;_19a<Math.min(_199.length,_198.length);_19a++){if(_199[_19a]!=_198[_19a]){break;}}var _19b;for(var i=_199.length-1;i>=_19a;i--){_19b=dijit.byId(_199[i]);if(_19b){_19b._focused=false;_19b._hasBeenBlurred=true;if(_19b._onBlur){_19b._onBlur(by);}if(_19b._setStateClass){_19b._setStateClass();}dojo.publish("widgetBlur",[_19b,by]);}}for(i=_19a;i<_198.length;i++){_19b=dijit.byId(_198[i]);if(_19b){_19b._focused=true;if(_19b._onFocus){_19b._onFocus(by);}if(_19b._setStateClass){_19b._setStateClass();}dojo.publish("widgetFocus",[_19b,by]);}}}});dojo.addOnLoad(function(){var _19c=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_19c);_19c=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_19d){this.pairs=[];this.returnWrappers=_19d||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_19e,wrap,_19f,_1a0){this.pairs[((_1a0)?"unshift":"push")]([name,_19e,wrap,_19f]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var _1a1=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _1a2=dojo._docScroll();return {w:_1a1.clientWidth,h:_1a1.clientHeight,l:_1a2.x,t:_1a2.y};};dijit.placeOnScreen=function(node,pos,_1a3,_1a4){var _1a5=dojo.map(_1a3,function(_1a6){var c={corner:_1a6,pos:{x:pos.x,y:pos.y}};if(_1a4){c.pos.x+=_1a6.charAt(1)=="L"?_1a4.x:-_1a4.x;c.pos.y+=_1a6.charAt(0)=="T"?_1a4.y:-_1a4.y;}return c;});return dijit._place(node,_1a5);};dijit._place=function(node,_1a7,_1a8){var view=dijit.getViewport();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_1a7,function(_1a9){var _1aa=_1a9.corner;var pos=_1a9.pos;if(_1a8){_1a8(node,_1a9.aroundCorner,_1aa);}var _1ab=node.style;var _1ac=_1ab.display;var _1ad=_1ab.visibility;_1ab.visibility="hidden";_1ab.display="";var mb=dojo.marginBox(node);_1ab.display=_1ac;_1ab.visibility=_1ad;var _1ae=Math.max(view.l,_1aa.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_1af=Math.max(view.t,_1aa.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_1aa.charAt(1)=="L"?(_1ae+mb.w):pos.x),endY=Math.min(view.t+view.h,_1aa.charAt(0)=="T"?(_1af+mb.h):pos.y),_1b0=endX-_1ae,_1b1=endY-_1af,_1b2=(mb.w-_1b0)+(mb.h-_1b1);if(best==null||_1b2<best.overflow){best={corner:_1aa,aroundCorner:_1a9.aroundCorner,x:_1ae,y:_1af,w:_1b0,h:_1b1,overflow:_1b2};}return !_1b2;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&_1a8){_1a8(node,best.aroundCorner,best.corner);}return best;};dijit.placeOnScreenAroundNode=function(node,_1b3,_1b4,_1b5){_1b3=dojo.byId(_1b3);var _1b6=_1b3.style.display;_1b3.style.display="";var _1b7=dojo.position(_1b3,true);_1b3.style.display=_1b6;return dijit._placeOnScreenAroundRect(node,_1b7.x,_1b7.y,_1b7.w,_1b7.h,_1b4,_1b5);};dijit.placeOnScreenAroundRectangle=function(node,_1b8,_1b9,_1ba){return dijit._placeOnScreenAroundRect(node,_1b8.x,_1b8.y,_1b8.width,_1b8.height,_1b9,_1ba);};dijit._placeOnScreenAroundRect=function(node,x,y,_1bb,_1bc,_1bd,_1be){var _1bf=[];for(var _1c0 in _1bd){_1bf.push({aroundCorner:_1c0,corner:_1bd[_1c0],pos:{x:x+(_1c0.charAt(1)=="L"?0:_1bb),y:y+(_1c0.charAt(0)=="T"?0:_1bc)}});}return dijit._place(node,_1bf,_1be);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_1c1,_1c2,_1c3){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAlignment=function(_1c4,_1c5){var _1c6={};dojo.forEach(_1c4,function(pos){switch(pos){case "after":_1c6[_1c5?"BR":"BL"]=_1c5?"BL":"BR";break;case "before":_1c6[_1c5?"BL":"BR"]=_1c5?"BR":"BL";break;case "below":_1c6[_1c5?"BL":"BR"]=_1c5?"TL":"TR";_1c6[_1c5?"BR":"BL"]=_1c5?"TR":"TL";break;case "above":default:_1c6[_1c5?"TL":"TR"]=_1c5?"BL":"BR";_1c6[_1c5?"TR":"TL"]=_1c5?"BR":"BL";break;}});return _1c6;};dijit.getPopupAroundAlignment=function(_1c7,_1c8){var _1c9={};dojo.forEach(_1c7,function(pos){switch(pos){case "after":_1c9[_1c8?"BR":"BL"]=_1c8?"BL":"BR";break;case "before":_1c9[_1c8?"BL":"BR"]=_1c8?"BR":"BL";break;case "below":_1c9[_1c8?"BL":"BR"]=_1c8?"TL":"TR";_1c9[_1c8?"BR":"BL"]=_1c8?"TR":"TL";break;case "above":default:_1c9[_1c8?"TL":"TR"]=_1c8?"BL":"BR";_1c9[_1c8?"TR":"TL"]=_1c8?"BR":"BL";break;}});return _1c9;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){if(dojo.isIE&&window!==document.parentWindow&&!doc._parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc._parentWindow||doc.parentWindow||doc.defaultView;};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new function(){var _1ca=[],_1cb=1000,_1cc=1;this.moveOffScreen=function(node){var s=node.style;s.visibility="hidden";s.position="absolute";s.top="-9999px";if(s.display=="none"){s.display="";}dojo.body().appendChild(node);};var _1cd=function(){for(var pi=_1ca.length-1;pi>0&&_1ca[pi].parent===_1ca[pi-1].widget;pi--){}return _1ca[pi];};var _1ce=[];this.open=function(args){var _1cf=args.popup,_1d0=args.orient||(dojo._isBodyLtr()?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_1d1=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+_1cc++);var _1d2=_1ce.pop(),_1d3,_1d4;if(!_1d2){_1d3=dojo.create("div",{"class":"dijitPopup"},dojo.body());dijit.setWaiRole(_1d3,"presentation");}else{_1d3=_1d2[0];_1d4=_1d2[1];}dojo.attr(_1d3,{id:id,style:{zIndex:_1cb+_1ca.length,visibility:"hidden",top:"-9999px"},dijitPopupParent:args.parent?args.parent.id:""});var s=_1cf.domNode.style;s.display="";s.visibility="";s.position="";s.top="0px";_1d3.appendChild(_1cf.domNode);if(!_1d4){_1d4=new dijit.BackgroundIframe(_1d3);}else{_1d4.resize(_1d3);}var best=_1d1?dijit.placeOnScreenAroundElement(_1d3,_1d1,_1d0,_1cf.orient?dojo.hitch(_1cf,"orient"):null):dijit.placeOnScreen(_1d3,args,_1d0=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_1d3.style.visibility="visible";var _1d5=[];_1d5.push(dojo.connect(_1d3,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _1d6=_1cd();if(_1d6&&_1d6.onCancel){_1d6.onCancel();}}}}));if(_1cf.onCancel){_1d5.push(dojo.connect(_1cf,"onCancel",args.onCancel));}_1d5.push(dojo.connect(_1cf,_1cf.onExecute?"onExecute":"onChange",function(){var _1d7=_1cd();if(_1d7&&_1d7.onExecute){_1d7.onExecute();}}));_1ca.push({wrapper:_1d3,iframe:_1d4,widget:_1cf,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_1d5});if(_1cf.onOpen){_1cf.onOpen(best);}return best;};this.close=function(_1d8){while(dojo.some(_1ca,function(elem){return elem.widget==_1d8;})){var top=_1ca.pop(),_1d9=top.wrapper,_1da=top.iframe,_1db=top.widget,_1dc=top.onClose;if(_1db.onClose){_1db.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_1db&&_1db.domNode){this.moveOffScreen(_1db.domNode);}_1d9.style.top="-9999px";_1d9.style.visibility="hidden";_1ce.push([_1d9,_1da]);if(_1dc){_1dc();}}};}();dijit._frames=new function(){var _1dd=[];this.pop=function(){var _1de;if(_1dd.length){_1de=_1dd.pop();_1de.style.display="";}else{if(dojo.isIE){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_1de=dojo.doc.createElement(html);}else{_1de=dojo.create("iframe");_1de.src="javascript:\"\"";_1de.className="dijitBackgroundIframe";dojo.style(_1de,"opacity",0.1);}_1de.tabIndex=-1;}return _1de;};this.push=function(_1df){_1df.style.display="none";_1dd.push(_1df);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _1e0=dijit._frames.pop();node.appendChild(_1e0);if(dojo.isIE<7){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_1e0,{width:"100%",height:"100%"});}this.iframe=_1e0;}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe&&dojo.isIE<7){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _1e1=doc.compatMode=="BackCompat",_1e2=_1e1?body:html,_1e3=isWK?body:_1e2,_1e4=_1e2.clientWidth,_1e5=_1e2.clientHeight,rtl=!dojo._isBodyLtr(),_1e6=pos||dojo.position(node),el=node.parentNode,_1e7=function(el){return ((isIE<=6||(isIE&&_1e1))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_1e7(node)){return;}while(el){if(el==body){el=_1e3;}var _1e8=dojo.position(el),_1e9=_1e7(el);with(_1e8){if(el==_1e3){w=_1e4,h=_1e5;if(_1e3==html&&isIE&&rtl){x+=_1e3.offsetWidth-w;}if(x<0||!isIE){x=0;}if(y<0||!isIE){y=0;}}else{var pb=dojo._getPadBorderExtents(el);w-=pb.w;h-=pb.h;x+=pb.l;y+=pb.t;}with(el){if(el!=_1e3){var _1ea=clientWidth,_1eb=w-_1ea;if(_1ea>0&&_1eb>0){w=_1ea;if(isIE&&rtl){x+=_1eb;}}_1ea=clientHeight;_1eb=h-_1ea;if(_1ea>0&&_1eb>0){h=_1ea;}}if(_1e9){if(y<0){h+=y,y=0;}if(x<0){w+=x,x=0;}if(y+h>_1e5){h=_1e5-y;}if(x+w>_1e4){w=_1e4-x;}}var l=_1e6.x-x,t=_1e6.y-Math.max(y,0),r=l+_1e6.w-w,bot=t+_1e6.h-h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_1e6.x+=scrollLeft;scrollLeft+=(isIE>=8&&!_1e1&&rtl)?-s:s;_1e6.x-=scrollLeft;}if(bot*t>0){_1e6.y+=scrollTop;scrollTop+=Math[t<0?"max":"min"](t,bot);_1e6.y-=scrollTop;}}}el=(el!=_1e3)&&!_1e9&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_1ec=d.isOpera,maj=Math.floor,ff=d.isFF,_1ed=d.boxModel.replace(/-/,""),_1ee={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_iequirks:ie&&d.isQuirks,dj_opera:_1ec,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_1ee["dj_"+_1ed]=true;for(var p in _1ee){if(_1ee[p]){if(html.className){html.className+=" "+p;}else{html.className=p;}}}dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){html.className+=" dijitRtl";for(var p in _1ee){if(_1ee[p]){html.className+=" "+p+"-rtl";}}}});})();}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),10);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_1ef,node,_1f0,obj,_1f1,_1f2){if(obj!=this._obj){this.stop();this._initialDelay=_1f2||500;this._subsequentDelay=_1f1||0.9;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_1ef,_1f0);this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_1f3,_1f4,_1f5,_1f6,_1f7){if(_1f3.keyCode){_1f3.charOrCode=_1f3.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_1f3.charCode){_1f3.charOrCode=String.fromCharCode(_1f3.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_1f3.charOrCode&&(_1f3.ctrlKey===undefined||_1f3.ctrlKey==evt.ctrlKey)&&(_1f3.altKey===undefined||_1f3.altKey==evt.altKey)&&(_1f3.metaKey===undefined||_1f3.metaKey==(evt.metaKey||false))&&(_1f3.shiftKey===undefined||_1f3.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(_1f3,_1f4,node,_1f5,_1f3,_1f6,_1f7);}else{if(dijit.typematic._obj==_1f3){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_1f3){dijit.typematic.stop();}})];},addMouseListener:function(node,_1f8,_1f9,_1fa,_1fb){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_1f8,node,_1f9,node,_1fa,_1fb);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){dojo.stopEvent(evt);}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_1f8,node,_1f9,node,_1fa,_1fb);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_1fc,_1fd,_1fe,_1ff,_200,_201,_202){return this.addKeyListener(_1fd,_1fe,_1ff,_200,_201,_202).concat(this.addMouseListener(_1fc,_1ff,_200,_201,_202));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _203=cs.backgroundImage;var _204=(cs.borderTopColor==cs.borderRightColor)||(_203!=null&&(_203=="none"||_203=="url(invalid-url:)"));dojo[_204?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _205=this.getWaiRole(elem);return role?(_205.indexOf(role)>-1):(_205.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _206=dojo.attr(elem,"role")||"";if(!this._XhtmlRoles.test(_206)){dojo.attr(elem,"role",role);}else{if((" "+_206+" ").indexOf(" "+role+" ")<0){var _207=dojo.trim(_206.replace(this._XhtmlRoles,""));var _208=dojo.trim(_206.replace(_207,""));dojo.attr(elem,"role",_208+(_208?" ":"")+role);}}},removeWaiRole:function(elem,role){var _209=dojo.attr(elem,"role");if(!_209){return;}if(role){var t=dojo.trim((" "+_209+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_20a){return elem.hasAttribute?elem.hasAttribute("aria-"+_20a):!!elem.getAttribute("aria-"+_20a);},getWaiState:function(elem,_20b){return elem.getAttribute("aria-"+_20b)||"";},setWaiState:function(elem,_20c,_20d){elem.setAttribute("aria-"+_20c,_20d);},removeWaiState:function(elem,_20e){elem.removeAttribute("aria-"+_20e);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(_20f,_210){if(_20f&&dojo.isFunction(_20f._onConnect)){_20f._onConnect(_210);}});dijit._connectOnUseEventHandler=function(_211){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _212=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_212);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_212);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){var _213={},_214=function(_215){var dc=_215.declaredClass;if(!_213[dc]){var r=[],_216,_217=_215.constructor.prototype;for(var _218 in _217){if(dojo.isFunction(_217[_218])&&(_216=_218.match(/^_set([a-zA-Z]*)Attr$/))&&_216[1]){r.push(_216[1].charAt(0).toLowerCase()+_216[1].substr(1));}}_213[dc]=r;}return _213[dc]||[];};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_219,_21a){this.create(_219,_21a);},create:function(_21b,_21c){this.srcNodeRef=dojo.byId(_21c);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_21b){this.params=_21b;dojo.mixin(this,_21b);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _21d=this.srcNodeRef;if(_21d&&_21d.parentNode){_21d.parentNode.replaceChild(this.domNode,_21d);}for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _21e=function(attr,_21f){if((_21f.params&&attr in _21f.params)||_21f[attr]){_21f.attr(attr,_21f[attr]);}};for(var attr in this.attributeMap){_21e(attr,this);}dojo.forEach(_214(this),function(a){if(!(a in this.attributeMap)){_21e(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div");},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_220){this._beingDestroyed=true;this.destroyDescendants(_220);this.destroy(_220);},destroy:function(_221){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_222){dfe(_222,d.disconnect);});dfe(this._subscribes,function(_223){dun(_223);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_221);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_224){if(this.bgIframe){this.bgIframe.destroy(_224);delete this.bgIframe;}if(this.domNode){if(_224){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_224){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_225){dojo.forEach(this.getChildren(),function(_226){if(_226.destroyRecursive){_226.destroyRecursive(_225);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_227){if(_227 in this._deferredConnects){var _228=this[this._deferredConnects[_227]||"domNode"];this.connect(_228,_227.toLowerCase(),_227);delete this._deferredConnects[_227];}},_setClassAttr:function(_229){var _22a=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(_22a,this["class"]);this["class"]=_229;dojo.addClass(_22a,_229);},_setStyleAttr:function(_22b){var _22c=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_22b)){dojo.style(_22c,_22b);}else{if(_22c.style.cssText){_22c.style.cssText+="; "+_22b;}else{_22c.style.cssText=_22b;}}this.style=_22b;},setAttribute:function(attr,_22d){dojo.deprecated(this.declaredClass+"::setAttribute() is deprecated. Use attr() instead.","","2.0");this.attr(attr,_22d);},_attrToDom:function(attr,_22e){var _22f=this.attributeMap[attr];dojo.forEach(dojo.isArray(_22f)?_22f:[_22f],function(_230){var _231=this[_230.node||_230||"domNode"];var type=_230.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_22e)){_22e=dojo.hitch(this,_22e);}var _232=_230.attribute?_230.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_231,_232,_22e);break;case "innerText":_231.innerHTML="";_231.appendChild(dojo.doc.createTextNode(_22e));break;case "innerHTML":_231.innerHTML=_22e;break;case "class":dojo.removeClass(_231,this[attr]);dojo.addClass(_231,_22e);break;}},this);this[attr]=_22e;},attr:function(name,_233){var args=arguments.length;if(args==1&&!dojo.isString(name)){for(var x in name){this.attr(x,name[x]);}return this;}var _234=this._getAttrNames(name);if(args>=2){if(this[_234.s]){args=dojo._toArray(arguments,1);return this[_234.s].apply(this,args)||this;}else{if(name in this.attributeMap){this._attrToDom(name,_233);}this[name]=_233;}return this;}else{return this[_234.g]?this[_234.g]():this[name];}},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},nodesWithKeyClick:["input","button"],connect:function(obj,_235,_236){var d=dojo,dc=d._connect,_237=[];if(_235=="ondijitclick"){if(!this.nodesWithKeyClick[obj.tagName.toLowerCase()]){var m=d.hitch(this,_236);_237.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;d.stopEvent(e);}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target===dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}_235="onclick";}_237.push(dc(obj,_235,this,_236));this._connects.push(_237);return _237;},disconnect:function(_238){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_238){dojo.forEach(_238,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_239,_23a){var d=dojo,_23b=d.subscribe(_239,this,_23a);this._subscribes.push(_23b);return _23b;},unsubscribe:function(_23c){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_23c){dojo.unsubscribe(_23c);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return dojo._isBodyLtr();},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},placeAt:function(_23d,_23e){if(_23d.declaredClass&&_23d.addChild){_23d.addChild(this,_23e);}else{dojo.place(this.domNode,_23d,_23e);}return this;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){}});})();}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_23f,map,_240,_241){_241=_241||dojo.global;_240=_240?dojo.hitch(_241,_240):function(v){return v;};return _23f.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_242,key,_243){var _244=dojo.getObject(key,false,map);if(_243){_244=dojo.getObject(_243,false,_241).call(_241,_244,key);}return _240(_244,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_245,_246){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _247=dojo.date.stamp._isoRegExp.exec(_245),_248=null;if(_247){_247.shift();if(_247[1]){_247[1]--;}if(_247[6]){_247[6]*=1000;}if(_246){_246=new Date(_246);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _246["get"+prop]();}).forEach(function(_249,_24a){if(_247[_24a]===undefined){_247[_24a]=_249;}});}_248=new Date(_247[0]||1970,_247[1]||0,_247[2]||1,_247[3]||0,_247[4]||0,_247[5]||0,_247[6]||0);if(_247[0]<100){_248.setFullYear(_247[0]||1970);}var _24b=0,_24c=_247[7]&&_247[7].charAt(0);if(_24c!="Z"){_24b=((_247[8]||0)*60)+(Number(_247[9])||0);if(_24c!="-"){_24b*=-1;}}if(_24c){_24b-=_248.getTimezoneOffset();}if(_24b){_248.setTime(_248.getTime()+_24b*60000);}}return _248;};dojo.date.stamp.toISOString=function(_24d,_24e){var _24f=function(n){return (n<10)?"0"+n:n;};_24e=_24e||{};var _250=[],_251=_24e.zulu?"getUTC":"get",date="";if(_24e.selector!="time"){var year=_24d[_251+"FullYear"]();date=["0000".substr((year+"").length)+year,_24f(_24d[_251+"Month"]()+1),_24f(_24d[_251+"Date"]())].join("-");}_250.push(date);if(_24e.selector!="date"){var time=[_24f(_24d[_251+"Hours"]()),_24f(_24d[_251+"Minutes"]()),_24f(_24d[_251+"Seconds"]())].join(":");var _252=_24d[_251+"Milliseconds"]();if(_24e.milliseconds){time+="."+(_252<100?"0":"")+_24f(_252);}if(_24e.zulu){time+="Z";}else{if(_24e.selector!="time"){var _253=_24d.getTimezoneOffset();var _254=Math.abs(_253);time+=(_253>0?"-":"+")+_24f(Math.floor(_254/60))+":"+_24f(_254%60);}}_250.push(time);}return _250.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";function _255(_256){if(d.isString(_256)){return "string";}if(typeof _256=="number"){return "number";}if(typeof _256=="boolean"){return "boolean";}if(d.isFunction(_256)){return "function";}if(d.isArray(_256)){return "array";}if(_256 instanceof Date){return "date";}if(_256 instanceof d._Url){return "url";}return "object";};function _257(_258,type){switch(type){case "string":return _258;case "number":return _258.length?Number(_258):NaN;case "boolean":return typeof _258=="boolean"?_258:!(_258.toLowerCase()=="false");case "function":if(d.isFunction(_258)){_258=_258.toString();_258=d.trim(_258.substring(_258.indexOf("{")+1,_258.length-1));}try{if(_258.search(/[^\w\.]+/i)!=-1){return new Function(_258);}else{return d.getObject(_258,false);}}catch(e){return new Function();}case "array":return _258?_258.split(/\s*,\s*/):[];case "date":switch(_258){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_258);}case "url":return d.baseUrl+_258;default:return d.fromJson(_258);}};var _259={};dojo.connect(dojo,"extend",function(){_259={};});function _25a(_25b){if(!_259[_25b]){var cls=d.getObject(_25b);if(!d.isFunction(cls)){throw new Error("Could not load class '"+_25b+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");}var _25c=cls.prototype;var _25d={},_25e={};for(var name in _25c){if(name.charAt(0)=="_"){continue;}if(name in _25e){continue;}var _25f=_25c[name];_25d[name]=_255(_25f);}_259[_25b]={cls:cls,params:_25d};}return _259[_25b];};this._functionFromScript=function(_260){var _261="";var _262="";var _263=_260.getAttribute("args");if(_263){d.forEach(_263.split(/\s*,\s*/),function(part,idx){_261+="var "+part+" = arguments["+idx+"]; ";});}var _264=_260.getAttribute("with");if(_264&&_264.length){d.forEach(_264.split(/\s*,\s*/),function(part){_261+="with("+part+"){";_262+="}";});}return new Function(_261+_260.innerHTML+_262);};this.instantiate=function(_265,_266,args){var _267=[],dp=dojo.parser;_266=_266||{};args=args||{};d.forEach(_265,function(node){if(!node){return;}var type=dp._attrName in _266?_266[dp._attrName]:node.getAttribute(dp._attrName);if(!type||!type.length){return;}var _268=_25a(type),_269=_268.cls,ps=_269._noScript||_269.prototype._noScript;var _26a={},_26b=node.attributes;for(var name in _268.params){var item=name in _266?{value:_266[name],specified:true}:_26b.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _26c=item.value;switch(name){case "class":_26c="className" in _266?_266.className:node.className;break;case "style":_26c="style" in _266?_266.style:(node.style&&node.style.cssText);}var _26d=_268.params[name];if(typeof _26c=="string"){_26a[name]=_257(_26c,_26d);}else{_26a[name]=_26c;}}if(!ps){var _26e=[],_26f=[];d.query("> script[type^='dojo/']",node).orphan().forEach(function(_270){var _271=_270.getAttribute("event"),type=_270.getAttribute("type"),nf=d.parser._functionFromScript(_270);if(_271){if(type=="dojo/connect"){_26e.push({event:_271,func:nf});}else{_26a[_271]=nf;}}else{_26f.push(nf);}});}var _272=_269.markupFactory||_269.prototype&&_269.prototype.markupFactory;var _273=_272?_272(_26a,node,_269):new _269(_26a,node);_267.push(_273);var _274=node.getAttribute("jsId");if(_274){d.setObject(_274,_273);}if(!ps){d.forEach(_26e,function(_275){d.connect(_273,_275.event,null,_275.func);});d.forEach(_26f,function(func){func.call(_273);});}});if(!_266._started){d.forEach(_267,function(_276){if(!args.noStart&&_276&&_276.startup&&!_276._started&&(!_276.getParent||!_276.getParent())){_276.startup();}});}return _267;};this.parse=function(_277,args){var root;if(!args&&_277&&_277.rootNode){args=_277;root=args.rootNode;}else{root=_277;}var list=d.query(this._query,root);return this.instantiate(list,null,args);};}();(function(){var _278=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_278);}else{dojo._loaders.unshift(_278);}})();}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var _279={};dojo.cache=function(_27a,url,_27b){if(typeof _27a=="string"){var _27c=dojo.moduleUrl(_27a,url);}else{_27c=_27a;_27b=url;}var key=_27c.toString();var val=_27b;if(_27b!==undefined&&!dojo.isString(_27b)){val=("value" in _27b?_27b.value:undefined);}var _27d=_27b&&_27b.sanitize?true:false;if(val||val===null){if(val==null){delete _279[key];}else{val=_279[key]=_27d?dojo.cache._sanitize(val):val;}}else{if(!(key in _279)){val=dojo._getText(key);_279[key]=_27d?dojo.cache._sanitize(val):val;}val=_279[key];}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _27e=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_27e){val=_27e[1];}}else{val="";}return val;};})();}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,_stringRepl:function(tmpl){var _27f=this.declaredClass,_280=this;return dojo.string.substitute(tmpl,this,function(_281,key){if(key.charAt(0)=="!"){_281=dojo.getObject(key.substr(1),false,_280);}if(typeof _281=="undefined"){throw new Error(_27f+" template:"+key);}if(_281==null){return "";}return key.charAt(0)=="!"?_281:_281.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){this._attachPoints=[];var _282=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_282)){node=dojo._toDom(this._stringRepl(_282));if(node.nodeType!=1){throw new Error("Invalid template: "+_282);}}else{node=_282.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _283=dojo.parser,qry,attr;if(_283._query!="[dojoType]"){qry=_283._query;attr=_283._attrName;_283._query="[dojoType]";_283._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup}));if(qry){_283._query=qry;_283._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_284){var dest=this.containerNode;if(_284&&dest){while(_284.hasChildNodes()){dest.appendChild(_284.firstChild);}}},_attachTemplateNodes:function(_285,_286){_286=_286||function(n,p){return n.getAttribute(p);};var _287=dojo.isArray(_285)?_285:(_285.all||_285.getElementsByTagName("*"));var x=dojo.isArray(_285)?0:-1;for(;x<_287.length;x++){var _288=(x==-1)?_285:_287[x];if(this.widgetsInTemplate&&_286(_288,"dojoType")){continue;}var _289=_286(_288,"dojoAttachPoint");if(_289){var _28a,_28b=_289.split(/\s*,\s*/);while((_28a=_28b.shift())){if(dojo.isArray(this[_28a])){this[_28a].push(_288);}else{this[_28a]=_288;}this._attachPoints.push(_28a);}}var _28c=_286(_288,"dojoAttachEvent");if(_28c){var _28d,_28e=_28c.split(/\s*,\s*/);var trim=dojo.trim;while((_28d=_28e.shift())){if(_28d){var _28f=null;if(_28d.indexOf(":")!=-1){var _290=_28d.split(":");_28d=trim(_290[0]);_28f=trim(_290[1]);}else{_28d=trim(_28d);}if(!_28f){_28f=_28d;}this.connect(_288,_28d,_28f);}}}var role=_286(_288,"waiRole");if(role){dijit.setWaiRole(_288,role);}var _291=_286(_288,"waiState");if(_291){dojo.forEach(_291.split(/\s*,\s*/),function(_292){if(_292.indexOf("-")!=-1){var pair=_292.split("-");dijit.setWaiState(_288,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_293){delete this[_293];},this);this._attachPoints=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_294,_295,_296){var _297=dijit._Templated._templateCache;var key=_295||_294;var _298=_297[key];if(_298){try{if(!_298.ownerDocument||_298.ownerDocument==dojo.doc){return _298;}}catch(e){}dojo.destroy(_298);}if(!_295){_295=dojo.cache(_294,{sanitize:true});}_295=dojo.string.trim(_295);if(_296||_295.match(/\$\{([^\}]+)\}/g)){return (_297[key]=_295);}else{var node=dojo._toDom(_295);if(node.nodeType!=1){throw new Error("Invalid template: "+_295);}return (_297[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _299=dijit._Templated._templateCache;for(var key in _299){var _29a=_299[key];if(typeof _29a=="object"){dojo.destroy(_29a);}delete _299[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["yfiles.client.tiles.widget.GraphCanvas"]){dojo._hasResource["yfiles.client.tiles.widget.GraphCanvas"]=true;dojo.provide("yfiles.client.tiles.widget.GraphCanvas");dojo.declare("yfiles.client.tiles.widget.GraphCanvas",[dijit._Widget,dijit._Templated],{width:512,height:512,x:0,y:0,tileSize:512,zoom:1,nodeEvents:false,edgeEvents:false,nodeLabelEvents:false,edgeLabelEvents:false,paperEvents:false,baseURL:".",path:"",highlightNodeSurroundPixels:10,mouseWheelScrollFactor:2,maxZoomForFitContent:1000000,movables:null,tilesFrame:null,tiles:null,oldTiles:null,overlays:null,_loading:null,_graph:null,_hitTest:null,_lastHit:null,_mover:null,_dragging:false,_moverConnectHandle:null,_mouseOver:false,_fixed:false,_worldBounds:null,_inputMode:"pan",_sequenceId:0,_mouse:null,_mouseDownPos:null,_worldCoords:null,_zoomDigits:4,_highlightMap:null,_requestedTiles:null,_recalculateTriggered:false,_updateViepointTriggered:false,_minZoomProvider:null,_maxZoomProvider:null,_highlighter:null,templateString:"<div class=\"yFilesGraphCanvas\" dojoAttachPoint=\"tilesFrame\" style=\"overflow:hidden;position:relative;width:100%;height:100%;bottom:auto;right:auto;\"\n     dojoAttachEvent=\"onmousedown:_onMouseDown,onmousemove:_onMouseMove,onmouseout:onMouseOut,onmouseover:onMouseOver,onmouseup:onMouseUp,onclick:onClick,ondblclick:onDblClick\">\n  <div class=\"loading\" dojoAttachPoint=\"_loading\" style=\"position:absolute;width: 100%;height:100%;z-index:0;\"></div>\n  <div class=\"movables\" dojoAttachPoint=\"movables\" style=\"border-width:0;padding:0;margin:0;position:absolute;\">\n    <div class=\"oldTiles\" dojoAttachPoint=\"oldTiles\" style=\"position:absolute;z-index:0;\"></div>\n    <div class=\"tiles\" dojoAttachPoint=\"tiles\" style=\"position:absolute;z-index:1;\"></div>\n    <div class=\"overlays\" dojoAttachPoint=\"overlays\" style=\"position:absolute;z-index:2;\"></div>\n  </div>\n  <div class=\"contents\" dojoAttachPoint=\"containerNode\" style=\"position:absolute;z-index:3;\"></div>\n</div>\n",postCreate:function(){dojo.connect(this.movables,"ondragstart",dojo,"stopEvent");dojo.connect(this.movables,"onselectstart",dojo,"stopEvent");this.setZoomBoundsProviders(null,null);this.setAutoRefresh(true);this._highlightMap=new dojox.collections.Dictionary();this._mouse={x:0,y:0};this._mouseDownPos={x:-100,y:-100};this._sequenceId=this._newSequenceId();try{this.tileSize=parseInt(this.tileSize);}catch(e){this.tileSize=512;}this._graph=new yfiles.client.tiles.Graph(this.baseURL);this._initializeGraphListeners();this._checkSize();this._requestedTiles={};this._hitTest=new yfiles.client.tiles.HitTest(this.baseURL,this.path,this._worldBounds,this.nodeEvents,this.edgeEvents,this.nodeLabelEvents,this.edgeLabelEvents,this.paperEvents);this._lastHit=this._hitTest.getEmptyHitInfo(0,0);this.connect(this._hitTest,"onNewData","_newHitTestData");if(dojo.isFF){this.tilesFrame.addEventListener("DOMMouseScroll",dojo.hitch(this,"_mouseWheeled"),false);}else{this.connect(this.tilesFrame,"onmousewheel","_mouseWheeled");}this._highlighter=new yfiles.client.tiles.GraphHighlighter(this);this.connect(window,"onresized","_onResized");this.setPath(this.path);},_removeMover:function(){this.disconnect(this._moverConnectHandle);this._moverConnectHandle=null;if(this._mover){this._mover.destroy();this._mover=null;}},setHighlighter:function(_29b){this._highlighter=_29b;},setBaseURL:function(_29c){this.baseURL=_29c;this._graph._baseURL=_29c;},setPath:function(_29d,_29e){if(!_29d||_29d==""){return;}this.clear();this.path=_29d;this.beforeRequest();this._graph.load(_29d,_29e);},getGraph:function(){return this._graph;},fitContent:function(){this._fitContent(false);},_fitContent:function(_29f){this.beforeRequest();var self=this;dojo.xhrGet({url:this.baseURL+"/getWorldBounds?path="+this.path+"&seq="+this._sequenceId,load:function(_2a0,_2a1){self.requestDone(true);if(_29f){self._removeDOMChildren(self.oldTiles);}self._initializeWorldBounds(_2a0,_29f,true);self._refreshOverlays();self.viewPortChanged(self.x,self.y,self.width,self.height,self.zoom);if(_29f){self.unhighlightAll();}self.recalculateTiles(true);if(_29f){var _2a2=function(url,path,_2a3){self.pathSet(path);};self._hitTest.setGraphParameters(self.baseURL,self.path,self._worldBounds,_2a2);}},error:function(_2a4,_2a5){self.requestDone(false);},handleAs:"json"});},clear:function(_2a6){this._removeTiles();if(_2a6!=false){if(this._hitTest){this._hitTest.clear();}this._highlightMap.clear();this._sequenceId=this._newSequenceId();}},refresh:function(_2a7,_2a8,_2a9){if(!_2a9){this.pushTiles();}this._sequenceId=this._newSequenceId();if(_2a7){this.updateWorldBounds(_2a7);}else{this.beforeRequest();var self=this;dojo.xhrGet({url:this.baseURL+"/getWorldBounds?path="+this.path+"&seq="+this._sequenceId,load:function(_2aa,_2ab){self.requestDone(true);var bb={minX:_2aa.x,minY:_2aa.y,maxX:_2aa.x+_2aa.width,maxY:_2aa.y+_2aa.height};self.updateWorldBounds(bb);},error:function(_2ac,_2ad){self.requestDone(false);},handleAs:"json"});}if(_2a8){this.shift(this.zoom*_2a8.x,this.zoom*_2a8.y,true);}this.recalculateTiles(true);},_initializeWorldBounds:function(_2ae,_2af,_2b0){if(this.height==0){this.height=this.tileSize;}if(this.width==0){this.width=this.tileSize;}this._worldBounds=new yfiles.client.tiles.GraphBounds(_2ae.x,_2ae.x+_2ae.width,_2ae.y,_2ae.y+_2ae.height);if(_2b0){var _2b1=this._getFullZoom()*0.95;var _2b2=Math.min(_2b1,this.maxZoomForFitContent);_2b2=this._round(_2b2);this.setZoom(_2b2,false);this.center(this.zoom*(_2ae.width/2+_2ae.x),this.zoom*(_2ae.height/2+_2ae.y));}},_getFullZoom:function(){var _2b3=this.width/this._worldBounds.width();var _2b4=this.height/this._worldBounds.height();return Math.min(_2b3,_2b4);},_round:function(x){var _2b5=Math.pow(10,this._zoomDigits);var aux=Math.floor(_2b5*x);return aux/_2b5;},setZoom:function(zoom){this._setZoom(zoom,true);},setZoomBoundsProviders:function(_2b6,_2b7){if(_2b6){this._minZoomProvider=_2b6;}else{this._minZoomProvider=this._defaultMinZoomProvider;}if(_2b7){this._maxZoomProvider=_2b7;}else{this._maxZoomProvider=this._defaultMaxZoomProvider;}},_defaultMinZoomProvider:function(_2b8){return 0.5*_2b8._getFullZoom();},_defaultMaxZoomProvider:function(_2b9){return 5;},_setZoom:function(zoom,_2ba){var _2bb=this._round(zoom);var _2bc=this._minZoomProvider(this);if(_2bb<_2bc){_2bb=this._round(_2bc);}var _2bd=this._maxZoomProvider(this);if(_2bb>_2bd){_2bb=this._round(_2bd);}if((_2bb>0)&&_2ba){this._zoomChanged(_2bb);}},setPanMode:function(_2be){this._inputMode="pan";if(this._fixed){this._fixed=false;this.recalculateTiles(_2be);}else{if(_2be){this.recalculateTiles(_2be);}}},setViewPoint:function(newX,newY,_2bf){this.x=Math.round(newX);this.y=Math.round(newY);if(!this._dragging){if(_2bf){var oldX=parseInt(this.movables.style.left);var oldY=parseInt(this.movables.style.top);this.oldTiles.style.left=(oldX-newX)+"px";this.oldTiles.style.top=(oldY-newY)+"px";}this.movables.style.left=this.x+"px";this.movables.style.top=this.y+"px";}if(this._mouseOver&&!this._dragging&&this._inputMode=="pan"&&this._hitTest){this._mouseOverOutTest();}this._refreshOverlays();this.viewPortChanged(this.x,this.y,this.width,this.height,this.zoom);},center:function(cX,cY){this.setViewPoint(-cX+this.width/2,-cY+this.height/2);},shift:function(dx,dy,_2c0){this.setViewPoint(this.x+dx,this.y+dy,_2c0);},setNoInteractionMode:function(){this._inputMode="none";if(!this._fixed){this._fixed=true;this._removeMover();this._removeTiles();this.recalculateTiles();}},fix:function(){if(this._inputMode=="pan"){this._fixed=true;this._removeMover();}},release:function(){if(this._inputMode=="pan"){this._fixed=false;}},_zoomChanged:function(zoom){if(this.path==""){return;}var _2c1=this.zoom;if(_2c1==zoom){return;}this.zoom=zoom;var _2c2={"x":Math.floor(this.width/2),"y":Math.floor(this.height/2)};var _2c3={"x":_2c2.x-this.x,"y":_2c2.y-this.y};var _2c4=this.zoom/_2c1;var _2c5={"x":Math.floor(_2c3.x*_2c4),"y":Math.floor(_2c3.y*_2c4)};dojo.forEach(this.tiles.childNodes,function(t){dojo.style(t,"display","none");});this.setViewPoint(_2c2.x-_2c5.x,_2c2.y-_2c5.y);if(!this._recalculateTriggered){var old=[];dojo.forEach(this.oldTiles.childNodes,function(t){old.push(t);});this._shiftOldTiles();this._scaleTiles(this.oldTiles,_2c4);while(this.tiles.hasChildNodes()){var tile=this.tiles.firstChild;var img=tile.firstChild;if(img){this._scaleTile(tile,img,_2c4);this.tiles.removeChild(tile);tile.removeAttribute("id");this.oldTiles.appendChild(tile);dojo.style(tile,"display","block");}else{dojo._destroyElement(tile);}}setTimeout(dojo.hitch(this,this._removeOldTiles,old),3000);}else{this._scaleTiles(this.oldTiles,_2c4);}this._resetRequestedTile();this.recalculateTiles();},_shiftOldTiles:function(){var _2c6=parseInt(this.oldTiles.style.left);var _2c7=parseInt(this.oldTiles.style.top);if(_2c6!=0||_2c7!=0){dojo.style(this.oldTiles,"left","0px");dojo.style(this.oldTiles,"top","0px");dojo.forEach(this.oldTiles.childNodes,function(t){this._shiftTile(t,_2c6,_2c7);},this);}},_shiftTile:function(tile,dx,dy){var _2c8=parseInt(tile.style.left);var _2c9=parseInt(tile.style.top);dojo.style(tile,"left",(_2c8+dx)+"px");dojo.style(tile,"top",(_2c9+dy)+"px");},_scaleTiles:function(_2ca,_2cb){dojo.forEach(_2ca.childNodes,function(tile){if(tile){dojo.style(tile,"display","none");}});dojo.forEach(_2ca.childNodes,function(tile){if(tile){var img=tile.firstChild;if(img){this._scaleTile(tile,img,_2cb);dojo.style(tile,"display","block");}else{dojo._destroyElement(tile);}}},this);},_scaleTile:function(tile,img,_2cc){dojo.style(tile,"left",(parseInt(tile.style.left)*_2cc)+"px");dojo.style(tile,"top",(parseInt(tile.style.top)*_2cc)+"px");dojo.style(tile,"width",(parseInt(tile.style.width)*_2cc)+"px");dojo.style(tile,"height",(parseInt(tile.style.height)*_2cc)+"px");img.width=img.width*_2cc;img.height=img.height*_2cc;},_removeOldTiles:function(_2cd){var _2ce=true;dojo.forEach(this.tiles.childNodes,function(t){if(!t.firstChild){_2ce=false;}});if(_2ce){this._removeDOMNodes(_2cd);}else{setTimeout(dojo.hitch(this,this._removeOldTiles,_2cd),3000);}},_refreshOverlays:function(){var _2cf=this._highlightMap.getIterator();for(var _2d0=_2cf.get();_2d0;_2d0=_2cf.get()){this._refreshHighlight(_2d0.key);}},_dragMoved:function(_2d1,_2d2){if(!this._dragging){this.tilesFrame.style.cursor="move";}this._dragging=true;if(!this._updateViepointTriggered){this._updateViepointTriggered=true;setTimeout(dojo.hitch(this,this._updateViewPoint,false),100);}this.recalculateTiles();},_updateViewPoint:function(){var x=parseInt(this.movables.style.left);var y=parseInt(this.movables.style.top);this.setViewPoint(x,y);this._updateViepointTriggered=false;},_mouseWheeled:function(evt){dojo.stopEvent(evt);if(this._inputMode=="none"){return;}var _2d3=0;if(dojo.isFF){_2d3=-evt.detail;}else{if(typeof evt.wheelDelta=="number"){_2d3=evt.wheelDelta;}}if(_2d3>0){this.setZoom(this.zoom*this.mouseWheelScrollFactor);}else{if(_2d3<0){this.setZoom(this.zoom/this.mouseWheelScrollFactor);}}},resize:function(_2d4){dojo.marginBox(this.domNode,_2d4);this._onResized();},_checkSize:function(){var cb=dojo.contentBox(this.domNode);this.width=cb.w;this.height=cb.h;},_resizePending:false,_onResized:function(e){this._checkSize();if(!this._resizePending){this._resizePending=true;setTimeout(dojo.hitch(this,this._onResizedCore),200);}},_onResizedCore:function(){if(this._inputMode=="none"){this.setPath(this.path);}else{this.recalculateTiles();this._refreshOverlays();this.viewPortChanged(this.x,this.y,this.width,this.height,this.zoom);}this._resizePending=false;},onMouseOver:function(evt){this._mouseOver=true;},onMouseOut:function(evt){this._mouseOver=false;},isMouseOver:function(){return this._mouseOver;},_onMouseDown:function(evt){this._mouseDownPos={x:this._mouse.x,y:this._mouse.y};this._mouseOver=true;if(this._inputMode!="none"){this._dragging=false;}if(!this._fixed){this._mover=new dojo.dnd.Mover(this.movables,evt,this);this._moverConnectHandle=this.connect(this._mover,"onMouseMove","_onMouseMove");}evt.preventDefault();this.onMouseDown(evt);},onMove:function(_2d5,_2d6){dojo.marginBox(_2d5.node,_2d6);this._dragMoved(_2d5,_2d6);},onFirstMove:function(){},onMouseDown:function(evt){},onClick:function(evt){if(this._inputMode!="none"&&this._hitTest&&this._hitTest.isActive()&&this._mouse.x==this._mouseDownPos.x&&this._mouse.y==this._mouseDownPos.y){this._fireGraphEvent(evt,"onClick",false);}},_getGraphEvent:function(_2d7){return this._hitTest.getHitInfo(this._worldCoords.x,this._worldCoords.y,_2d7);},_fireGraphEvent:function(evt,type,_2d8){var info=this._getGraphEvent(_2d8);this._fireEvent(info,type,evt);},_fireEvent:function(info,type,evt){var _2d9=yfiles.client.tiles.HitTest.getElementType(info);var _2da=type+_2d9;var func=this[_2da];if(func){if(_2d9!="Paper"){var id=yfiles.client.tiles.HitTest.getHitId(info);func.call(this,id,info,evt);}else{func.call(this,info,evt);}}},onDblClick:function(evt){if(this._inputMode!="none"&&this._hitTest&&this._hitTest.isActive()){this._fireGraphEvent(evt,"onDblClick",false);}},_fixLayerCoords:function(evt){var _2db=dojo.mixin({},evt);var _2dc=dojo.coords(this.domNode,false);_2db.layerX=evt.pageX-_2dc.x;_2db.layerY=evt.pageY-_2dc.y;return _2db;},_onMouseMove:function(evt){var _2dd=this._fixLayerCoords(evt);this._mouseOver=true;if(this._inputMode!="none"){this._mouse={x:_2dd.layerX,y:_2dd.layerY};if(this._hitTest&&this._hitTest.isActive()){if(!this._dragging){this._mouseOverOutTest(_2dd);}else{var _2de=yfiles.client.tiles.HitTest.getHitId(this._lastHit);if(_2de!=null){this._fireEvent(this._lastHit,"onMouseOut",evt);this._lastHit=this._hitTest.getEmptyHitInfo(this._worldCoords.x,this._worldCoords.y);}}}}evt.preventDefault();this.onMouseMove(_2dd);},onMouseMove:function(evt){},_mouseOverOutTest:function(evt){this._setWorldCoords();var info=this._getGraphEvent(true);var _2df=yfiles.client.tiles.HitTest.getHitId(info);var _2e0=yfiles.client.tiles.HitTest.getHitId(this._lastHit);if(_2df!=_2e0){if(_2e0!=null){yfiles.client.tiles.HitTest.setCoords(this._lastHit,this._worldCoords.x,this._worldCoords.y);this._fireEvent(this._lastHit,"onMouseOut",evt);}if(_2df!=null){this._fireEvent(info,"onMouseOver",evt);}}this._lastHit=info;},_setWorldCoords:function(){this._worldCoords={x:(this._mouse.x-this.x)/this.zoom,y:(this._mouse.y-this.y)/this.zoom};},onMouseUp:function(evt){if(this._inputMode!="none"){this._dragging=false;this.tilesFrame.style.cursor="default";this._removeMover();if(this._inputMode=="pan"&&this._hitTest&&this._hitTest.isActive()){this._mouseOverOutTest();}}},onClickNode:function(_2e1,info,evt){},onDblClickNode:function(_2e2,info,evt){},onMouseOverNode:function(_2e3,info,evt){},onMouseOutNode:function(_2e4,info,evt){},onClickNodeLabel:function(_2e5,info,evt){},onDblClickNodeLabel:function(_2e6,info,evt){},onMouseOverNodeLabel:function(_2e7,info,evt){},onMouseOutNodeLabel:function(_2e8,info,evt){},onClickEdge:function(_2e9,info,evt){},onDblClickEdge:function(_2ea,info,evt){},onMouseOverEdge:function(_2eb,info,evt){},onMouseOutEdge:function(_2ec,info,evt){},onClickEdgeLabel:function(_2ed,info,evt){},onDblClickEdgeLabel:function(_2ee,info,evt){},onMouseOverEdgeLabel:function(_2ef,info,evt){},onMouseOutEdgeLabel:function(_2f0,info,evt){},onClickPaper:function(info,evt){},_assembleTileRequestString:function(_2f1){var req=this.baseURL+"/"+_2f1.request+"?zoom="+_2f1.zoom+"&col="+_2f1.col+"&row="+_2f1.row;if(_2f1.size){req+="&size="+_2f1.size;}else{req+="&size="+this.tileSize;}if(_2f1.path){req+="&path="+_2f1.path;}else{if(this.path){req+="&path="+this.path;}}req+="&seq="+this._sequenceId;return req;},_getTileId:function(zoom,col,row){return "div_"+this.id+"_"+zoom+"_"+col+"_"+row;},pushTiles:function(){var old=[];dojo.forEach(this.oldTiles.childNodes,function(t){old.push(t);});setTimeout(dojo.hitch(this,this._removeOldTiles,old),3000);this.oldTiles.style.left="0px";this.oldTiles.style.top="0px";while(this.tiles.hasChildNodes()){var tile=this.tiles.firstChild;this.tiles.removeChild(tile);tile.removeAttribute("id");this.oldTiles.appendChild(tile);}this._resetRequestedTile();},recalculateTiles:function(_2f2){if(this.path==""){return;}if(!this._recalculateTriggered){if(_2f2){this._sequenceId=this._newSequenceId();this._resetRequestedTile();}this._recalculateTriggered=true;setTimeout(dojo.hitch(this,this._recalculateTiles,_2f2),100);}},_recalculateTiles:function(_2f3){var _2f4=new yfiles.client.tiles.GraphBounds(-this.x,this.width-this.x,-this.y,this.height-this.y);var _2f5=this._columnsAndRowsForArea(_2f4);this._loadTiles(_2f5,_2f3);},_tileWasRequested:function(col,row){return (this._requestedTiles[col]&&this._requestedTiles[col][row]);},_registerTileRequest:function(col,row){if(!this._requestedTiles[col]){this._requestedTiles[col]={};}this._requestedTiles[col][row]=true;},_resetRequestedTile:function(col,row){if(col&&row){if(!this._requestedTiles[col]){this._requestedTiles[col]={};}this._requestedTiles[col][row]=false;}else{this._requestedTiles={};}},_loadTiles:function(_2f6,_2f7){dojo.style(this._loading,"display","block");for(var col=_2f6.minX;col<=_2f6.maxX;col++){for(var row=_2f6.minY-1;row<=_2f6.maxY+1;row++){var _2f8=this._getTileId(this.zoom,col,row);if(_2f7||!this._tileWasRequested(col,row)){this._registerTileRequest(col,row);this._loadTile(_2f7,_2f8,col,row);}}}this._hideLoading();this._recalculateTriggered=false;},_hideLoading:function(){var _2f9=true;dojo.forEach(this.tiles.childNodes,function(t){if(!t.firstChild){_2f9=false;}});if(_2f9){dojo.style(this._loading,"display","none");}else{setTimeout(dojo.hitch(this,this._hideLoading),3000);}},_loadTile:function(_2fa,_2fb,col,row){if(!this._tileWasRequested(col,row)){return;}if(_2fa){var _2fc=dojo.byId(_2fb);if(_2fc){this._removeDOMChildren(_2fc);dojo._destroyElement(_2fc);}}var _2fd={request:"getImage",zoom:this.zoom,col:col,row:row};var _2fe=this._assembleTileRequestString(_2fd);var div=dojo.doc.createElement("div");div.setAttribute("id",_2fb);this.tiles.appendChild(div);dojo.style(div,"display","block");dojo.style(div,"position","absolute");dojo.style(div,"left",(col*this.tileSize)+"px");dojo.style(div,"top",(row*this.tileSize)+"px");dojo.style(div,"width",this.tileSize+"px");dojo.style(div,"height",this.tileSize+"px");setTimeout(dojo.hitch(this,this._loadImage,_2fe,div,_2fb),0);},_loadImage:function(_2ff,div,_300){var img=new Image(this.tileSize,this.tileSize);dojo.style(img,"display","block");var self=this;img.onload=function(){img.onload=null;if(div&&div.parentNode){div.appendChild(img);self.tileLoaded(self.path,_300);}};img.src=_2ff;},_removeTiles:function(){if(!this.tiles){return;}this._removeDOMChildren(this.tiles);this._resetRequestedTile();},_columnsAndRowsForArea:function(area){return area.scale(1/this.tileSize).round();},tileLoaded:function(_301){},pathSet:function(path){},viewPortChanged:function(x,y,_302,_303,zoom){},beforeRequest:function(){},requestDone:function(_304){},getMousePosition:function(){return {x:this._mouse.x,y:this._mouse.y};},getViewCoordinates:function(rawX,rawY){rawX=rawX?rawX:this._mouse.x;rawY=rawY?rawY:this._mouse.y;var x=(rawX-this.x);var y=(rawY-this.y);return {x:x,y:y};},getWorldCoordinates:function(x,y){var _305=this.getViewCoordinates(x,y);return {x:_305.x/this.zoom,y:_305.y/this.zoom};},getHitTest:function(){return this._hitTest;},getLastHitInfo:function(){return this._lastHit;},_newSequenceId:function(){return new dojox.uuid.Uuid(dojox.uuid.generateTimeBasedUuid());},_removeDOMChildren:function(_306){while(_306.hasChildNodes()){this._removeDOMChildren(_306.firstChild);dojo._destroyElement(_306.firstChild);}},_removeDOMNodes:function(_307){dojo.forEach(_307,function(_308){this._removeDOMChildren(_308);var _309=_308.parentNode;if(_309){_309.removeChild(_308);}dojo._destroyElement(_308);},this);},updateWorldBounds:function(_30a,_30b){if(this._worldBounds==null){this._initializeWorldBounds(_30a);}else{this._worldBounds=new yfiles.client.tiles.GraphBounds(_30a.minX,_30a.maxX,_30a.minY,_30a.maxY);}if(this._hitTest&&!_30b){this._hitTest.setGraphParameters(this.baseURL,this.path,this._worldBounds);}},_initializeGraphListeners:function(){this.connect(this._graph,"onLoad","_onLoad");this.connect(this._graph,"onLoadFailed","_onLoadFailed");this.connect(this._graph,"onNodeCreated","_onBoundsChange");this.connect(this._graph,"onEdgeCreated","_onBoundsChange");this.connect(this._graph,"onNodesMoved","_onBoundsChange");this.connect(this._graph,"onLabelSet","_onBoundsChange");this.connect(this._graph,"onRemove","_onBoundsChange");},_onLoad:function(name){this.requestDone(true);this._fitContent(true);},_onLoadFailed:function(name){this.requestDone(false);},isAutoRefresh:function(){return this._autoRefresh;},setAutoRefresh:function(_30c){this._autoRefresh=_30c;},_onBoundsChange:function(){if(this._autoRefresh){this.refresh();}},_newHitTestData:function(){this._refreshOverlays();if(!this._dragging&&this._inputMode=="pan"&&this._hitTest&&this._hitTest.isActive()){this._mouseOverOutTest();}},highlight:function(id){if(!this._highlightMap.item(id)){var div=this._createHighlightDiv(id);if(div){this.overlays.appendChild(div);this._highlightMap.add(id,div);}}},unhighlight:function(id){var div=this._highlightMap.item(id);if(div){this._removeDOMChildren(div);dojo._destroyElement(div);}this._highlightMap.remove(id);},unhighlightAll:function(){this._highlightMap.clear();this._removeDOMChildren(this.overlays);},_createHighlightDiv:function(id){var type=yfiles.client.tiles.HitTest.getElementType(id);if(type!="Edge"){return this._highlightRect(id);}else{return this._highlightEdge(id);}},_refreshHighlight:function(id){var div=this._highlightMap.item(id);if(div){this._removeDOMChildren(div);dojo._destroyElement(div);}div=this._createHighlightDiv(id);if(div){this.overlays.appendChild(div);}this._highlightMap.add(id,div);},_highlightRect:function(id){if(null!=this._highlighter){var _30d=this._hitTest.getBoundsForId(id);if(_30d){var div=dojo.doc.createElement("div");var sur=this.highlightNodeSurroundPixels;dojo.style(div,"left",(_30d.minX*this.zoom-sur)+"px");dojo.style(div,"top",(_30d.minY*this.zoom-sur)+"px");dojo.style(div,"width",(_30d.width()*this.zoom+2*sur)+"px");dojo.style(div,"height",(_30d.height()*this.zoom+2*sur)+"px");this._highlighter.drawNodeHighlight(this,div,_30d);return div;}}return null;},_highlightEdge:function(id){if(null!=this._highlighter){var pts=this._hitTest.getControlPoints(id);if(pts!=null){var div=dojo.doc.createElement("div");for(var i=0;i<pts.length;i++){this._highlighter.drawEdgeHighlight(this,div,i,pts);}return div;}}return null;}});}if(!dojo._hasResource["yfiles.client.tiles.InputMode"]){dojo._hasResource["yfiles.client.tiles.InputMode"]=true;dojo.provide("yfiles.client.tiles.InputMode");dojo.declare("yfiles.client.tiles.InputMode",null,{_canvas:null,_hitTest:null,_active:false,_child:null,_oldCursor:null,_childDeactivateHandle:null,constructor:function(_30e){this._active=false;this._child=null;this._canvas=_30e;this._oldCursor=_30e.domNode.style.cursor;this._hitTest=this._canvas.getHitTest();},isActive:function(){return this._active||(this._child&&this._child.isActive());},activate:function(){if(!this._active){if(this._child&&this._child.isActive()){this._child.deactivate();}else{this._child=null;this._active=true;this._attachEventListeners();}}},deactivate:function(){if(this._child){this._child.deactivate();}this._active=false;this._detachEventListeners();},getGraph:function(){return this._canvas.getGraph();},setCursor:function(_30f,_310){if(!_310&&!this._oldCursor){this._oldCursor=this._canvas.domNode.style.cursor;}else{if(_310){this._oldCursor=_310;}}this._canvas.domNode.style.cursor=_30f;},restoreCursor:function(){this._canvas.domNode.style.cursor=this._oldCursor;},setChild:function(_311){if(!this._active){return false;}this._child=_311;this._childDeactivateHandle=dojo.connect(this._child,"deactivate",this,"_reactivate");this._detachEventListeners();this._active=false;_311.activate();return true;},onReactivate:function(_312){},setEdgeTestSensitivity:function(_313){this._hitTest.setEdgeTestSensitivity(_313);},_attachEventListeners:function(){},_detachEventListeners:function(){},_reactivate:function(){dojo.disconnect(this._childDeactivateHandle);var _314=this._child;this._child=null;this._active=true;this._attachEventListeners();this.onReactivate(_314);}});}if(!dojo._hasResource["dojox.gfx.matrix"]){dojo._hasResource["dojox.gfx.matrix"]=true;dojo.provide("dojox.gfx.matrix");(function(){var m=dojox.gfx.matrix;var _315={};m._degToRad=function(_316){return _315[_316]||(_315[_316]=(Math.PI*_316/180));};m._radToDeg=function(_317){return _317/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _318=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_318,r=dojox.gfx.matrix.normalize(arg[i]);_318=new m.Matrix2D();_318.xx=l.xx*r.xx+l.xy*r.yx;_318.xy=l.xx*r.xy+l.xy*r.yy;_318.yx=l.yx*r.xx+l.yy*r.yx;_318.yy=l.yx*r.xy+l.yy*r.yy;_318.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_318.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}dojo.mixin(this,_318);}}else{dojo.mixin(this,arg);}}}};dojo.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});dojo.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_319){var c=Math.cos(_319);var s=Math.sin(_319);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_31a){return m.rotate(m._degToRad(_31a));},skewX:function(_31b){return new m.Matrix2D({xy:Math.tan(_31b)});},skewXg:function(_31c){return m.skewX(m._degToRad(_31c));},skewY:function(_31d){return new m.Matrix2D({yx:Math.tan(_31d)});},skewYg:function(_31e){return m.skewY(m._degToRad(_31e));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_31f){return (_31f instanceof m.Matrix2D)?_31f:new m.Matrix2D(_31f);},clone:function(_320){var obj=new m.Matrix2D();for(var i in _320){if(typeof (_320[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_320[i]){obj[i]=_320[i];}}return obj;},invert:function(_321){var M=m.normalize(_321),D=M.xx*M.yy-M.xy*M.yx,M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_322,x,y){return {x:_322.xx*x+_322.xy*y+_322.dx,y:_322.yx*x+_322.yy*y+_322.dy};},multiplyPoint:function(_323,a,b){var M=m.normalize(_323);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiply:function(_324){var M=m.normalize(_324);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_325,x,y){return m.multiply(m.translate(x,y),_325,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_326,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_326),a,b);}return m._sandwich(m.rotate(_326),a.x,a.y);},rotategAt:function(_327,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_327),a,b);}return m._sandwich(m.rotateg(_327),a.x,a.y);},skewXAt:function(_328,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_328),a,b);}return m._sandwich(m.skewX(_328),a.x,a.y);},skewXgAt:function(_329,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_329),a,b);}return m._sandwich(m.skewXg(_329),a.x,a.y);},skewYAt:function(_32a,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_32a),a,b);}return m._sandwich(m.skewY(_32a),a.x,a.y);},skewYgAt:function(_32b,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_32b),a,b);}return m._sandwich(m.skewYg(_32b),a.x,a.y);}});})();dojox.gfx.Matrix2D=dojox.gfx.matrix.Matrix2D;}if(!dojo._hasResource["dojox.gfx._base"]){dojo._hasResource["dojox.gfx._base"]=true;dojo.provide("dojox.gfx._base");(function(){var g=dojox.gfx,b=g._base;g._hasClass=function(node,_32c){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_32c+" ")>=0;};g._addClass=function(node,_32d){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_32d+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_32d);}};g._removeClass=function(node,_32e){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_32e+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _32f={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var s=div.style;s.position="absolute";s.left="-100px";s.top="0px";s.width="30px";s.height="1000em";s.border="0px";s.margin="0px";s.padding="0px";s.outline="none";s.lineHeight="1";s.overflow="hidden";dojo.body().appendChild(div);for(var p in _32f){div.style.fontSize=p;_32f[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _32f;};var _330=null;b._getCachedFontMeasurements=function(_331){if(_331||!_330){_330=b._getFontMeasurements();}return _330;};var _332=null,_333={};b._getTextBox=function(text,_334,_335){var m,s,al=arguments.length;if(!_332){m=_332=dojo.doc.createElement("div");s=m.style;s.position="absolute";s.left="-10000px";s.top="0";dojo.body().appendChild(m);}else{m=_332;s=m.style;}m.className="";s.border="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_334){for(var i in _334){if(i in _333){continue;}s[i]=_334[i];}}if(al>2&&_335){m.className=_335;}m.innerHTML=text;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return dojo.marginBox(m);}};var _336=0;b._getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++_336);}while(dojo.byId(id));return id;};})();dojo.mixin(dojox.gfx,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _337={};return function(type){var t=_337[type];if(t){return new t();}t=_337[type]=new Function;t.prototype=dojox.gfx["default"+type];return new t();};})(),normalizeColor:function(_338){return (_338 instanceof dojo.Color)?_338:new dojo.Color(_338);},normalizeParameters:function(_339,_33a){if(_33a){var _33b={};for(var x in _339){if(x in _33a&&!(x in _33b)){_339[x]=_33a[x];}}}return _339;},makeParameters:function(_33c,_33d){if(!_33d){return dojo.delegate(_33c);}var _33e={};for(var i in _33c){if(!(i in _33e)){_33e[i]=dojo.clone((i in _33d)?_33d[i]:_33c[i]);}}return _33e;},formatNumber:function(x,_33f){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _340=val.indexOf(".");if(_340>=0&&val.length-_340>5){val=x.toFixed(4);}}if(x<0){return val;}return _33f?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=dojox.gfx.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return dojox.gfx._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*dojox.gfx.px_in_pt();},px2pt:function(len){return len/dojox.gfx.px_in_pt();},normalizedLength:function(len){if(len.length==0){return 0;}if(len.length>2){var _341=dojox.gfx.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_341;case "in":return val*72*_341;case "pc":return val*12*_341;case "mm":return val*dojox.gfx.mm_in_pt*_341;case "cm":return val*dojox.gfx.cm_in_pt*_341;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a==b;}});}if(!dojo._hasResource["dojox.gfx"]){dojo._hasResource["dojox.gfx"]=true;dojo.provide("dojox.gfx");dojo.loadInit(function(){var gfx=dojo.getObject("dojox.gfx",true),sl,flag,_342;if(!gfx.renderer){if(dojo.config.forceGfxRenderer){dojox.gfx.renderer=dojo.config.forceGfxRenderer;return;}var _343=(typeof dojo.config.gfxRenderer=="string"?dojo.config.gfxRenderer:"svg,vml,silverlight,canvas").split(",");var ua=navigator.userAgent,_344=0,_345=0;if(dojo.isSafari>=3){if(ua.indexOf("iPhone")>=0||ua.indexOf("iPod")>=0){_342=ua.match(/Version\/(\d(\.\d)?(\.\d)?)\sMobile\/([^\s]*)\s?/);if(_342){_344=parseInt(_342[4].substr(0,3),16);}}}if(dojo.isWebKit){if(!_344){_342=ua.match(/Android\s+(\d+\.\d+)/);if(_342){_345=parseFloat(_342[1]);}}}for(var i=0;i<_343.length;++i){switch(_343[i]){case "svg":if(!dojo.isIE&&(!_344||_344>=1521)&&!_345&&!dojo.isAIR){dojox.gfx.renderer="svg";}break;case "vml":if(dojo.isIE){dojox.gfx.renderer="vml";}break;case "silverlight":try{if(dojo.isIE){sl=new ActiveXObject("AgControl.AgControl");if(sl&&sl.IsVersionSupported("1.0")){flag=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){flag=true;}}}catch(e){flag=false;}finally{sl=null;}if(flag){dojox.gfx.renderer="silverlight";}break;case "canvas":if(!dojo.isIE){dojox.gfx.renderer="canvas";}break;}if(dojox.gfx.renderer){break;}}if(dojo.config.isDebug){console.log("gfx renderer = "+dojox.gfx.renderer);}}});dojo.requireIf(dojox.gfx.renderer=="svg","dojox.gfx.svg");dojo.requireIf(dojox.gfx.renderer=="vml","dojox.gfx.vml");dojo.requireIf(dojox.gfx.renderer=="silverlight","dojox.gfx.silverlight");dojo.requireIf(dojox.gfx.renderer=="canvas","dojox.gfx.canvas");}if(!dojo._hasResource["yfiles.client.tiles.widget.CanvasDragLine"]){dojo._hasResource["yfiles.client.tiles.widget.CanvasDragLine"]=true;dojo.provide("yfiles.client.tiles.widget.CanvasDragLine");dojo.declare("yfiles.client.tiles.widget.CanvasDragLine",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"root\" class=\"canvasDragLineRoot\" style=\"overflow:hidden;width:100%;height:100%;\"></div>",root:null,canvas:null,_x1:0,_y1:0,_x2:0,_y2:0,_surface:null,_line:null,_mouseDownHandle:null,_dragLineHandle:null,_lineDoneHandle:null,activate:function(_346){this.canvas=_346;this._mouseDownHandle=this.connect(_346,"onMouseDown","_onMouseDown");},activateAt:function(_347,pos){this.canvas=_347;this._onMouseDownAt(pos);},deactivate:function(){this._hideArea();},onLineChange:function(x1,y1,x2,y2){},onLineDone:function(x1,y1,x2,y2){},onDeactivated:function(){},_onMouseDown:function(evt){var _348=this.canvas;this.disconnect(this._mouseDownHandle);var _349={x:evt.pageX,y:evt.pageY};this._onMouseDownAt(_349);},_onMouseDownAt:function(_34a){var _34b=this.canvas;var _34c=dojo.coords(this.root.parentNode,false);this._x1=_34a.x-_34c.x;this._y1=_34a.y-_34c.y;var _34d=this.root;this._surface=dojox.gfx.createSurface(_34d,_34b.width,_34b.height);this._line=this._surface.createLine({x1:this._x1,y1:this._y1,x2:this._x1+1,y2:this._y1+1});this._line.setStroke({color:"blue"});this._dragLineHandle=this.connect(_34b,"onMouseMove","_dragLine");this._lineDoneHandle=this.connect(_34b,"onMouseUp","_dragLineDone");},_dragLine:function(evt){var _34e={x:evt.pageX,y:evt.pageY};var _34f=dojo.coords(this.root.parentNode,false);this._x2=_34e.x-_34f.x;this._y2=_34e.y-_34f.y;this._line.setShape({x1:this._x1,y1:this._y1,x2:this._x2,y2:this._y2});this.onLineChange(this._x1,this._y1,this._x2,this._y2);},_dragLineDone:function(){var _350=this.canvas;var x1=this._x1-_350.x;var x2=this._x2-_350.x;var y1=this._y1-_350.y;var y2=this._y2-_350.y;this.onLineDone(x1,y1,x2,y2);this._hideArea();},_hideArea:function(){var _351=this.canvas;this.disconnect(this._mouseDownHandle);this.disconnect(this._dragLineHandle);this.disconnect(this._lineDoneHandle);if(this._surface){this._surface.remove(this._line,true);if(this._surface.clipNode){this.root.removeChild(this._surface.clipNode);}else{this.root.removeChild(this._surface.rawNode);}this._surface=null;}this.onDeactivated();}});}if(!dojo._hasResource["yfiles.client.tiles.CreateEdgeMode"]){dojo._hasResource["yfiles.client.tiles.CreateEdgeMode"]=true;dojo.provide("yfiles.client.tiles.CreateEdgeMode");dojo.declare("yfiles.client.tiles.CreateEdgeMode",yfiles.client.tiles.InputMode,{startNode:null,routeEdges:false,_dragLine:null,_endNode:null,constructor:function(_352,_353){if(_353){this.routeEdges=_353;}},activate:function(){this.inherited(arguments);if(!this.startNode||!this.acceptSourceNode(this.startNode)){this.cancelEdgeCreation();}else{this._startCreateEdge(this.startNode);}},deactivate:function(){this.startNode=null;this.setTargetNode(null);if(this._dragLine!=null){this._dragLine.deactivate();this._canvas.containerNode.removeChild(this._dragLine.domNode);this._dragLine=null;}this.inherited(arguments);},cancelEdgeCreation:function(){this.deactivate();},acceptSourceNode:function(_354){return (this.startNode!=null);},acceptTargetNode:function(_355){return true;},setTargetNode:function(_356){this._endNode=_356;},createEdge:function(_357,_358,_359){if(_358&&_359){_357.createEdge(_358,_359,this.routeEdges);}},_attachEventListeners:function(){this._mouseOverHandle=dojo.connect(this._canvas,"onMouseOverNode",this,"_onMouseOverNode");this._mouseOutHandle=dojo.connect(this._canvas,"onMouseOutNode",this,"_onMouseOutNode");this._mouseOverLabelHandle=dojo.connect(this._canvas,"onMouseOverNodeLabel",this,"_onMouseOverNodeLabel");this._mouseOutLabelHandle=dojo.connect(this._canvas,"onMouseOutNodeLabel",this,"_onMouseOutNodeLabel");},_detachEventListeners:function(){dojo.disconnect(this._mouseOverHandle);dojo.disconnect(this._mouseOutHandle);dojo.disconnect(this._mouseOverLabelHandle);dojo.disconnect(this._mouseOutLabelHandle);dojo.disconnect(this._lineDoneHandle);},_onMouseOverNode:function(_35a){if(this.acceptTargetNode(_35a)){this.setTargetNode(_35a);}},_onMouseOutNode:function(_35b){this.setTargetNode(null);},_onMouseOverNodeLabel:function(_35c){var _35d=this._canvas.getHitTest().getLabelInfo(_35c);if(_35d){var _35e=_35d.mainElementId;if(this.acceptTargetNode(_35e)){this.setTargetNode(_35e);}}},_onMouseOutNodeLabel:function(_35f){this.setTargetNode(null);},_startCreateEdge:function(_360){var _361=this._canvas.getMousePosition();var _362=dojo.coords(this._canvas.domNode,false);_361.x+=_362.x;_361.y+=_362.y;if(this._dragLine==null){this._dragLine=new yfiles.client.tiles.widget.CanvasDragLine({canvas:this._canvas});this._canvas.containerNode.appendChild(this._dragLine.domNode);}this._dragLine.activateAt(this._canvas,_361);this._lineDoneHandle=dojo.connect(this._dragLine,"onLineDone",this,"_finishCreateEdge");},_finishCreateEdge:function(x1,y1,x2,y2){dojo.disconnect(this._lineDoneHandle);var _363=this._canvas;var _364=_363.getGraph();this.createEdge(_364,this.startNode,this._endNode);this.startNode=null;this.setTargetNode(null);this.deactivate();}});}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(node,_365){this.node=dojo.byId(node);if(!_365){_365={};}this.handle=_365.handle?dojo.byId(_365.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_365.delay>0?_365.delay:0;this.skip=_365.skip;this.mover=_365.mover?_365.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(_366,node){return new dojo.dnd.Moveable(node,_366);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dojo.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}dojo.stopEvent(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}dojo.stopEvent(e);},onMouseUp:function(e){for(var i=0;i<2;++i){dojo.disconnect(this.events.pop());}dojo.stopEvent(e);},onSelectStart:function(e){if(!this.skip||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_367){dojo.publish("/dnd/move/start",[_367]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem");},onMoveStop:function(_368){dojo.publish("/dnd/move/stop",[_368]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(_369){},onMove:function(_36a,_36b){this.onMoving(_36a,_36b);var s=_36a.node.style;s.left=_36b.l+"px";s.top=_36b.t+"px";this.onMoved(_36a,_36b);},onMoving:function(_36c,_36d){},onMoved:function(_36e,_36f){}});}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(_370,node){return new dojo.dnd.move.constrainedMoveable(node,_370);},constructor:function(node,_371){if(!_371){_371={};}this.constraints=_371.constraints;this.within=_371.within;},onFirstMove:function(_372){var c=this.constraintBox=this.constraints.call(this,_372);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=dojo.marginBox(_372.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_373,_374){var c=this.constraintBox,s=_373.node.style;s.left=(_374.l<c.l?c.l:c.r<_374.l?c.r:_374.l)+"px";s.top=(_374.t<c.t?c.t:c.b<_374.t?c.b:_374.t)+"px";}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(_375,node){return new dojo.dnd.move.boxConstrainedMoveable(node,_375);},constructor:function(node,_376){var box=_376&&_376.box;this.constraints=function(){return box;};}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(_377,node){return new dojo.dnd.move.parentConstrainedMoveable(node,_377);},constructor:function(node,_378){var area=_378&&_378.area;this.constraints=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});dojo.dnd.move.constrainedMover=function(fun,_379){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var _37a=function(node,e,_37b){dojo.dnd.Mover.call(this,node,e,_37b);};dojo.extend(_37a,dojo.dnd.Mover.prototype);dojo.extend(_37a,{onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox,c=this.constraintBox,l=m.l+e.pageX,t=m.t+e.pageY;l=l<c.l?c.l:c.r<l?c.r:l;t=t<c.t?c.t:c.b<t?c.b:t;this.host.onMove(this,{l:l,t:t});},onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var c=this.constraintBox=fun.call(this);c.r=c.l+c.w;c.b=c.t+c.h;if(_379){var mb=dojo.marginBox(this.node);c.r-=mb.w;c.b-=mb.h;}}});return _37a;};dojo.dnd.move.boxConstrainedMover=function(box,_37c){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return box;},_37c);};dojo.dnd.move.parentConstrainedMover=function(area,_37d){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");var fun=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};return dojo.dnd.move.constrainedMover(fun,_37d);};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover;}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var _37e=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(node,_37f){if(!_37f){_37f={};}if(_37f.timeout&&typeof _37f.timeout=="number"&&_37f.timeout>=0){this.timeout=_37f.timeout;}},markupFactory:function(_380,node){return new dojo.dnd.TimedMoveable(node,_380);},onMoveStop:function(_381){if(_381._timer){clearTimeout(_381._timer);_37e.call(this,_381,_381._leftTop);}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments);},onMove:function(_382,_383){_382._leftTop=_383;if(!_382._timer){var _384=this;_382._timer=setTimeout(function(){_382._timer=null;_37e.call(_384,_382,_382._leftTop);},this.timeout);}}});})();}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _385=this;dojo.mixin(_385,args);_385.node=args.node;_385._showArgs=dojo.mixin({},args);_385._showArgs.node=_385.node;_385._showArgs.duration=_385.showDuration;_385.showAnim=_385.showFunc(_385._showArgs);_385._hideArgs=dojo.mixin({},args);_385._hideArgs.node=_385.node;_385._hideArgs.duration=_385.hideDuration;_385.hideAnim=_385.hideFunc(_385._hideArgs);dojo.connect(_385.showAnim,"beforeBegin",dojo.hitch(_385.hideAnim,"stop",true));dojo.connect(_385.hideAnim,"beforeBegin",dojo.hitch(_385.showAnim,"stop",true));},show:function(_386){return this.showAnim.play(_386||0);},hide:function(_387){return this.hideAnim.play(_387||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_388={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _389=function(_38a){this._index=-1;this._animations=_38a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_389,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_38b,_38c){if(!this._current){this._current=this._animations[this._index=0];}if(!_38c&&this._current.status()=="playing"){return this;}var _38d=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_38e=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_38f=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_38d);d.disconnect(_38e);d.disconnect(_38f);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_390,_391){this.pause();var _392=this.duration*_390;this._current=null;d.some(this._animations,function(a){if(a.duration<=_392){this._current=a;return true;}_392-=a.duration;return false;});if(this._current){this._current.gotoPercent(_392/this._current.duration,_391);}return this;},stop:function(_393){if(this._current){if(_393){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_389,_388);dojo.fx.chain=function(_394){return new _389(_394);};var _395=function(_396){this._animations=_396||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_396,function(a){var _397=a.duration;if(a.delay){_397+=a.delay;}if(this.duration<_397){this.duration=_397;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_395,{_doAction:function(_398,args){d.forEach(this._animations,function(a){a[_398].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_399,args){var t=this._pseudoAnimation;t[_399].apply(t,args);},play:function(_39a,_39b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_39c,_39d){var ms=this.duration*_39c;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_39d);});this._call("gotoPercent",arguments);return this;},stop:function(_39e){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_395,_388);dojo.fx.combine=function(_39f){return new _395(_39f);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _3a0=d.style(node,"height");return Math.max(_3a0,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{reset:function(){dojo.forEach(this.getDescendants(),function(_3a1){if(_3a1.reset){_3a1.reset();}});},validate:function(){var _3a2=false;return dojo.every(dojo.map(this.getDescendants(),function(_3a3){_3a3._hasBeenBlurred=true;var _3a4=_3a3.disabled||!_3a3.validate||_3a3.validate();if(!_3a4&&!_3a2){dijit.scrollIntoView(_3a3.containerNode||_3a3.domNode);_3a3.focus();_3a2=true;}return _3a4;}),function(item){return item;});},setValues:function(val){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use attr('value', val) instead.","","2.0");return this.attr("value",val);},_setValueAttr:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_3a5){if(!_3a5.name){return;}var _3a6=map[_3a5.name]||(map[_3a5.name]=[]);_3a6.push(_3a5);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _3a7=map[name],_3a8=dojo.getObject(name,false,obj);if(_3a8===undefined){continue;}if(!dojo.isArray(_3a8)){_3a8=[_3a8];}if(typeof _3a7[0].checked=="boolean"){dojo.forEach(_3a7,function(w,i){w.attr("value",dojo.indexOf(_3a8,w.value)!=-1);});}else{if(_3a7[0].multiple){_3a7[0].attr("value",_3a8);}else{dojo.forEach(_3a7,function(w,i){w.attr("value",_3a8[i]);});}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");},_getValueAttr:function(){var obj={};dojo.forEach(this.getDescendants(),function(_3a9){var name=_3a9.name;if(!name||_3a9.disabled){return;}var _3aa=_3a9.attr("value");if(typeof _3a9.checked=="boolean"){if(/Radio/.test(_3a9.declaredClass)){if(_3aa!==false){dojo.setObject(name,_3aa,obj);}else{_3aa=dojo.getObject(name,false,obj);if(_3aa===undefined){dojo.setObject(name,null,obj);}}}else{var ary=dojo.getObject(name,false,obj);if(!ary){ary=[];dojo.setObject(name,ary,obj);}if(_3aa!==false){ary.push(_3aa);}}}else{var prev=dojo.getObject(name,false,obj);if(typeof prev!="undefined"){if(dojo.isArray(prev)){prev.push(_3aa);}else{dojo.setObject(name,[prev,_3aa],obj);}}else{dojo.setObject(name,_3aa,obj);}}});return obj;},isValid:function(){this._invalidWidgets=dojo.filter(this.getDescendants(),function(_3ab){return !_3ab.disabled&&_3ab.isValid&&!_3ab.isValid();});return !this._invalidWidgets.length;},onValidStateChange:function(_3ac){},_widgetChange:function(_3ad){var _3ae=this._lastValidState;if(!_3ad||this._lastValidState===undefined){_3ae=this.isValid();if(this._lastValidState===undefined){this._lastValidState=_3ae;}}else{if(_3ad.isValid){this._invalidWidgets=dojo.filter(this._invalidWidgets||[],function(w){return (w!=_3ad);},this);if(!_3ad.isValid()&&!_3ad.attr("disabled")){this._invalidWidgets.push(_3ad);}_3ae=(this._invalidWidgets.length===0);}}if(_3ae!==this._lastValidState){this._lastValidState=_3ae;this.onValidStateChange(_3ae);}},connectChildren:function(){dojo.forEach(this._changeConnections,dojo.hitch(this,"disconnect"));var _3af=this;var _3b0=this._changeConnections=[];dojo.forEach(dojo.filter(this.getDescendants(),function(item){return item.validate;}),function(_3b1){_3b0.push(_3af.connect(_3b1,"validate",dojo.hitch(_3af,"_widgetChange",_3b1)));_3b0.push(_3af.connect(_3b1,"_setDisabledAttr",dojo.hitch(_3af,"_widgetChange",_3b1)));});this._widgetChange(null);},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren();}});}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(_3b2){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.attr("value"));},_getFocusItems:function(_3b3){var _3b4=dijit._getTabNavigable(dojo.byId(_3b3));this._firstFocusItem=_3b4.lowest||_3b4.first||_3b3;this._lastFocusItem=_3b4.last||_3b4.highest||this._firstFocusItem;if(dojo.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&dojo.getNodeProp(this._firstFocusItem,"type").toLowerCase()=="file"){dojo.attr(_3b3,"tabIndex","0");this._firstFocusItem=_3b3;}}});}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(id){dojo.attr(this.node,"id",id+"_underlay");},_setClassAttr:function(_3b5){this.node.className="dijitDialogUnderlay "+_3b5;},postCreate:function(){dojo.body().appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _3b6=dijit.getViewport();os.top=_3b6.t+"px";os.left=_3b6.l+"px";is.width=_3b6.w+"px";is.height=_3b6.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode);},hide:function(){this.bgIframe.destroy();this.domNode.style.display="none";},uninitialize:function(){if(this.bgIframe){this.bgIframe.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var _3b7=dijit.getEnclosingWidget(this.domNode.parentNode);return _3b7&&_3b7.isContainer?_3b7:null;},_getSibling:function(_3b8){var node=this.domNode;do{node=node[_3b8+"Sibling"];}while(node&&node.nodeType!=1);return node&&dijit.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_3b9,_3ba){var _3bb=this.containerNode;if(_3ba&&typeof _3ba=="number"){var _3bc=this.getChildren();if(_3bc&&_3bc.length>=_3ba){_3bb=_3bc[_3ba-1].domNode;_3ba="after";}}dojo.place(_3b9.domNode,_3bb,_3ba);if(this._started&&!_3b9._started){_3b9.startup();}},removeChild:function(_3bd){if(typeof _3bd=="number"&&_3bd>0){_3bd=this.getChildren()[_3bd];}if(_3bd&&_3bd.domNode){var node=_3bd.domNode;node.parentNode.removeChild(node);}},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode).map(dijit.byNode);},hasChildren:function(){return dojo.query("> [widgetId]",this.containerNode).length>0;},destroyDescendants:function(_3be){dojo.forEach(this.getChildren(),function(_3bf){_3bf.destroyRecursive(_3be);});},_getSiblingOfChild:function(_3c0,dir){var node=_3c0.domNode,_3c1=(dir>0?"nextSibling":"previousSibling");do{node=node[_3c1];}while(node&&(node.nodeType!=1||!dijit.byNode(node)));return node&&dijit.byNode(node);},getIndexOfChild:function(_3c2){return dojo.indexOf(this.getChildren(),_3c2);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_3c3){_3c3.startup();});this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");dojo.addClass(this.domNode,this.baseClass);this.inherited(arguments);},startup:function(){if(this._started){return;}this.inherited(arguments);var _3c4=this.getParent&&this.getParent();if(!(_3c4&&_3c4.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize();});}},resize:function(_3c5,_3c6){var node=this.domNode;if(_3c5){dojo.marginBox(node,_3c5);if(_3c5.t){node.style.top=_3c5.t+"px";}if(_3c5.l){node.style.left=_3c5.l+"px";}}var mb=_3c6||{};dojo.mixin(mb,_3c5||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(node),mb);}var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var be=dojo._getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=dojo._getPadExtents(node,cs);this._contentBox={l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_3c7){dojo.addClass(_3c7.domNode,this.baseClass+"-child");if(_3c7.baseClass){dojo.addClass(_3c7.domNode,this.baseClass+"-"+_3c7.baseClass);}},addChild:function(_3c8,_3c9){this.inherited(arguments);if(this._started){this._setupChild(_3c8);}},removeChild:function(_3ca){dojo.removeClass(_3ca.domNode,this.baseClass+"-child");if(_3ca.baseClass){dojo.removeClass(_3ca.domNode,this.baseClass+"-"+_3ca.baseClass);}this.inherited(arguments);}});dijit.layout.marginBox2contentBox=function(node,mb){var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var pb=dojo._getPadBorderExtents(node,cs);return {l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};(function(){var _3cb=function(word){return word.substring(0,1).toUpperCase()+word.substring(1);};var size=function(_3cc,dim){_3cc.resize?_3cc.resize(dim):dojo.marginBox(_3cc.domNode,dim);dojo.mixin(_3cc,dojo.marginBox(_3cc.domNode));dojo.mixin(_3cc,dim);};dijit.layout.layoutChildren=function(_3cd,dim,_3ce){dim=dojo.mixin({},dim);dojo.addClass(_3cd,"dijitLayoutContainer");_3ce=dojo.filter(_3ce,function(item){return item.layoutAlign!="client";}).concat(dojo.filter(_3ce,function(item){return item.layoutAlign=="client";}));dojo.forEach(_3ce,function(_3cf){var elm=_3cf.domNode,pos=_3cf.layoutAlign;var _3d0=elm.style;_3d0.left=dim.l+"px";_3d0.top=dim.t+"px";_3d0.bottom=_3d0.right="auto";dojo.addClass(elm,"dijitAlign"+_3cb(pos));if(pos=="top"||pos=="bottom"){size(_3cf,{w:dim.w});dim.h-=_3cf.h;if(pos=="top"){dim.t+=_3cf.h;}else{_3d0.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){size(_3cf,{h:dim.h});dim.w-=_3cf.w;if(pos=="left"){dim.l+=_3cf.w;}else{_3d0.left=dim.l+dim.w+"px";}}else{if(pos=="client"){size(_3cf,dim);}}}});};})();}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var _3d1=0,d=dojo;dojo.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont){d.empty(node);if(cont){if(typeof cont=="string"){cont=d._toDom(cont,node.ownerDocument);}if(!cont.nodeType&&d.isArrayLike(cont)){for(var _3d2=cont.length,i=0;i<cont.length;i=_3d2==cont.length?i+1:0){d.place(cont[i],node,"last");}}else{d.place(cont,node,"last");}}return node;};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(_3d3,node){dojo.mixin(this,_3d3||{});node=this.node=dojo.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_3d1++].join("_");}if(!(this.node||node)){new Error(this.declaredClass+": no node provided to "+this.id);}},set:function(cont,_3d4){if(undefined!==cont){this.content=cont;}if(_3d4){this._mixin(_3d4);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){console.error("setContent given no node");}try{node=dojo.html._setNodeContent(node,this.content);}catch(e){var _3d5=this.onContentError(e);try{node.innerHTML=_3d5;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}dojo.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent){cont=dojo.html._secureForInnerHtml(cont);}if(this.extractContent){var _3d6=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_3d6){cont=_3d6[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_3d7){var _3d8={},key;for(key in _3d7){if(key in _3d8){continue;}this[key]=_3d7[key];}},_parse:function(){var _3d9=this.node;try{this.parseResults=dojo.parser.parse(_3d9,true);}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_3da){var _3db=this["on"+type+"Error"].call(this,err);if(_3da){console.error(_3da,err);}else{if(_3db){dojo.html._setNodeContent(this.node,_3db,true);}}}});dojo.html.set=function(node,cont,_3dc){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_3dc){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojo.html._ContentSetter(dojo.mixin(_3dc,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(_3dd,_3de,_3df){_3df=dojo.i18n.normalizeLocale(_3df);var _3e0=_3df.split("-");var _3e1=[_3dd,"nls",_3de].join(".");var _3e2=dojo._loadedModules[_3e1];if(_3e2){var _3e3;for(var i=_3e0.length;i>0;i--){var loc=_3e0.slice(0,i).join("_");if(_3e2[loc]){_3e3=_3e2[loc];break;}}if(!_3e3){_3e3=_3e2.ROOT;}if(_3e3){var _3e4=function(){};_3e4.prototype=_3e3;return new _3e4();}}throw new Error("Bundle not found: "+_3de+" in "+_3dd+" , locale="+_3df);};dojo.i18n.normalizeLocale=function(_3e5){var _3e6=_3e5?_3e5.toLowerCase():dojo.locale;if(_3e6=="root"){_3e6="ROOT";}return _3e6;};dojo.i18n._requireLocalization=function(_3e7,_3e8,_3e9,_3ea){var _3eb=dojo.i18n.normalizeLocale(_3e9);var _3ec=[_3e7,"nls",_3e8].join(".");var _3ed="";if(_3ea){var _3ee=_3ea.split(",");for(var i=0;i<_3ee.length;i++){if(_3eb["indexOf"](_3ee[i])==0){if(_3ee[i].length>_3ed.length){_3ed=_3ee[i];}}}if(!_3ed){_3ed="ROOT";}}var _3ef=_3ea?_3ed:_3eb;var _3f0=dojo._loadedModules[_3ec];var _3f1=null;if(_3f0){if(dojo.config.localizationComplete&&_3f0._built){return;}var _3f2=_3ef.replace(/-/g,"_");var _3f3=_3ec+"."+_3f2;_3f1=dojo._loadedModules[_3f3];}if(!_3f1){_3f0=dojo["provide"](_3ec);var syms=dojo._getModuleSymbols(_3e7);var _3f4=syms.concat("nls").join("/");var _3f5;dojo.i18n._searchLocalePath(_3ef,_3ea,function(loc){var _3f6=loc.replace(/-/g,"_");var _3f7=_3ec+"."+_3f6;var _3f8=false;if(!dojo._loadedModules[_3f7]){dojo["provide"](_3f7);var _3f9=[_3f4];if(loc!="ROOT"){_3f9.push(loc);}_3f9.push(_3e8);var _3fa=_3f9.join("/")+".js";_3f8=dojo._loadPath(_3fa,null,function(hash){var _3fb=function(){};_3fb.prototype=_3f5;_3f0[_3f6]=new _3fb();for(var j in hash){_3f0[_3f6][j]=hash[j];}});}else{_3f8=true;}if(_3f8&&_3f0[_3f6]){_3f5=_3f0[_3f6];}else{_3f0[_3f6]=_3f5;}if(_3ea){return true;}});}if(_3ea&&_3eb!=_3ed){_3f0[_3eb.replace(/-/g,"_")]=_3f0[_3ed.replace(/-/g,"_")];}};(function(){var _3fc=dojo.config.extraLocale;if(_3fc){if(!_3fc instanceof Array){_3fc=[_3fc];}var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,_3fd,_3fe){req(m,b,_3fd,_3fe);if(_3fd){return;}for(var i=0;i<_3fc.length;i++){req(m,b,_3fc[i],_3fe);}};}})();dojo.i18n._searchLocalePath=function(_3ff,down,_400){_3ff=dojo.i18n.normalizeLocale(_3ff);var _401=_3ff.split("-");var _402=[];for(var i=_401.length;i>0;i--){_402.push(_401.slice(0,i).join("-"));}_402.push(false);if(down){_402.reverse();}for(var j=_402.length-1;j>=0;j--){var loc=_402[j]||"ROOT";var stop=_400(loc);if(stop){break;}}};dojo.i18n._preloadLocalizations=function(_403,_404){function _405(_406){_406=dojo.i18n.normalizeLocale(_406);dojo.i18n._searchLocalePath(_406,true,function(loc){for(var i=0;i<_404.length;i++){if(_404[i]==loc){dojo["require"](_403+"_"+loc);return true;}}return false;});};_405();var _407=dojo.config.extraLocale||[];for(var i=0;i<_407.length;i++){_405(_407[i]);}};}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,ioArgs:{},isContainer:true,isLayoutContainer:true,onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),postMixInProperties:function(){this.inherited(arguments);var _408=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_408);this.errorMessage=dojo.string.substitute(this.errorMessage,_408);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML){this.isLoaded=true;}},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},postCreate:function(){this.domNode.title="";if(!dojo.attr(this.domNode,"role")){dijit.setWaiRole(this.domNode,"group");}dojo.addClass(this.domNode,this.baseClass);},startup:function(){if(this._started){return;}var _409=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=_409&&_409.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;if(this.isLoaded){dojo.forEach(this.getChildren(),function(_40a){_40a.startup();});}if(this._isShown()||this.preload){this._onShow();}this.inherited(arguments);},_checkIfSingleChild:function(){var _40b=dojo.query("> *",this.containerNode).filter(function(node){return node.tagName!=="SCRIPT";}),_40c=_40b.filter(function(node){return dojo.hasAttr(node,"dojoType")||dojo.hasAttr(node,"widgetId");}),_40d=dojo.filter(_40c.map(dijit.byNode),function(_40e){return _40e&&_40e.domNode&&_40e.resize;});if(_40b.length==_40c.length&&_40d.length==1){this._singleChild=_40d[0];}else{delete this._singleChild;}dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},setHref:function(href){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use attr('href', ...) instead.","","2.0");return this.attr("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.href=href;if(this._created&&(this.preload||this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use attr('content', ...) instead.","","2.0");this.attr("content",data);},_setContentAttr:function(data){this.href="";this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},uninitialize:function(){if(this._beingDestroyed){this.cancel();}this.inherited(arguments);},destroyRecursive:function(_40f){if(this._beingDestroyed){return;}this.inherited(arguments);},resize:function(_410,_411){if(!this._wasShown){this._onShow();}this._resizeCalled=true;if(_410){dojo.marginBox(this.domNode,_410);}var cn=this.containerNode;if(cn===this.domNode){var mb=_411||{};dojo.mixin(mb,_410||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(cn),mb);}this._contentBox=dijit.layout.marginBox2contentBox(cn,mb);}else{this._contentBox=dojo.contentBox(cn);}this._layoutChildren();},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!dojo.hasClass(node,"dijitHidden");}}},_onShow:function(){if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){this.refresh();}}else{if(!this._childOfLayoutWidget&&this._needLayout){this._layoutChildren();}}this.inherited(arguments);this._wasShown=true;},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _412={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(_412,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_412));hand.addCallback(function(html){try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd();}catch(err){self._onError("Content",err);}delete self._xhrDfd;return html;});hand.addErrback(function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;});delete this._hrefChanged;},_onLoadHandler:function(data){this.isLoaded=true;try{this.onLoadDeferred.callback(data);this.onLoad(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler();}var _413=this._contentSetter;dojo.forEach(this.getChildren(),function(_414){if(_414.destroyRecursive){_414.destroyRecursive();}});if(_413){dojo.forEach(_413.parseResults,function(_415){if(_415.destroyRecursive&&_415.domNode&&_415.domNode.parentNode==dojo.body()){_415.destroyRecursive();}});delete _413.parseResults;}dojo.html._emptyNode(this.containerNode);delete this._singleChild;},_setContent:function(cont,_416){this.destroyDescendants();var _417=this._contentSetter;if(!(_417&&_417 instanceof dojo.html._ContentSetter)){_417=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _418=this.onContentError(e);try{this.containerNode.innerHTML=_418;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _419=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad},this._contentSetterParams||{});dojo.mixin(_417,_419);_417.set((dojo.isObject(cont)&&cont.domNode)?cont.domNode:cont);delete this._contentSetterParams;if(!_416){dojo.forEach(this.getChildren(),function(_41a){if(!this.parseOnLoad||_41a.getParent){_41a.startup();}},this);this._scheduleLayout();this._onLoadHandler(cont);}},_onError:function(type,err,_41b){this.onLoadDeferred.errback(err);var _41c=this["on"+type+"Error"].call(this,err);if(_41b){console.error(_41b,err);}else{if(_41c){this._setContent(_41c,true);}}},_scheduleLayout:function(){if(this._isShown()){this._layoutChildren();}else{this._needLayout=true;}},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{dojo.forEach(this.getChildren(),function(_41d){if(_41d.resize){_41d.resize();}});}delete this._needLayout;},onLoad:function(data){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(_41e){},onDownloadError:function(_41f){return this.errorMessage;},onDownloadEnd:function(){}});}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html","<div waiRole=\"presentation\">\n\t<div class=\"dijitTooltipContainer\" waiRole=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" tabindex=\"-1\" waiRole=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" waiRole=\"presentation\"></div>\n</div>\n"),postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title;},orient:function(node,_420,_421){var c=this._currentOrientClass;if(c){dojo.removeClass(this.domNode,c);}c="dijitTooltipAB"+(_421.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(_421.charAt(0)=="T"?"Below":"Above");dojo.addClass(this.domNode,c);this._currentOrientClass=c;},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._onShow();if(this.autofocus){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem);}},onClose:function(){this.onHide();},_onKey:function(evt){var node=evt.target;var dk=dojo.keys;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.containerNode);}var _422=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==dk.ESCAPE){setTimeout(dojo.hitch(this,"onCancel"),0);dojo.stopEvent(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_422){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_422){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{if(evt.charOrCode===dk.TAB){evt.stopPropagation();}}}}}});}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{templateString:dojo.cache("dijit","templates/Dialog.html","<div class=\"dijitDialog\" tabindex=\"-1\" waiRole=\"dialog\" waiState=\"labelledby-${id}_title\">\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"onclick: onCancel, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave\" title=\"${buttonCancel}\">\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var _423=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,_423);this.inherited(arguments);},postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){this._relativePosition=dojo.position(e.node);}},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(node,{handle:this.titleBar}):new dojo.dnd.Moveable(node,{handle:this.titleBar,timeout:0});dojo.subscribe("/dnd/move/stop",this,"_endDrag");}else{dojo.addClass(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")};this._fadeIn=dojo.fadeIn({node:node,duration:this.duration,beforeBegin:dojo.hitch(this,function(){var _424=dijit._underlay;if(!_424){_424=dijit._underlay=new dijit.DialogUnderlay(this.underlayAttrs);}else{_424.attr(this.underlayAttrs);}var _425=948+dijit._dialogStack.length*2;dojo.style(dijit._underlay.domNode,"zIndex",_425);dojo.style(this.domNode,"zIndex",_425+1);_424.show();}),onEnd:dojo.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}})});this._fadeOut=dojo.fadeOut({node:node,duration:this.duration,onEnd:dojo.hitch(this,function(){node.style.display="none";var ds=dijit._dialogStack;if(ds.length==0){dijit._underlay.hide();}else{dojo.style(dijit._underlay.domNode,"zIndex",948+ds.length*2);dijit._underlay.attr(ds[ds.length-1].underlayAttrs);}if(this.refocus){var _426=this._savedFocus;if(ds.length>0){var pd=ds[ds.length-1];if(!dojo.isDescendant(_426.node,pd.domNode)){pd._getFocusItems(pd.domNode);_426=pd._firstFocusItem;}}dijit.focus(_426);}})});},uninitialize:function(){var _427=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){_427=true;this._fadeIn.stop();}if(this._fadeOut&&this._fadeOut.status()=="playing"){_427=true;this._fadeOut.stop();}if(this.open||_427){dijit._underlay.hide();}if(this._moveable){this._moveable.destroy();}this.inherited(arguments);},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;}delete this._singleChildOriginalStyle;}else{dojo.style(this.containerNode,{width:"auto",height:"auto"});}var mb=dojo.marginBox(this.domNode);var _428=dijit.getViewport();if(mb.w>=_428.w||mb.h>=_428.h){var w=Math.min(mb.w,Math.floor(_428.w*0.75)),h=Math.min(mb.h,Math.floor(_428.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h});}else{dojo.style(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var node=this.domNode,_429=dijit.getViewport(),p=this._relativePosition,bb=p?null:dojo._getBorderBox(node),l=Math.floor(_429.l+(p?p.x:(_429.w-bb.w)/2)),t=Math.floor(_429.t+(p?p.y:(_429.h-bb.h)/2));dojo.style(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){var ds=dijit._dialogStack;if(ds[ds.length-1]!=this){return;}if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _42a=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_42a){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_42a){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOut.status()=="playing"){this._fadeOut.stop();}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var _42b=dijit.getViewport();if(!this._oldViewport||_42b.h!=this._oldViewport.h||_42b.w!=this._oldViewport.w){this.layout();this._oldViewport=_42b;}}));this._modalconnects.push(dojo.connect(dojo.doc.documentElement,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this.open=true;this._onShow();this._size();this._position();dijit._dialogStack.push(this);this._fadeIn.play();this._savedFocus=dijit.getFocus(this);},hide:function(){var ds=dijit._dialogStack;if(!this._alreadyInitialized||this!=ds[ds.length-1]){return;}if(this._fadeIn.status()=="playing"){this._fadeIn.stop();}ds.pop();this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false;}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this._relativePosition){delete this._relativePosition;}this.open=false;this.onHide();},layout:function(){if(this.domNode.style.display!="none"){if(dijit._underlay){dijit._underlay.layout();}this._position();}},destroy:function(){dojo.forEach(this._modalconnects,dojo.disconnect);if(this.refocus&&this.open){setTimeout(dojo.hitch(dijit,"focus",this._savedFocus),25);}this.inherited(arguments);},_onCloseEnter:function(){dojo.addClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");},_onCloseLeave:function(){dojo.removeClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._dialogStack=[];}if(!dojo._hasResource["yfiles.client.tiles.widget.PlaceableDialog"]){dojo._hasResource["yfiles.client.tiles.widget.PlaceableDialog"]=true;dojo.provide("yfiles.client.tiles.widget.PlaceableDialog");dojo.declare("yfiles.client.tiles.widget.PlaceableDialog",dijit.Dialog,{x:0,y:-100,_position:function(){var mb=dojo.marginBox(this.domNode);var _42c=dijit.getViewport();var _42d=this.x;var _42e=this.y;if(_42d+mb.width>_42c.w){_42d-=mb.width;}if(_42e<0){_42e=10;}with(this.domNode.style){left=_42d+"px";top=_42e+"px";}}});}if(!dojo._hasResource["yfiles.client.tiles.EditLabelMode"]){dojo._hasResource["yfiles.client.tiles.EditLabelMode"]=true;dojo.provide("yfiles.client.tiles.EditLabelMode");dojo.declare("yfiles.client.tiles.EditLabelMode",yfiles.client.tiles.InputMode,{_labelDialog:null,_labelText:null,_okButton:null,_cancelButton:null,nodeOrLabel:null,constructor:function(_42f){var div=dojo.doc.createElement("div");this._canvas.containerNode.appendChild(div);var inp=dojo.doc.createElement("input");inp.type="text";inp.name="label";inp.size=30;inp.maxsize=300;div.appendChild(inp);this._labelText=inp;var btn=dojo.doc.createElement("input");btn.type="button";btn.value="OK";div.appendChild(btn);this._okButton=btn;this._labelDialog=new yfiles.client.tiles.widget.PlaceableDialog({title:"Edit Label",duration:500},div);},activate:function(){this.inherited(arguments);if(this.nodeOrLabel){var type=yfiles.client.tiles.HitTest.getElementType(this.nodeOrLabel);if(type=="Node"||type=="NodeLabel"){this._editLabel();return;}}this.deactivate();},deactivate:function(){this.inherited(arguments);this._labelDialog.hide();},_attachEventListeners:function(){this._clickHandle=dojo.connect(this._okButton,"onclick",this,"_labelDone");this._hideHandle=dojo.connect(this._labelDialog,"hide",this,"deactivate");},_detachEventListeners:function(){dojo.disconnect(this._clickHandle);dojo.disconnect(this._hideHandle);},_editLabel:function(){var _430=this._canvas.getGraph();_430.getLabel(this.nodeOrLabel,this,this._openLabelEditor,this.deactivate);},_openLabelEditor:function(lbl){this._labelText.value=lbl;var _431=this._canvas.getMousePosition();this._labelDialog.x=_431.x;this._labelDialog.y=_431.y-25;this._labelDialog.show();},_labelDone:function(){var _432=this._labelText.value;var _433=this._canvas;var _434=this._canvas.getGraph();_434.setLabel(this.nodeOrLabel,_432);this.deactivate();}});}if(!dojo._hasResource["yfiles.client.tiles.HierarchyManager"]){dojo._hasResource["yfiles.client.tiles.HierarchyManager"]=true;dojo.provide("yfiles.client.tiles.HierarchyManager");dojo.declare("yfiles.client.tiles.HierarchyManager",null,{_graph:null,_type:null,_parent:null,_stateLabelBounds:null,_visibleGraphParent:null,constructor:function(_435){this._graph=_435;this._type=new Object();this._parent=new Object();this._stateLabelBounds=new Object();dojo.connect(_435,"onLoad",this,"refresh");dojo.connect(_435,"onRemove",this,"refresh");dojo.connect(_435,"onNodesMoved",this,"refresh");dojo.connect(_435,"onNodeCreated",this,"_onNewNode");this.refresh();},refresh:function(){if(this._graph){var name=this._graph.getName();if(name&&name.length>0){var _436={path:name};var self=this;dojo.xhrGet({url:this._graph.getBaseURL()+"/getHierarchyInfo",content:_436,load:function(info,_437){self._initializeHierarchyInfo(info,name);},preventCache:true,handleAs:"json"});}else{this._clearHierarchyInfo();this.onNewHierarchyInfo(name);}}},setData:function(_438){this._initializeHierarchyInfo(_438,this.getGraph().getName());},_initializeHierarchyInfo:function(info,name){this._clearHierarchyInfo();for(var i=0;i<info.length;i++){var _439=info[i];var id=_439["i"];this._type[id]=_439["t"];this._parent[id]=_439["p"];this._stateLabelBounds[id]=_439["s"];}this.onNewHierarchyInfo(name);},_clearHierarchyInfo:function(){delete this._type;this._type=new Object();delete this._parent;this._parent=new Object();delete this._stateLabelBounds;this._stateLabelBounds=new Object();},_onNewNode:function(id){this._type[id]=0;this._parent[id]=this._visibleGraphParent;},getGraph:function(){return this._graph;},getNodes:function(args){var _43a=new Array();var _43b={excludeNormalNodes:false,excludeFolderNodes:false,excludeGroupNodes:false};var _43c=dojo.delegate(_43b,args);for(var idx in this._type){var type=this._type[idx];if((type==0&&!_43c.excludeNormalNodes)||(type==1&&!_43c.excludeGroupNodes)||(type==2&&!_43c.excludeFolderNodes)){if(!_43c.onlyChildrenOf||_43c.onlyChildrenOf==this._parent[idx]){_43a.push(idx);}}}return _43a;},getVisibleGraphParent:function(){return this._visibleGraphParent;},isNormalNode:function(_43d){return this._type[_43d]==0;},isGroupNode:function(_43e){return this._type[_43e]==1;},isFolderNode:function(_43f){return this._type[_43f]==2;},getParent:function(_440){return this._parent[_440];},isInStateLabelBox:function(_441,x,y){var box=this._stateLabelBounds[_441];return box&&box.x<=x&&box.y<=y&&x<=box.x+box.w&&y<=box.y+box.h;},createGroup:function(args){var name=this._graph.getName();if(name){var _442=dojo.clone(args);if(_442.subNodeIds){_442.subNodeIds=this._createIdsString(_442.subNodeIds);}var _443=args.customData;var _444={name:name,x:0,y:0};var _445=dojo.delegate(_444,_442);var self=this;dojo.xhrPost({url:this._graph.getBaseURL()+"/createGroup",content:_445,load:function(data,_446){self._initializeHierarchyInfo(data.hinfo,name);self.onCreateGroup(data.id,data.bounds,name,_443);},error:function(_447,_448){self.onCreateGroupFailed(name,_443);},handleAs:"json"});}else{this.onCreateGroupFailed(null,_443);}},moveToSubgraph:function(_449,_44a,_44b){var name=this._graph.getName();if(name){var _44c=this._createIdsString(_449);var _44d={name:name,subNodeIds:_44c};if(_44a){_44d.parentNodeId=_44a;}var self=this;dojo.xhrPost({url:this._graph.getBaseURL()+"/moveToSubgraph",content:_44d,load:function(data,_44e){self._initializeHierarchyInfo(data.hinfo,name);self.onMoveToSubgraph(data.id,data.bounds,_449,_44b);},error:function(_44f,_450){self.onMoveToSubgraphFailed(name,_44a,_449,_44b);},handleAs:"json"});}else{this.onMoveToSubgraphFailed(null,_44a,_449,_44b);}},_createIdsString:function(ids){var _451="";dojo.forEach(ids,function(id){_451+=id+",";});if(_451.length>0){_451=_451.substring(0,_451.length-1);}return _451;},moveToParent:function(_452,_453){var name=this._graph.getName();if(name){var _454=this._createIdsString(_452);var _455={name:name,subNodeIds:_454};var self=this;dojo.xhrPost({url:this._graph.getBaseURL()+"/moveToParent",content:_455,load:function(data,_456){self._initializeHierarchyInfo(data.hinfo,name);self.onMoveToParent(data.id,data.bounds,_452,_453);},error:function(_457,_458){self.onMoveToParentFailed(name,_452,_453);},handleAs:"json"});}else{this.onMoveToParentFailed(null,_452,_453);}},closeGroup:function(_459,_45a){var name=this._graph.getName();if(name){var _45b={name:name,id:_459};var self=this;dojo.xhrPost({url:this._graph.getBaseURL()+"/closeGroup",content:_45b,load:function(data,_45c){self._initializeHierarchyInfo(data.hinfo,name);self.onCloseGroup(_459,data.bounds,_45a);},error:function(_45d,_45e){self.onCloseGroupFailed(name,_459,_45a);},handleAs:"json"});}else{this.onCloseGroupFailed(null,_459,_45a);}},openGroup:function(_45f,_460){var name=this._graph.getName();var _461={name:name,id:_45f};if(name){var self=this;dojo.xhrPost({url:this._graph.getBaseURL()+"/openGroup",content:_461,load:function(data,_462){self._initializeHierarchyInfo(data.hinfo,name);self.onOpenGroup(_45f,data.bounds,_460);},error:function(_463,_464){self.onOpenGroupFailed(name,_45f,_460);},handleAs:"json"});}else{this.onOpenGroupFailed(null,_45f,_460);}},switchToSubgraph:function(_465,_466){var name=this._graph.getName();var _467={name:name,id:_465};if(name){var self=this;dojo.xhrPost({url:this._graph.getBaseURL()+"/switchToSubgraph",content:_467,load:function(data,_468){self._visibleGraphParent=data.id;self._initializeHierarchyInfo(data.hinfo,name);self.onSwitchToSubgraph(data.id,data.bounds,_466);},error:function(_469,_46a){self.onSwitchToSubgraphFailed(name,_465,_466);},handleAs:"json"});}else{this.onSwitchToSubgraphFailed(null,_465,_466);}},switchToParent:function(_46b){var _46c={name:this._graph.getName()};if(this._graph.getName()){var self=this;dojo.xhrPost({url:this._graph.getBaseURL()+"/switchToParent",content:_46c,load:function(data,_46d){self._visibleGraphParent=data.id;self._initializeHierarchyInfo(data.hinfo,name);self.onSwitchToParent(data.id,data.bounds,_46b);},error:function(_46e,_46f){self.onSwitchToParentFailed(self._graph.getName(),_46b);},handleAs:"json"});}else{this.onSwitchToParentFailed(null,_46b);}},onNewHierarchyInfo:function(name){},onCreateGroup:function(id,_470,name,_471){},onCreateGroupFailed:function(name,_472){},onCloseGroup:function(id,_473,_474){},onOpenGroup:function(id,_475,_476){},onCloseGroupFailed:function(name,id,_477){},onOpenGroupFailed:function(name,id,_478){},onSwitchToSubgraph:function(id,_479,_47a){},onSwitchToSubgraphFailed:function(name,id,_47b){},onSwitchToParent:function(id,_47c,_47d){},onSwitchToParentFailed:function(name,_47e){},onMoveToSubgraph:function(_47f,_480,_481,_482){},onMoveToSubgraphFailed:function(name,_483,_484,_485){},onMoveToParent:function(_486,_487,_488,_489){},onMoveToParentFailed:function(name,_48a,_48b){}});}if(!dojo._hasResource["yfiles.client.tiles.GroupNavigationMode"]){dojo._hasResource["yfiles.client.tiles.GroupNavigationMode"]=true;dojo.provide("yfiles.client.tiles.GroupNavigationMode");dojo.declare("yfiles.client.tiles.GroupNavigationMode",yfiles.client.tiles.InputMode,{_hierarchy:null,_connectHandles:null,_convertedOnSwitch:null,constructor:function(_48c,_48d){this._hierarchy=_48d;this._connectHandles=[];this._convertedOnSwitch={};},activate:function(){this.inherited(arguments);},deactivate:function(){this.inherited(arguments);},_onClickNode:function(id,info,evt){if(evt.ctrlKey&&evt.shiftKey){if(!this._hierarchy.isNormalNode(id)){if(this._hierarchy.isGroupNode(id)){this._convertedOnSwitch[id]=true;}this._hierarchy.switchToSubgraph(id);}}else{this._updateGroupState(id,evt);}},_onClickNodeLabel:function(_48e,info,evt){var _48f=this._canvas.getHitTest().getLabelInfo(_48e);if(_48f){var _490=_48f.mainElementId;this._updateGroupState(_490,evt);}},_onClickPaper:function(info,evt){if(evt.ctrlKey&&evt.shiftKey){this._switchedFromChild=this._hierarchy.getVisibleGraphParent();this._hierarchy.switchToParent();}},_refreshCanvas:function(id,_491){this._canvas.refresh(_491,null,true);if(this._switchedFromChild){this._canvas.fitContent();this._switchedFromChild=null;}},_refreshCanvasOnGroupSwitch:function(id,_492){this._refreshCanvas(id,_492);this._canvas.fitContent();},_onSwitchToParent:function(id,_493){if(this._switchedFromChild&&this._convertedOnSwitch[this._switchedFromChild]){this._hierarchy.openGroup(this._switchedFromChild);delete this._convertedOnSwitch[this._switchedFromChild];}else{this._switchedFromChild=null;this._refreshCanvasOnGroupSwitch(id,_493);}},_clear:function(){this._convertedOnSwitch={};},_attachEventListeners:function(){if(this._connectHandles.length!=0){return;}this._connectHandles=[dojo.connect(this._canvas,"onClickPaper",this,"_onClickPaper"),dojo.connect(this._canvas,"onClickNode",this,"_onClickNode"),dojo.connect(this._canvas,"onClickNodeLabel",this,"_onClickNodeLabel"),dojo.connect(this._canvas,"pathSet",this,"_clear"),dojo.connect(this._hierarchy,"onCloseGroup",this,"_refreshCanvas"),dojo.connect(this._hierarchy,"onOpenGroup",this,"_refreshCanvas"),dojo.connect(this._hierarchy,"onSwitchToSubgraph",this,"_refreshCanvasOnGroupSwitch"),dojo.connect(this._hierarchy,"onSwitchToParent",this,"_onSwitchToParent")];},_detachEventListeners:function(){dojo.forEach(this._connectHandles,dojo.disconnect);this._connectHandles=[];},_updateGroupState:function(_494,evt){if(!evt.ctrlKey&&!evt.shiftKey&&!evt.altKey){if(!this._hierarchy.isNormalNode(_494)){var pos=this._canvas.getWorldCoordinates();if(this._hierarchy.isInStateLabelBox(_494,pos.x,pos.y)){if(this._hierarchy.isGroupNode(_494)){this._canvas.pushTiles();this._hierarchy.closeGroup(_494);}else{if(this._hierarchy.isFolderNode(_494)){this._canvas.pushTiles();this._hierarchy.openGroup(_494);}}}}}}});}if(!dojo._hasResource["yfiles.client.tiles.GraphSelection"]){dojo._hasResource["yfiles.client.tiles.GraphSelection"]=true;dojo.provide("yfiles.client.tiles.GraphSelection");dojo.declare("yfiles.client.tiles.GraphSelection",null,{_nodes:null,_edges:null,_size:0,constructor:function(_495,_496){this.setSelectNodes(_495);this.setSelectEdges(_496);this._size=0;},setSelectNodes:function(bool){if(bool){if(!this._nodes){this._nodes={};}}else{this.removeAll(this.getNodes());this._nodes=null;}},setSelectEdges:function(bool){if(bool){if(!this._edges){this._edges={};}}else{this.removeAll(this.getEdges());this._edges=null;}},getSize:function(){return this._size;},getNodes:function(){var res=[];this._getElems(this._nodes,res);return res;},getEdges:function(){var res=[];this._getElems(this._edges,res);return res;},get:function(){var res=[];this._getElems(this._nodes,res);this._getElems(this._edges,res);return res;},add:function(id){switch(yfiles.client.tiles.HitTest.getElementType(id)){case "Node":if(this._nodes&&!this._nodes[id]){this._nodes[id]=true;this._size++;this.onAddNode(id);return true;}break;case "Edge":if(this._edges&&!this._edges[id]){this._edges[id]=true;this._size++;this.onAddEdge(id);return true;}break;}return false;},remove:function(id){switch(yfiles.client.tiles.HitTest.getElementType(id)){case "Node":if(this._nodes&&this._nodes[id]){delete this._nodes[id];this._size--;this.onRemoveNode(id);return true;}break;case "Edge":if(this._edges&&this._edges[id]){delete this._edges[id];this._size--;this.onRemoveEdge(id);return true;}break;}return false;},toggle:function(id){if(this.isSelected(id)){return this.remove(id);}else{return this.add(id);}},addAll:function(ids){for(var i=0;i<ids.length;i++){this.add(ids[i]);}},removeAll:function(ids){for(var i=0;i<ids.length;i++){this.remove(ids[i]);}},toggleAll:function(ids){for(var i=0;i<ids.length;i++){this.toggle(ids[i]);}},isSelected:function(id){if((this._nodes&&this._nodes[id])||(this._edges&&this._edges[id])){return true;}else{return false;}},clear:function(){this.removeAll(this.getEdges());this.removeAll(this.getNodes());},onAddNode:function(_497){},onAddEdge:function(_498){},onRemoveNode:function(_499){},onRemoveEdge:function(_49a){},_getElems:function(coll,res){if(coll){for(var idx in coll){if(coll[idx]){res.push(idx);}}}}});}if(!dojo._hasResource["yfiles.client.tiles.MoveSelectionMode"]){dojo._hasResource["yfiles.client.tiles.MoveSelectionMode"]=true;dojo.provide("yfiles.client.tiles.MoveSelectionMode");dojo.declare("yfiles.client.tiles.MoveSelectionMode",yfiles.client.tiles.InputMode,{_selection:null,_startPosition:null,_div:null,_drag:null,_hierarchy:null,_MouseUpHandle:null,_MouseMoveHandle:null,_routeEdges:false,constructor:function(_49b,_49c,_49d,_49e){this._selection=_49c;if(_49d){this._hierarchy=_49d;}if(_49e){this._routeEdges=_49e;}var _49f=dojo.doc.createElement("div");_49f.style.position="absolute";this._canvas.containerNode.appendChild(_49f);this._div=_49f;},activate:function(){this.inherited(arguments);if(this._selection.getNodes().length==0){this.deactivate();}else{this._startPosition=this._canvas.getMousePosition();this._showGhosts();}},deactivate:function(){this._hideGhosts();this.inherited(arguments);},setRouteEdges:function(_4a0){this._routeEdges=_4a0;},isRouteEdges:function(){return this._routeEdges;},_onMouseUp:function(evt){this._hideGhosts();this._moveNodesSwitchGroups(evt);this.deactivate();},_showGhosts:function(){this._div.style.left="0px";this._div.style.top="0px";var _4a1=this._selection.getNodes();for(var idx=0;idx<_4a1.length;idx++){var id=_4a1[idx];var _4a2=this._hitTest.getBoundsForId(id);var zoom=this._canvas.zoom;var div=dojo.doc.createElement("div");this._div.appendChild(div);div.style.position="absolute";div.style.cursor="move";var sur=this._canvas.highlightNodeSurroundPixels;dojo.style(div,"left",(this._canvas.x+_4a2.minX*zoom-sur)+"px");dojo.style(div,"top",(this._canvas.y+_4a2.minY*zoom-sur)+"px");dojo.style(div,"width",(_4a2.width()*zoom+2*sur)+"px");dojo.style(div,"height",(_4a2.height()*zoom+2*sur)+"px");div.style.backgroundColor="yellow";dojo.style(div,"opacity",0.5);}this._MouseUpHandle=dojo.connect(this._canvas,"onMouseUp",this,"_onMouseUp");this._MouseMoveHandle=dojo.connect(this._canvas,"onMouseMove",this,"_moveGhosts");},_moveGhosts:function(){var pos=this._canvas.getMousePosition();var x=pos.x-this._startPosition.x;var y=pos.y-this._startPosition.y;this._div.style.left=x+"px";this._div.style.top=y+"px";},_hideGhosts:function(){this._moving=false;if(this._div){dojo.disconnect(this._MouseUpHandle);dojo.disconnect(this._MouseMoveHandle);while(this._div.hasChildNodes()){this._div.removeChild(this._div.firstChild);}}},_moveNodesSwitchGroups:function(evt){if(this._hierarchy&&evt.shiftKey){this._switchGroups();}else{this._moveNodes(this._selection.getNodes());}},_switchGroups:function(){var _4a3=this._canvas;var _4a4=this._selection.getNodes();var _4a5=_4a3.getHitTest();var _4a6=_4a3.getWorldCoordinates();var info=_4a5.getHitInfo(_4a6.x,_4a6.y,false);var _4a7=yfiles.client.tiles.HitTest.getHitIds(info);var _4a8=dojo.hitch(this,this._moveNodes,_4a4);if(_4a7.length>0){for(var idx in _4a7){var id=_4a7[idx];if(!this._hierarchy.isNormalNode(id)){this._tmpMTSHandle=dojo.connect(this._hierarchy,"onMoveToSubgraph",this,_4a8);this._tmpMTSFHandle=dojo.connect(this._hierarchy,"onMoveToSubgraphFailed",this,_4a8);this._hierarchy.moveToSubgraph(_4a4,id);break;}}}else{this._tmpMTSHandle=dojo.connect(this._hierarchy,"onMoveToSubgraph",this,_4a8);this._tmpMTSFHandle=dojo.connect(this._hierarchy,"onMoveToSubgraphFailed",this,_4a8);this._hierarchy.moveToSubgraph(_4a4,this._hierarchy.getVisibleGraphParent());}},_moveNodes:function(_4a9){if(this._tmpMTSHandle){dojo.disconnect(this._tmpMTSHandle);delete this._tmpMTSHandle;}if(this._tmpMTSFHandle){dojo.disconnect(this._tmpMTSFHandle);delete this._tmpMTSFHandle;}var _4aa=this._canvas;var pos=_4aa.getMousePosition();var x=(pos.x-this._startPosition.x)/_4aa.zoom;var y=(pos.y-this._startPosition.y)/_4aa.zoom;_4aa.getGraph().moveNodes(_4a9,x,y,this._routeEdges);}});}if(!dojo._hasResource["yfiles.client.tiles.widget.Rubberband"]){dojo._hasResource["yfiles.client.tiles.widget.Rubberband"]=true;dojo.provide("yfiles.client.tiles.widget.Rubberband");dojo.declare("yfiles.client.tiles.widget.Rubberband",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"root\" style=\"display:none;overflow:hidden;\"><div dojoAttachPoint=\"area\" class=\"yFilesRubberbandArea\" style=\"position:absolute;display:none;font-size:1px;\"></div></div>",fixCanvas:false,releaseCanvas:false,root:null,area:null,canvas:null,_mouseX:0,_mouseY:0,_initialX:0,_initialY:0,_resizeAreaHandle:null,_showAreaHandle:null,_mouseMoveHandle:null,activate:function(_4ab){this.canvas=_4ab;if(this.fixCanvas){this.canvas.fix();}this._showAreaHandle=this.connect(this.canvas,"onMouseDown","_showArea");},activateAt:function(_4ac,pos){this.canvas=_4ac;if(this.fixCanvas){this.canvas.fix();}this._showAreaAt(pos);},deactivate:function(){this._hideArea();this.onDeactivated();},onAreaResized:function(x,y,_4ad,_4ae){},onAreaDone:function(x,y,_4af,_4b0){},onDeactivated:function(){},_showArea:function(){this.disconnect(this._showAreaHandle);var _4b1=this.canvas.getMousePosition();this._showAreaAt(_4b1);},_showAreaAt:function(pos){var x=pos.x;var y=pos.y;this._initialX=x;this._initialY=y;var area=this.area;area.style.width="1px";area.style.height="1px";area.style.left=this._initialX+"px";area.style.top=this._initialY+"px";dojo.style(area,"opacity",0.2);area.style.display="block";this.root.style.display="block";this._resizeAreaHandle=this.connect(this.canvas,"onMouseMove","_resizeArea");this._mouseMoveHandle=this.connect(this.canvas,"onMouseUp","_areaDone");},_resizeArea:function(evt){var pos=this.canvas.getMousePosition();this._mouseX=pos.x;this._mouseY=pos.y;var w=this._mouseX-this._initialX;var h=this._mouseY-this._initialY;var _4b2=this._initialX;var _4b3=this._initialY;var _4b4=w;var _4b5=h;var area=this.area;if(w>=0){area.style.width=_4b4+"px";}else{_4b2=this._initialX+w;_4b4=-w;area.style.left=_4b2+"px";area.style.width=_4b4+"px";}if(h>=0){area.style.height=_4b5+"px";}else{_4b3=this._initialY+h;_4b5=-h;area.style.top=_4b3+"px";area.style.height=_4b5+"px";}this.onAreaResized(_4b2,_4b3,_4b4,_4b5);},_areaDone:function(){var _4b6=this.canvas;var area=this.area;var x=parseInt(area.style.left)-_4b6.x;var y=parseInt(area.style.top)-_4b6.y;var w=parseInt(area.style.width);var h=parseInt(area.style.height);this._hideArea();this.onAreaDone(x,y,w,h);this.onDeactivated();},_hideArea:function(){if(this.releaseCanvas&&this.canvas){this.canvas.release();}this.disconnect(this._showAreaHandle);this.disconnect(this._mouseMoveHandle);this.disconnect(this._resizeAreaHandle);window.status="";var area=this.area;area.style.display="none";area.style.left="-10px";area.style.top="-10px";area.style.width="1px";area.style.height="1px";this.root.style.display="none";}});}if(!dojo._hasResource["yfiles.client.tiles.RectangularSelectionMode"]){dojo._hasResource["yfiles.client.tiles.RectangularSelectionMode"]=true;dojo.provide("yfiles.client.tiles.RectangularSelectionMode");dojo.declare("yfiles.client.tiles.RectangularSelectionMode",yfiles.client.tiles.InputMode,{_rubberBand:null,_selection:null,_hierarchy:null,_connectHandles:null,constructor:function(_4b7,_4b8,_4b9){this._selection=_4b8;this._rubberBand=new yfiles.client.tiles.widget.Rubberband({canvas:this._canvas,fixCanvas:true});this._canvas.containerNode.appendChild(this._rubberBand.domNode);this._connectHandles=[];this._hierarchy=_4b9;},activate:function(){this.inherited(arguments);window.status="Drag to mark the selection area.";this._rubberBand.activateAt(this._canvas,this._canvas.getMousePosition());},deactivate:function(){if(this.isActive()){this._rubberBand.deactivate();window.status="";}this.inherited(arguments);},_attachEventListeners:function(){if(this._connectHandles.length==0){this._connectHandles=[dojo.connect(this._rubberBand,"onDeactivated",this,"_hideSelectionArea"),dojo.connect(this._rubberBand,"onAreaDone",this,"_applySelectionArea"),dojo.connect(this._selection,"onAddNode",this._canvas,"highlight"),dojo.connect(this._selection,"onRemoveNode",this._canvas,"unhighlight"),dojo.connect(this._selection,"onAddEdge",this._canvas,"highlight"),dojo.connect(this._selection,"onRemoveEdge",this._canvas,"unhighlight"),dojo.connect(this._canvas.getGraph(),"onRemove",this._selection,"removeAll")];}},_detachEventListeners:function(){dojo.forEach(this._connectHandles,dojo.disconnect);this._connectHandles=[];},_applySelectionArea:function(x,y,w,h){var _4ba=this._canvas;var zoom=this._canvas.zoom;var minX=x/zoom;var minY=y/zoom;var maxX=(x+w)/zoom;var maxY=(y+h)/zoom;var info=this._hitTest.getOverlaps(minX,minY,maxX,maxY);var ids=yfiles.client.tiles.HitTest.getHitIds(info);if(this._hierarchy){var _4bb=[];for(var idx in ids){var id=ids[idx];if(this._hierarchy.isGroupNode(id)){var _4bc=this._hitTest.getBoundsForId(id);if(minX<=_4bc.minX&&minY<=_4bc.minY&&_4bc.maxX<=maxX&&_4bc.maxY<=maxY){_4bb.push(id);}}else{_4bb.push(id);}}this._selection.addAll(_4bb);}else{this._selection.addAll(ids);}this.deactivate();},_hideSelectionArea:function(){window.status="";}});}if(!dojo._hasResource["yfiles.client.tiles.EditMode"]){dojo._hasResource["yfiles.client.tiles.EditMode"]=true;dojo.provide("yfiles.client.tiles.EditMode");dojo.declare("yfiles.client.tiles.EditMode",yfiles.client.tiles.InputMode,{nodeType:null,_hierarchy:null,_groupNavigationMode:null,_createEdgeMode:null,_moveSelectionMode:null,_rectangularSelectionMode:null,_editLabelMode:null,_currentNode:null,_selection:null,_selectNodes:false,_selectEdges:false,_mouseDown:false,_edgeTestSensitivity:5,_groupBorderWidth:5,_connectHandles:null,_allowEdgeCreation:true,_allowNodeCreation:true,_allowMoveSelection:true,_allowLabelEditing:true,_allowElementRemoval:true,constructor:function(_4bd,_4be,_4bf,_4c0,_4c1){this._selectNodes=_4be;this._selectEdges=_4bf;if(_4be||_4bf){this._selection=new yfiles.client.tiles.GraphSelection(_4be,_4bf);}if(_4c1){this._hierarchy=_4c1;this._groupNavigationMode=this.createGroupNavigationMode(_4bd,_4c1);this._groupNavigationMode.activate();}this._createEdgeMode=this.createCreateEdgeMode(_4bd,_4c0);this._moveSelectionMode=this.createMoveSelectionMode(_4bd,this._selection,_4c1);this._rectangularSelectionMode=this.createRectangularSelectionMode(_4bd,this._selection,_4c1);this._editLabelMode=this.createEditLabelMode(_4bd);this._connectHandles=[];},createGroupNavigationMode:function(_4c2,_4c3){return new yfiles.client.tiles.GroupNavigationMode(_4c2,_4c3);},createCreateEdgeMode:function(_4c4,_4c5){return new yfiles.client.tiles.CreateEdgeMode(_4c4,_4c5);},createMoveSelectionMode:function(_4c6,_4c7,_4c8){return new yfiles.client.tiles.MoveSelectionMode(_4c6,_4c7,_4c8);},createRectangularSelectionMode:function(_4c9,_4ca,_4cb){return new yfiles.client.tiles.RectangularSelectionMode(_4c9,_4ca,_4cb);},createEditLabelMode:function(_4cc){return new yfiles.client.tiles.EditLabelMode(_4cc);},createNode:function(_4cd,x,y,_4ce){_4cd.createNode(x,y,this.nodeType);},allowEdgeCreation:function(flag){this._allowEdgeCreation=flag;},allowNodeCreation:function(flag){this._allowNodeCreation=flag;},allowMoveSelection:function(flag){this._allowMoveSelection=flag;},allowLabelEditing:function(flag){this._allowLabelEditing=flag;},allowElementRemoval:function(flag){this._allowElementRemoval=flag;},doAllowEdgeCreation:function(){return this._allowEdgeCreation;},doAllowNodeCreation:function(){return this._allowNodeCreation;},doAllowMoveSelection:function(){return this._allowMoveSelection;},doAllowLabelEditing:function(){return this._allowLabelEditing;},doAllowElementRemoval:function(){return this._allowElementRemoval;},getCreateEdgeMode:function(){return this._createEdgeMode;},getMoveSelectionMode:function(){return this._moveSelectionMode;},getEditLabelMode:function(){return this._editLabelMode;},setCreateEdgeMode:function(_4cf){this._createEdgeMode=_4cf;},setMoveSelectionMode:function(_4d0){this._moveSelectionMode=_4d0;},setEditLabelMode:function(_4d1){this._editLabelMode=_4d1;},getSelection:function(){return this._selection;},clearSelection:function(){this._selection.clear();},activate:function(){this.inherited(arguments);this._canvas.fix();this.setCursor("crosshair","crosshair");},deactivate:function(){this._selection.clear();this._canvas.unhighlightAll();this._canvas.release();this.setCursor("default","default");this.inherited(arguments);},editLabel:function(id){if(this.doAllowLabelEditing()){var _4d2=this.getEditLabelMode();if(_4d2){_4d2.nodeOrLabel=id;this.setChild(_4d2);}}},removeElements:function(_4d3,ids){if(this.doAllowElementRemoval()){_4d3.remove(ids);}},getEdgeTestSensitivity:function(){return this._edgeTestSensitivity;},setEdgeTestSensitivity:function(_4d4){this._edgeTestSensitivity=_4d4;this._hitTest.setEdgeTestSensitivity(this._edgeTestSensitivity/this._canvas.zoom);},_onMouseOverNode:function(_4d5){this._currentNode=_4d5;this.setCursor("pointer","crosshair");},_onMouseOutNode:function(_4d6){this._currentNode=null;this.restoreCursor();},_onMouseOverNodeLabel:function(_4d7){var _4d8=this._canvas.getHitTest().getLabelInfo(_4d7);if(_4d8){this._currentNode=_4d8.mainElementId;}this.setCursor("pointer","crosshair");},_onMouseOutNodeLabel:function(_4d9){this._currentNode=null;this.restoreCursor();},_onMouseOverEdge:function(){this.setCursor("pointer","crosshair");},_onMouseOutEdge:function(){this.restoreCursor();},_onMouseDown:function(evt){var info=this._canvas.getLastHitInfo();var _4da=yfiles.client.tiles.HitTest.getElementType(info);if(_4da!="Node"&&_4da!="NodeLabel"){this._currentNode=null;if(this._selectNodes){this.restoreCursor();}}this._mouseDown=true;},_onMouseUp:function(evt){this._mouseDown=false;},_onClickNodeOrEdge:function(id,info,evt){this._updateSelection(id,info,evt);},_onClickNodeLabel:function(_4db,info,evt){var _4dc=this._canvas.getHitTest().getLabelInfo(_4db);if(_4dc){var _4dd=_4dc.mainElementId;this._updateSelection(_4dd,info,evt);}},_onClickPaper:function(info,evt){if(!evt.ctrlKey&&!evt.shiftKey&&!evt.altKey){var _4de=this._selection.getSize();this.clearSelection();if(_4de==0&&this.doAllowNodeCreation()){var _4df=this._canvas;var _4e0=_4df.getWorldCoordinates();this.createNode(_4df.getGraph(),_4e0.x,_4e0.y,this.nodeType);}}},_onMouseMove:function(evt){if(this._mouseDown){this._mouseDown=false;if(this._currentNode){if(this._selection){if(!this._selection.isSelected(this._currentNode)){if(this._hierarchy&&this._strictlyInsideGroupNode(this._currentNode)){this._startSelection(evt);}else{this._startCreateEdge();}}else{this._startMoveSelection();}}else{if(!this._hierarchy||!this._strictlyInsideGroupNode(this._currentNode)){this._startCreateEdge();}}}else{if(this._selection){this._startSelection(evt);}}}},_onKeyPress:function(evt){if(this._canvas.isMouseOver()&&evt.keyCode==dojo.keys.DELETE){var _4e1=this._selection.get();this.removeElements(this.getGraph(),_4e1);}},_attachEventListeners:function(){if(this._connectHandles.length!=0){return;}this._canvas.fix();this._connectHandles=[dojo.connect(this._canvas,"onMouseDown",this,"_onMouseDown"),dojo.connect(this._canvas,"onMouseUp",this,"_onMouseUp"),dojo.connect(this._canvas,"onClickPaper",this,"_onClickPaper"),dojo.connect(this._canvas,"onMouseMove",this,"_onMouseMove"),dojo.connect(this._canvas,"viewPortChanged",this,"_viewPortChanged")];this._connectHandles.push(dojo.connect(this._canvas,"onMouseOverNode",this,"_onMouseOverNode"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOutNode",this,"_onMouseOutNode"));this._connectHandles.push(dojo.connect(this._canvas,"onClickNode",this,"_onClickNodeOrEdge"));this._connectHandles.push(dojo.connect(this._canvas,"onDblClickNode",this,"editLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOverNodeLabel",this,"_onMouseOverNodeLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOutNodeLabel",this,"_onMouseOutNodeLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onClickNodeLabel",this,"_onClickNodeLabel"));this._connectHandles.push(dojo.connect(this._canvas,"onClickEdge",this,"_onClickNodeOrEdge"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOverEdge",this,"_onMouseOverEdge"));this._connectHandles.push(dojo.connect(this._canvas,"onMouseOutEdge",this,"_onMouseOutEdge"));if(this._selectNodes){this._connectHandles.push(dojo.connect(this._selection,"onAddNode",this._canvas,"highlight"));this._connectHandles.push(dojo.connect(this._selection,"onRemoveNode",this._canvas,"unhighlight"));}if(this._selectEdges){this._connectHandles.push(dojo.connect(this._selection,"onAddEdge",this._canvas,"highlight"));this._connectHandles.push(dojo.connect(this._selection,"onRemoveEdge",this._canvas,"unhighlight"));}this._connectHandles.push(dojo.connect(this._canvas,"onClickPaper",this._selection,"clear"));this._connectHandles.push(dojo.connect(this.getGraph(),"onRemove",this._selection,"removeAll"));this._connectHandles.push(dojo.connect(dojo.doc,"onkeypress",this,"_onKeyPress"));this._hitTest.setEdgeTestSensitivity(this._edgeTestSensitivity/this._canvas.zoom);var info=this._canvas.getLastHitInfo();if("Node"==yfiles.client.tiles.HitTest.getElementType(info)){this._onMouseOverNode(yfiles.client.tiles.HitTest.getHitId(info));}else{this._currentNode=null;}},_detachEventListeners:function(){dojo.forEach(this._connectHandles,dojo.disconnect);this._connectHandles=[];},_startSelection:function(evt){if(this._selection){if(!evt.ctrlKey){this.clearSelection();}this.setChild(this._rectangularSelectionMode);}},_startMoveSelection:function(){if(this.doAllowMoveSelection()){var _4e2=this.getMoveSelectionMode();if(_4e2){this.setChild(_4e2);}}},_startCreateEdge:function(){if(this.doAllowEdgeCreation()){var _4e3=this.getCreateEdgeMode();if(_4e3){_4e3.startNode=this._currentNode;this.setChild(_4e3);}}},_strictlyInsideGroupNode:function(node){if(this._hierarchy&&this._hierarchy.isGroupNode(node)){var _4e4=this._canvas.getHitTest().getBoundsForId(node);var pos=this._canvas.getWorldCoordinates();var gbw=this._groupBorderWidth;return (pos.x-_4e4.minX>gbw)&&(pos.y-_4e4.minY>gbw)&&(_4e4.maxX-pos.x>gbw)&&(_4e4.maxY-pos.y>gbw);}else{return false;}},_updateSelection:function(id,info,evt){if(this._selection){if(evt.ctrlKey&&evt.shiftKey){return;}if(!evt.ctrlKey){this.clearSelection();}if(!this._selectNodes||!this._selectEdges){var _4e5=yfiles.client.tiles.HitTest.getElementType(id);if((_4e5=="Node"&&!this._selectNodes)||(_4e5=="Edge"&&!this._selectEdges)){return;}}this._selection.toggle(id);}},_viewPortChanged:function(x,y,_4e6,_4e7,zoom){this._hitTest.setEdgeTestSensitivity(this._edgeTestSensitivity/zoom);}});}if(!dojo._hasResource["yfiles.client.tiles.ServerAction"]){dojo._hasResource["yfiles.client.tiles.ServerAction"]=true;dojo.provide("yfiles.client.tiles.ServerAction");dojo.declare("yfiles.client.tiles.ServerAction",null,{_id:null,_url:null,_clientContext:null,_graphName:null,_graph:null,_canvas:null,_hitTest:null,_hierarchy:null,_selection:null,_customParameter:null,_preRun:null,_postRun:null,_errorHandler:null,_customResponse:null,_worldBounds:null,constructor:function(_4e8){var _4e9={url:"./yFilesAction",error:function(_4ea,_4eb){console.error(_4ea);}};var args=dojo.mixin(_4e9,_4e8);if(dojo.isString(args["id"])){this.setId(args["id"]);}else{console.error("no suitable id parameter in constructor for ServerAction: "+args["id"]);return;}this.setUrl(args["url"]);this.setCanvas(args["canvas"]);this.setGraphName(args["graphName"]);this.setGraph(args["graph"]);this.setHitTest(args["hitTest"]);this.setHierarchyManager(args["hierarchy"]);this.setSelection(args["selection"]);this.setClientContext(args["clientContext"]);this.setCustomParameter(args["customParameter"]);this.setPreRun(args["preRun"]);this.setPostRun(args["postRun"]);this.setErrorHandler(args["error"]);},getId:function(){return this._id;},setId:function(id){this._id=id;},getUrl:function(){return this._url;},setUrl:function(url){this._url=url;},getClientContext:function(){return this._clientContext;},setClientContext:function(_4ec){this._clientContext=_4ec;},getCustomParameter:function(){return this._customParameter;},setCustomParameter:function(_4ed){this._customParameter=_4ed;},getHitTest:function(){var _4ee=this._hitTest;if(_4ee){return _4ee;}else{var _4ef=this.getCanvas();if(_4ef){return _4ef.getHitTest();}else{return null;}}},setHitTest:function(_4f0){this._hitTest=_4f0;},getHierarchyManager:function(){return this._hierarchy;},setHierarchyManager:function(_4f1){this._hierarchy=_4f1;},getSelection:function(){return this._selection;},setSelection:function(_4f2){this._selection=_4f2;},getCanvas:function(){return this._canvas;},setCanvas:function(_4f3){this._canvas=_4f3;},getGraph:function(){if(this._graph){return this._graph;}else{var _4f4=this.getCanvas();if(_4f4){return _4f4.getGraph();}else{var _4f5=this.getHierarchyManager();if(_4f5){return _4f5.getGraph();}else{return null;}}}},setGraph:function(_4f6){this._graph=_4f6;},getPreRun:function(){return this._preRun;},setPreRun:function(_4f7){this._preRun=_4f7;},getPostRun:function(){return this._postRun;},setPostRun:function(_4f8){this._postRun=_4f8;},getErrorHandler:function(){return this._errorHandler;},setErrorHandler:function(_4f9){this._errorHandler=_4f9;},getCustomResponse:function(){return this._customResponse;},getWorldBounds:function(){return this._worldBounds;},getGraphName:function(){var _4fa=this._graphName;if(_4fa){return _4fa;}var _4fb=this.getGraph();if(_4fb){return _4fb.getName();}else{var _4fc=this.getHitTest();if(_4fc){return _4fc.getGraphName();}else{return null;}}},setGraphName:function(name){this._graphName=name;},run:function(){var _4fd=this.getPreRun();var _4fe=true;if(dojo.isFunction(_4fd)){_4fe=_4fd.apply(this);}this._customResponse=null;this._worldBounds=null;if(!_4fe){return;}var self=this;var _4ff={url:this.getUrl(),content:this._createContent(),handleAs:"json",load:function(_500,_501){self._handleResponse(_500);}};var _502=this.getErrorHandler();if(dojo.isFunction(_502)){_4ff.error=_502;}dojo.xhrPost(_4ff);},_createContent:function(){var _503={id:this._id};var _504=this.getGraphName();if(_504){_503.graphName=_504;var _505=this.getHitTest();if(_505){_503.hasHitTest=true;_503.hitTypes=_505.getEventMask();}if(this.getHierarchyManager()){_503.hasHierarchy=true;}}var _506=this.getCustomParameter();if(_506){_503.customParameter=_506;}var _507=this.getCanvas();if(_507){_503.hasCanvas=true;var zoom=_507.zoom;_503.width=_507.width/zoom;_503.height=_507.height/zoom;_503.zoom=zoom;_503.viewpoint=(_507.x/zoom)+","+(_507.y/zoom);var _508=_507.getMousePosition();_503.mouse=(_508.x/zoom)+","+(_508.y/zoom);}var _509=this.getSelection();if(_509){_503.hasSelection=true;var ids=_509.get();if(ids.length>0){_503.selection=ids.join(",");}}return _503;},_handleResponse:function(_50a){this._customResponse=_50a.customResponse;this._updateClient(_50a);var _50b=this.getPostRun();if(dojo.isFunction(_50b)){_50b.apply(this);}},_updateClient:function(_50c){var _50d=this.getGraphName();if(_50c.worldBounds){this._worldBounds=_50c.worldBounds;}if(_50c.hitTestData&&this.getHitTest()){var self=this;this.getHitTest().setData(_50c.hitTestData,function(){self._updateClientSecond(_50c);});}else{this._updateClientSecond(_50c);}},_updateClientSecond:function(_50e){if(_50e.hierarchyData&&this.getHierarchyManager()){this.getHierarchyManager().setData(_50e.hierarchyData);}if(dojo.isString(_50e.selection)&&this.getSelection()){this._handleSelection(_50e.selection);}var _50f=this.getCanvas();if(_50f){this._updateCanvas(_50e);if(_50e.refreshCanvas){_50f.pushTiles();_50f.recalculateTiles(true);}}},_handleSelection:function(_510){if(dojo.isString(_510)){var _511=this.getSelection();var ids=_510.split(",");_511.clear();_511.addAll(ids);}},_updateCanvas:function(_512){var _513=this.getCanvas();var _514=this.getWorldBounds();if(_514){var bb={minX:_514.x,minY:_514.y,maxX:_514.x+_514.width,maxY:_514.y+_514.height};_513.updateWorldBounds(bb,true);}if(_512.viewPoint){_513.setViewPoint(_512.viewPoint.x*_513.zoom,_512.viewPoint.y*_513.zoom);}if(_512.zoom){_513.setZoom(_512.zoom);}}});}if(!dojo._hasResource["yfiles.client.tiles.SquelchClickMode"]){dojo._hasResource["yfiles.client.tiles.SquelchClickMode"]=true;dojo.provide("yfiles.client.tiles.SquelchClickMode");dojo.declare("yfiles.client.tiles.SquelchClickMode",yfiles.client.tiles.InputMode,{_clickHandle:null,_attachEventListeners:function(){this._clickHandle=dojo.connect(this._canvas,"onClick",this,"deactivate");},_detachEventListeners:function(){dojo.disconnect(this._clickHandle);}});}if(!dojo._hasResource["yfiles.client.tiles.ZoomAreaMode"]){dojo._hasResource["yfiles.client.tiles.ZoomAreaMode"]=true;dojo.provide("yfiles.client.tiles.ZoomAreaMode");dojo.declare("yfiles.client.tiles.ZoomAreaMode",yfiles.client.tiles.InputMode,{_rubberBand:null,_hideHandle:null,_applyHandle:null,constructor:function(_515){this._rubberBand=this._labelDialog=new yfiles.client.tiles.widget.Rubberband({canvas:this._canvas,fixCanvas:true,releaseCanvas:true});this._canvas.containerNode.appendChild(this._rubberBand.domNode);},activate:function(){this.inherited(arguments);this._showZoomArea();},deactivate:function(){if(this.isActive()){this._hideZoomArea();}this.inherited(arguments);},_showZoomArea:function(){if(this._rubberBand){window.status="Click and drag to mark the zoom area.";this._rubberBand.activate(this._canvas);this._hideHandle=dojo.connect(this._rubberBand,"onDeactivated",this,"_hideZoomArea");this._applyHandle=dojo.connect(this._rubberBand,"onAreaDone",this,"_applyZoomArea");}},_hideZoomArea:function(){if(this._rubberBand){dojo.disconnect(this._hideHandle);dojo.disconnect(this._applyHandle);this._rubberBand.deactivate();window.status="";}},_applyZoomArea:function(x,y,w,h){var _516=this._canvas;if(w>9&&h>9){var cx=x+w/2;var cy=y+h/2;var _517=_516.zoom;var _518=_517*Math.min(_516.width/w,_516.height/h);_516.center(cx,cy);_516.setZoom(_518);}this.deactivate();}});}if(!dojo._hasResource["yfiles.client.tiles.widget.ViewPortMarker"]){dojo._hasResource["yfiles.client.tiles.widget.ViewPortMarker"]=true;dojo.provide("yfiles.client.tiles.widget.ViewPortMarker");dojo.declare("yfiles.client.tiles.widget.ViewPortMarker",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"yFilesViewPortMarker\" dojoAttachPoint=\"marker\" style=\"padding:0pt;margin:0pt;position:absolute;display:block;font-size:1px;cursor:move;z-index:10;\"></div>",marker:null,canvasId:"",overviewId:"",lastBounds:null,canvas:null,overview:null,markerParent:null,_changeTriggered:false,_lateInitHandle:null,postCreate:function(){dojo.style(this.marker,"opacity",0.2);this.drag=new dojo.dnd.Moveable(this.marker);this.connect(this.drag,"onMoved","markerChanged");if(!this.overview){this.overview=dijit.byId(this.overviewId);}this.markerParent=this.overview.domNode;this.connect(this.overview,"viewPortChanged","overviewChanged");this.connect(this.markerParent,"ondblclick","centerMarker");if(!this.canvas){this.canvas=dijit.byId(this.canvasId);}if(this.canvas==null){this._lateInitHandle=this.connect(dijit.registry,"add","lateInitialization");}else{with(this.canvas){this.lastBounds={width:width,height:height,x:x,y:y,zoom:zoom};}this.connect(this.canvas,"viewPortChanged","canvasChanged");}},lateInitialization:function(_519){if(_519.id==this.canvasId){this.canvas=_519;with(this.canvas){this.lastBounds={width:width,height:height,x:x,y:y,zoom:zoom};}this.connect(this.canvas,"viewPortChanged","canvasChanged");this.disconnect(this._lateInitHandle);}},overviewChanged:function(){if(this.lastBounds){this.canvasChanged(this.lastBounds.x,this.lastBounds.y,this.lastBounds.width,this.lastBounds.height,this.lastBounds.zoom);}},canvasChanged:function(x,y,_51a,_51b,zoom){this.lastBounds={width:_51a,height:_51b,x:x,y:y,zoom:zoom};var _51c=this.overview.zoom/zoom;var w=Math.round(_51a*_51c);var h=Math.round(_51b*_51c);if(dojo.isIE){w=Math.min(w,4090);h=Math.min(h,4090);}dojo.style(this.marker,{"left":(this.overview.x-x*_51c)+"px","top":(this.overview.y-y*_51c)+"px","width":w+"px","height":h+"px"});},markerChanged:function(){if(!this._changeTriggered){this._changeTriggered=true;setTimeout(dojo.hitch(this,this._markerChanged),100);}},_markerChanged:function(){var _51d=parseInt(dojo.style(this.marker,"left"));var _51e=parseInt(dojo.style(this.marker,"top"));var _51f=this.canvas.zoom/this.overview.zoom;this.canvas.setViewPoint(_51f*(this.overview.x-_51d),_51f*(this.overview.y-_51e));this.canvas.recalculateTiles();this._changeTriggered=false;},centerMarker:function(evt){var pos=dojo.coords(this.markerParent,false);var x=evt.pageX-pos.x-parseInt(dojo.style(this.marker,"width"))/2;var y=evt.pageY-pos.y-parseInt(dojo.style(this.marker,"height"))/2;dojo.style(this.marker,"left",Math.round(x)+"px");dojo.style(this.marker,"top",Math.round(y)+"px");this.markerChanged();}});}if(!dojo._hasResource["demos.widget.GraphInfo"]){dojo._hasResource["demos.widget.GraphInfo"]=true;dojo.provide("demos.widget.GraphInfo");dojo.declare("demos.widget.GraphInfo",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"graphInfo\" dojoAttachPoint=\"mainNode\"><div class=\"customHeading\" dojoAttachPoint=\"containerNode\"></div><div class=\"infoHeading\" dojoAttachPoint=\"infoHeading\"></div><div class=\"infoBody\" dojoAttachPoint=\"infoBody\"></div></div>",infoHeading:null,infoBody:null,path:"",basePath:"",baseURL:".",tooltip:false,showPrefix:null,currentPath:null,postCreate:function(){this.showPrefix="dijit.byId('"+this.id+"').showInfo('";if(this.path!=""||this.basePath!=""){this.showInfo(this.path);}},setHeading:function(_520){this.containerNode.innerHTML=_520;},showInfo:function(path,_521){var _522=path;if(path&&path.charAt(path.length-1)=="/"){_522=path.slice(0,path.length-1);}this.path=_522;var _523=_521;if(_521){if(_521.charAt(_521.length-1)=="/"){_523=_521.slice(0,_521.length-1);}this.basePath=_523;}if(this.path!=""){this.currentPath=this.basePath+"/"+this.path;}else{this.currentPath=this.basePath;}this._createInfoHeading(this.path);this.beforeRequest();var self=this;var _524=dojo.isIE?dojo.xhrPost:dojo.xhrGet;_524({url:this.baseURL+"/"+this.currentPath,load:dojo.hitch(this,this._createInfoBody),error:function(_525,_526){self.requestDone(false);},handleAs:"json"});},gotoNodeURL:function(path){this.beforeRequest();dojo.xhrPost({url:this.baseURL+"/"+path,load:dojo.hitch(this,this._gotoNodeURL),error:function(_527,_528){self.requestDone(false);},handleAs:"json"});},_gotoNodeURL:function(info,_529){this.requestDone(true);if(null!=info["URL"]){window.open(info["URL"]);}},refresh:function(){this.beforeRequest();if(this.currentPath){dojo.xhrPost({url:this.baseURL+"/"+this.currentPath,load:dojo.hitch(this,this._createInfoBody),error:function(_52a,_52b){self.requestDone(false);},handleAs:"json"});}},beforeRequest:function(){},requestDone:function(_52c){},_createInfoHeading:function(path){if(!this.tooltip){var _52d=path.split("/");var _52e="";this._removeChildren(this.infoHeading);for(var _52f in _52d){var part=_52d[_52f];_52e+=part+"/";var _530=part.replace(/_/g," ");var _531=this.showPrefix+_52e+"');";var link=dojo.doc.createElement("A");link.setAttribute("href","javascript:"+_531);link.appendChild(dojo.doc.createTextNode(part));this.infoHeading.appendChild(link);this.infoHeading.appendChild(dojo.doc.createTextNode("/"));}}},_createInfoBody:function(info,_532){this.requestDone(true);if(this.tooltip&&info["Description"]!=null){var _533=info["Description"];this.infoBody.appendChild(dojo.doc.createTextNode(_533));}else{this._removeChildren(this.infoBody);var tab=dojo.doc.createElement("TABLE");dojo.addClass(tab,"infoTable");var _534=dojo.doc.createElement("TBODY");tab.appendChild(_534);dojo.addClass(_534,"infoBody");var _535=["even","odd"];var _536=0;for(var key in info){var val=info[key];var _537=key.replace(/_/g," ");var row=dojo.doc.createElement("TR");dojo.addClass(row,"infoBodyRow");dojo.addClass(row,_535[_536++%2]);_534.appendChild(row);var _538=dojo.doc.createElement("TD");var _539=dojo.doc.createElement("TD");row.appendChild(_538);dojo.addClass(_538,"infoKey");row.appendChild(_539);dojo.addClass(_539,"infoValue");if(val=="folder"){_538.appendChild(dojo.doc.createTextNode(_537));var _53a=(this.path=="")?key:this.path+"/"+key;var _53b=this.showPrefix+_53a+"');";var link=dojo.doc.createElement("A");link.setAttribute("href","javascript:"+_53b);link.appendChild(dojo.doc.createTextNode(_53a));_539.appendChild(link);}else{if(dojo.isString(val)&&val.slice(0,7)=="link://"){_538.appendChild(dojo.doc.createTextNode(_537));var _53a=val.substring(7);var _53b;if(_53a.length>this.basePath.length&&_53a.slice(0,this.basePath.length)==this.basePath){_53a=_53a.substring(this.basePath.length+1);_53b=this.showPrefix+_53a+"');";}else{_53b=this.showPrefix+_53a+"','');";}var link=dojo.doc.createElement("A");link.setAttribute("href","javascript:"+_53b);link.appendChild(dojo.doc.createTextNode(_53a));_539.appendChild(link);}else{if(dojo.isString(val)&&val.slice(0,7)=="http://"){_538.appendChild(dojo.doc.createTextNode(_537));var link=dojo.doc.createElement("A");link.setAttribute("href",val);link.setAttribute("target","_blank");link.appendChild(dojo.doc.createTextNode(val));_539.appendChild(link);}else{_538.appendChild(dojo.doc.createTextNode(_537));_539.appendChild(dojo.doc.createTextNode(val));}}}this.infoBody.appendChild(tab);}}},_removeChildren:function(_53c){while(_53c.hasChildNodes()){_53c.removeChild(_53c.firstChild);}}});}if(!dojo._hasResource["demos.CollapsibleTreeGraphListener"]){dojo._hasResource["demos.CollapsibleTreeGraphListener"]=true;dojo.provide("demos.CollapsibleTreeGraphListener");dojo.declare("demos.CollapsibleTreeGraphListener",yfiles.client.tiles.InputMode,{_layouter:"tree",_overview:null,_graphInfo:null,_clickNodeHandle:null,_overNodeHandle:null,_outNodeHandle:null,constructor:function(_53d,_53e,_53f){this._overview=_53e;this._graphInfo=_53f;this._initializeGraph();},setLayouter:function(_540){this._layouter=_540;this._layoutGraph();},onClickNodeLabel:function(_541){var info=this._canvas.getHitTest().getLabelInfo(_541);if(info&&info.labelIndex==1){this._canvas.pushTiles();this._overview.pushTiles();this._toggleNode(info.mainElementId);}},onMouseOverNodeLabel:function(_542){var info=this._canvas.getHitTest().getLabelInfo(_542);if(info&&info.labelIndex==1){this._canvas.tilesFrame.style.cursor="pointer";}},onMouseOutNodeLabel:function(_543){this._canvas.tilesFrame.style.cursor="default";},_attachEventListeners:function(){this._clickNodeHandle=dojo.connect(this._canvas,"onClickNodeLabel",this,"onClickNodeLabel");this._overNodeHandle=dojo.connect(this._canvas,"onMouseOverNodeLabel",this,"onMouseOverNodeLabel");this._outNodeHandle=dojo.connect(this._canvas,"onMouseOutNodeLabel",this,"onMouseOutNodeLabel");},_detachEventListeners:function(){dojo.event.disconnect(this._clickNodeHandle);dojo.event.disconnect(this._overNodeHandle);dojo.event.disconnect(this._outNodeHandle);},_toggleNode:function(_544){var self=this;dojo.xhrPost({url:this._canvas.baseURL+"/TreeCollapser/toggleNode",content:{path:"CollapsibleTree",id:_544,layout:this._layouter},load:function(_545,_546){self._refresh(_545.bounds,_545.shift);self._graphInfo.refresh();},handleAs:"json"});},_refresh:function(_547,_548){this._canvas.refresh(_547,_548,true);this._overview.refresh(_547,_548,true);this._overview.fitContent();},_initializeGraph:function(){var self=this;dojo.xhrPost({url:this._canvas.baseURL+"/TreeCollapser/initialize",content:{layout:this._layouter},load:function(type,_549,evt){self._canvas.setPath("CollapsibleTree");self._graphInfo.showInfo("CollapsibleTree","graphs");},handleAs:"json"});},_layoutGraph:function(){var self=this;dojo.xhrPost({url:this._canvas.baseURL+"/TreeCollapser/layout",content:{layout:this._layouter},load:function(type,_54a,evt){self._canvas.setPath("CollapsibleTree");self._graphInfo.showInfo("CollapsibleTree","graphs");},handleAs:"json"});}});}if(!dojo._hasResource["demos.GraphClient"]){dojo._hasResource["demos.GraphClient"]=true;dojo.provide("demos.GraphClient");dojo.declare("demos.GraphClient",null,{zoomFactor:2,_canvas:null,_overview:null,_graphInfo:null,_rubberBand:null,_hierarchy:null,_graphName:null,_hideZoomAreaHandle:null,_applyZoomAreaHandle:null,constructor:function(_54b,_54c,_54d,_54e,_54f,_550){this._canvas=_54b;this._overview=_54c;this._graphInfo=_54d;this._rubberBand=_54e;this._hierarchy=_550;if(_54f){this.zoomFactor=_54f;}dojo.connect(this._canvas,"pathSet",this,"hideZoomArea");dojo.connect(this._canvas,"pathSet",this,"_setGraphName");if(this._overview){dojo.connect(this._canvas,"pathSet",this._overview,"setPath");if(this._hierarchy){dojo.connect(this._hierarchy,"onCloseGroup",this,"_refreshOverview");dojo.connect(this._hierarchy,"onOpenGroup",this,"_refreshOverview");dojo.connect(this._hierarchy,"onSwitchToSubgraph",this,"_refreshOverviewOnGroupSwitch");dojo.connect(this._hierarchy,"onSwitchToParent",this,"_refreshOverviewOnGroupSwitch");}}if(this._graphInfo){dojo.connect(this._canvas,"areaUpdated",this._graphInfo,"refresh");if(this._hierarchy){dojo.connect(this._hierarchy,"onCloseGroup",this._graphInfo,"refresh");dojo.connect(this._hierarchy,"onOpenGroup",this._graphInfo,"refresh");dojo.connect(this._hierarchy,"onSwitchToSubgraph",this._graphInfo,"refresh");dojo.connect(this._hierarchy,"onSwitchToParent",this._graphInfo,"refresh");}}},_setGraphName:function(_551){this._graphName=_551;if(this._graphInfo){this._graphInfo.setHeading(_551);this._graphInfo.showInfo(_551,"graphs");}},_refreshOverview:function(){this._overview.refresh();this._overview.fitContent();},_refreshOverviewOnGroupSwitch:function(id,_552){this._overview.refresh(_552);this._overview.fitContent();},zoomIn:function(){this._canvas.setZoom(this._canvas.zoom*this.zoomFactor);},zoomOut:function(){this._canvas.setZoom(this._canvas.zoom/this.zoomFactor);},fitContent:function(){this._canvas.fitContent();},showZoomArea:function(){if(this._rubberBand){window.status="Click and drag to mark the zoom area.";this._rubberBand.activate(this._canvas);this._hideZoomAreaHandle=dojo.connect(this._rubberBand,"onDeactivated",this,"hideZoomArea");this._applyZoomAreaHandle=dojo.connect(this._rubberBand,"onAreaDone",this,"applyZoomArea");}},hideZoomArea:function(){if(this._rubberBand){dojo.disconnect(this._hideZoomAreaHandle);dojo.disconnect(this._applyZoomAreaHandle);this._rubberBand.deactivate();window.status="";}},applyZoomArea:function(x,y,w,h){var _553=this._canvas;if(w>9&&h>9){var cx=x+w/2;var cy=y+h/2;var _554=_553.zoom;var _555=_554*Math.min(_553.width/w,_553.height/h);_553.center(cx,cy);_553.setZoom(_555);}}});}if(!dojo._hasResource["demos.NetworkMonitorPoller"]){dojo._hasResource["demos.NetworkMonitorPoller"]=true;dojo.provide("demos.NetworkMonitorPoller");dojo.declare("demos.NetworkMonitorPoller",null,{_delay:null,errorDelay:null,_pollURL:null,_pollTime:null,_polling:null,_hash:null,constructor:function(_556,_557,_558,_559){this._delay=typeof (_558)!="undefined"?_558:2000;this._errorDelay=typeof (_559)!="undefined"?_559:10000;this._pollURL=_556+_557;},poll:function(){var args={url:this._pollURL,mimetype:"text/xml",error:dojo.hitch(this,"handleError"),load:dojo.hitch(this,"handleLoad")};dojo.xhrPost(args);this._pollTime=new Date();},handleLoad:function(_55a,_55b){this.onGetStatus(_55a);if(this._polling){setTimeout(dojo.hitch(this,"poll"),this._delay);}},handleError:function(_55c,_55d){dojo.debug("NetworkMonitorPoller Error: "+_55c);if(this._polling){setTimeout(dojo.hitch(this,"poll"),this._errorDelay);}},setInterval:function(_55e){this._delay=_55e;},startPolling:function(){this._polling=true;this.poll();},stopPolling:function(){this._polling=false;},isPolling:function(){return this._polling;},onGetStatus:function(evt){}});}if(!dojo._hasResource["demos.TooltipGraphListener"]){dojo._hasResource["demos.TooltipGraphListener"]=true;dojo.provide("demos.TooltipGraphListener");dojo.declare("demos.TooltipGraphListener",null,{tooltipDelay:500,tooltipDuration:5000,_canvas:null,_graphInfo:null,_graphName:null,_toolTips:null,_baseURL:null,constructor:function(_55f,_560){this._canvas=_55f;this._baseURL=_55f.getGraph().getBaseURL();this._graphInfo=_560;this._toolTips=[];dojo.connect(this._canvas,"pathSet",this,"_setGraphName");dojo.connect(this._canvas,"onClickNode",this,"onClickNode");dojo.connect(this._canvas,"onClickEdge",this,"onClickEdge");dojo.connect(this._canvas,"onMouseOverNode",this,"onMouseOverNode");dojo.connect(this._canvas,"onMouseOutNode",this,"onMouseOutNode");},onClickNode:function(_561,info,evt){if(_561==null||this._graphName==null){return;}if(this._graphInfo&&!evt.ctrlKey&&!evt.shiftKey&&!evt.altKey){this._graphInfo.showInfo(this._graphName+"/nodes/"+_561,"graphs");}else{if(this._graphInfo&&evt.shiftKey){this._graphInfo.gotoNodeURL("graphs/"+this._graphName+"/nodes/"+_561);}}},onClickEdge:function(_562,info,evt){if(_562==null||this._graphName==null){return;}if(this._graphInfo&&!evt.ctrlKey&&!evt.shiftKey&&!evt.altKey){this._graphInfo.showInfo(this._graphName+"/edges/"+_562,"graphs");}},onMouseOverNode:function(id){this._showTooltip(id);},onMouseOutNode:function(id){this._hideTooltip(id);},_showTooltip:function(nid){var id=""+nid;var _563=dojo.byId(id);if(!_563){_563=this._createTooltip(id);}_563.setAttribute("hide","false");var self=this;setTimeout(function(){var hide=_563.getAttribute("hide");if(hide!="true"){_563.style.left="-1000px";_563.style.top="-1000px";_563.style.display="block";if(_563.style.width==""){self._setInitialDimensions(_563);}self._setPosition(_563);setTimeout(function(){if(_563){_563.style.display="none";}},self.tooltipDuration);}},self.tooltipDelay);},_setInitialDimensions:function(_564){if(dojo.isIE){var _565=0;for(var i=0;i<_564.childNodes.length;i++){var _566=_564.childNodes[i];if(_566.scrollWidth>_565){_565=_566.scrollWidth;}}_564.style.width=_565+"px";_564.style.height=_564.scrollHeight+"px";}else{if(dojo.isFF){var cbox=dojo.contentBox(_564);}}},_setPosition:function(_567){var _568=this._canvas.getMousePosition();var x=(_568.x+20);var y=_568.y;var box=dojo.marginBox(_567);if(x+box.w>this._canvas.width){x-=(box.w+40);}if(y+box.h>this._canvas.height){y-=(box.h+40);}_567.style.left=x+"px";_567.style.top=y+"px";},_hideTooltip:function(nid){var id=""+nid;var _569=dojo.byId(id);if(_569){_569.setAttribute("hide","true");_569.style.display="none";}},_createTooltip:function(nid){return this._createGraphInfoTooltip(nid);},_createGraphInfoTooltip:function(nid){var w=new demos.widget.GraphInfo({baseURL:this._baseURL,basePath:"graphs/"+this._graphName,path:"nodes/"+nid,tooltip:true});var _56a=w.domNode;dojo.removeClass(_56a,"graphInfo");_56a.setAttribute("id",nid);this._canvas.containerNode.appendChild(_56a);dojo.addClass(_56a,"tooltip");dojo.style(_56a,"opacity",0.8);this._toolTips.push(w);return w.domNode;},_setGraphName:function(_56b){this._graphName=_56b;for(var idx=0;idx<this._toolTips.length;idx++){this._toolTips[idx].destroy();}this._toolTips=[];}});}if(!dojo._hasResource["demos.orgchart.GraphHighlighter"]){dojo._hasResource["demos.orgchart.GraphHighlighter"]=true;dojo.provide("demos.orgchart.GraphHighlighter");dojo.declare("demos.orgchart.GraphHighlighter",null,{_defaultHighlighter:null,constructor:function(){this._defaultHighlighter=new yfiles.client.tiles.GraphHighlighter();},drawNodeHighlight:function(_56c,_56d,_56e){var x=Math.round(_56e.minX*_56c.zoom);var y=Math.round(_56e.minY*_56c.zoom);var w=Math.round(_56e.width()*_56c.zoom);var h=Math.round(_56e.height()*_56c.zoom);var _56f=3;var _570=3;var left=(x-_56f-_570);var top=(y-_56f-_570);var _571=w+_570*2;var _572=h+_570*2;dojo.style(_56d,{"left":left+"px","top":top+"px","width":_571+"px","height":_572+"px","display":"block","position":"absolute"});if(dojo.isIE==6){dojo.style(_56d,"margin",_56f+"px");var _573=dojox.gfx.createSurface(_56d,w+_56f*2,h+_56f*2);var _574=_573.createRect({x:_56f,y:_56f,width:_571-_56f*2,height:_572-_56f*2});_574.setStroke({color:"#ff6600",width:_56f});}else{dojo.style(_56d,"border",_56f+"px solid orange");}var _575=dojo.doc.createElement("div");dojo.style(_575,{"opacity":0.3,"display":"block","position":"absolute","left":_570+"px","top":_570+"px","width":w+"px","height":h+"px","backgroundColor":"white"});_56d.appendChild(_575);},drawEdgeHighlight:function(_576,_577,_578,_579){this._defaultHighlighter.drawEdgeHighlight(_577,_578,_579);}});}if(!dojo._hasResource["demos.orgchart.InputMode"]){dojo._hasResource["demos.orgchart.InputMode"]=true;dojo.provide("demos.orgchart.InputMode");dojo.declare("demos.orgchart.InputMode",yfiles.client.tiles.InputMode,{useDblClick:false,_viewOptions:null,_selection:null,_model:null,constructor:function(_57a,_57b,_57c,_57d){this._selection=_57c;this._viewOptions=_57b;this._model=_57d;if(this.useDblClick){dojo.connect(_57a,"onDblClickNode",this,"focusNode");}else{dojo.connect(_57a,"onClickNode",this,"onClickNode");}},activate:function(){this.inherited(arguments);},deactivate:function(){this.inherited(arguments);},onClickNode:function(_57e,info,evt){if((!this.useDblClick)&&evt.shiftKey){if(this._model.isEmployee(_57e)){this.onClickEmployee(_57e);}else{this.onClickBusinessUnit(_57e);}}},onClickBusinessUnit:function(_57f){this._viewOptions.toggleBusinessUnit(_57f);},onClickEmployee:function(_580){if(this._viewOptions.isGlobalView()){this.zoomOnNode(_580);}else{var _581=this._selection.getNodes();if(_581.length!=1||(_581[0]!=_580)){this._selection.clear();this._selection.add(_580);}this._viewOptions.layout(false,_580);}},zoomOnNode:function(_582){var _583=this._canvas.getHitTest();var _584=_583.getBoundsForId(_582);if(null!=_584){var _585=this._canvas.width;var _586=this._canvas.height;var zoom=1;if(_585/_584.width()<_586/_584.height()){zoom=_585/_584.width();}else{zoom=_586/_584.height();}zoom*=0.5;var w=(_584.maxX-_584.minX);var h=(_584.maxY-_584.minY);var _587=_584.minX+0.5*w;var _588=_584.minY+0.5*h;var vx=_587*zoom;var vy=_588*zoom;this._canvas.setZoom(zoom);this._canvas.center(vx,vy);this._canvas.recalculateTiles();}}});}if(!dojo._hasResource["demos.orgchart.Model"]){dojo._hasResource["demos.orgchart.Model"]=true;dojo.provide("demos.orgchart.Model");dojo.declare("demos.orgchart.Model",null,{_data:null,_store:null,_rootItem:null,_employeeIds:null,setData:function(data){var _589={identifier:"nodeId",label:"name",items:[]};var q=[];q.push(data);var _58a={};var root=null;this._employeeIds=[];while(q.length>0){var _58b=q.pop();var _58c={};for(var att in _58b){if(att!="subordinates"){_58c[att]=_58b[att];}}if(_58b.subordinates.length>0){_58c.children=[];}var _58d=_58a[_58c.nodeId];if(null!=_58d){_58d.children.push({_reference:_58c.nodeId});_58c["parent"]=_58d.nodeId;}else{this._rootItem=_58c;}for(var i=0;i<_58b.subordinates.length;i++){var _58e=_58b.subordinates[i];q.push(_58e);_58a[_58e.nodeId]=_58c;}_589.items.push(_58c);this._employeeIds.push(_58b.nodeId);}this._data=_589;this._store=new dojo.data.ItemFileWriteStore({data:this._data});},getStore:function(){return this._store;},getRootItem:function(){return this._rootItem;},isEmployee:function(_58f){for(var i=0;i<this._employeeIds.length;i++){if(this._employeeIds[i]==_58f){return true;}}return false;}});}if(!dojo._hasResource["demos.orgchart.widget.PropertiesView"]){dojo._hasResource["demos.orgchart.widget.PropertiesView"]=true;dojo.provide("demos.orgchart.widget.PropertiesView");dojo.declare("demos.orgchart.widget.PropertiesView",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"propertiesDiv\">\n  <table dojoAttachPoint=\"propertiesTable\" style=\"border-collapse: collapse;width:100%;vertical-align:top;padding:0px;margin:0px;\">\n    <tr class=\"d0\">\n      <td><b>Name</b></td>\n      <td dojoAttachPoint=\"nameCell\"></td>\n    </tr>\n    <tr class=\"d1\">\n      <td><b>Position</b></td>\n      <td dojoAttachPoint=\"positionCell\"></td>\n    </tr>\n    <tr class=\"d0\">\n      <td><b>Business Unit</b></td>\n      <td dojoAttachPoint=\"businessUnitCell\"></td>\n    </tr>\n    <tr class=\"d1\">\n      <td><b>Status</b></td>\n      <td dojoAttachPoint=\"statusCell\"></td>\n    </tr>\n    <tr class=\"d0\">\n      <td><b>Email</b></td>\n      <td dojoAttachPoint=\"emailCell\"></td>\n    </tr>\n    <tr class=\"d1\">\n      <td><b>Phone</b></td>\n      <td dojoAttachPoint=\"phoneCell\"></td>\n    </tr>\n    <tr class=\"d0\">\n      <td><b>Fax</b></td>\n      <td dojoAttachPoint=\"faxCell\"></td>\n    </tr>\n  </table>\n</div>\n",_model:null,propertiesDiv:null,propertiesTable:null,nameCell:null,positionCell:null,businessUnitCell:null,statusCell:null,emailCell:null,phoneCell:null,faxCell:null,setSelection:function(_590){dojo.connect(_590,"onAddNode",this,"onNodeSelected");},onNodeSelected:function(_591){var _592=this._model.getStore();var self=this;var _593={query:{nodeId:_591},onComplete:function(_594,_595){if(_594.length==1){var item=_594[0];self._showProperties(item);}}};_592.fetch(_593);},setModel:function(_596){this._model=_596;},_showProperties:function(item){var _597=this._model.getStore();var _598=_597.getAttributes(item);for(var i=0;i<_598.length;i++){var _599=_598[i];if(_599!="children"&&_599!="parent"&&_599!="nodeId"){var td=this[_599+"Cell"];if(td){var val=_597.getValue(item,_599);this._removeDOMChildren(td);td.appendChild(dojo.doc.createTextNode(val));}}}},_removeDOMChildren:function(_59a){while(_59a.hasChildNodes()){this._removeDOMChildren(_59a.firstChild);dojo._destroyElement(_59a.firstChild);}}});}if(!dojo._hasResource["dijit.tree.TreeStoreModel"]){dojo._hasResource["dijit.tree.TreeStoreModel"]=true;dojo.provide("dijit.tree.TreeStoreModel");dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(args){dojo.mixin(this,args);this.connects=[];var _59b=this.store;if(!_59b.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.Tree: store must support dojo.data.Identity");}if(_59b.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([dojo.connect(_59b,"onNew",this,"onNewItem"),dojo.connect(_59b,"onDelete",this,"onDeleteItem"),dojo.connect(_59b,"onSet",this,"onSetItem")]);}},destroy:function(){dojo.forEach(this.connects,dojo.disconnect);},getRoot:function(_59c,_59d){if(this.root){_59c(this.root);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_59e){if(_59e.length!=1){throw new Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+_59e.length+" items, but must return exactly one item");}this.root=_59e[0];_59c(this.root);}),onError:_59d});}},mayHaveChildren:function(item){return dojo.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr);},this);},getChildren:function(_59f,_5a0,_5a1){var _5a2=this.store;if(!_5a2.isItemLoaded(_59f)){var _5a3=dojo.hitch(this,arguments.callee);_5a2.loadItem({item:_59f,onItem:function(_5a4){_5a3(_5a4,_5a0,_5a1);},onError:_5a1});return;}var _5a5=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=_5a2.getValues(_59f,this.childrenAttrs[i]);_5a5=_5a5.concat(vals);}var _5a6=0;if(!this.deferItemLoadingUntilExpand){dojo.forEach(_5a5,function(item){if(!_5a2.isItemLoaded(item)){_5a6++;}});}if(_5a6==0){_5a0(_5a5);}else{var _5a7=function _5a7(item){if(--_5a6==0){_5a0(_5a5);}};dojo.forEach(_5a5,function(item){if(!_5a2.isItemLoaded(item)){_5a2.loadItem({item:item,onItem:_5a7,onError:_5a1});}});}},isItem:function(_5a8){return this.store.isItem(_5a8);},fetchItemByIdentity:function(_5a9){this.store.fetchItemByIdentity(_5a9);},getIdentity:function(item){return this.store.getIdentity(item);},getLabel:function(item){if(this.labelAttr){return this.store.getValue(item,this.labelAttr);}else{return this.store.getLabel(item);}},newItem:function(args,_5aa,_5ab){var _5ac={parent:_5aa,attribute:this.childrenAttrs[0],insertIndex:_5ab};if(this.newItemIdAttr&&args[this.newItemIdAttr]){this.fetchItemByIdentity({identity:args[this.newItemIdAttr],scope:this,onItem:function(item){if(item){this.pasteItem(item,null,_5aa,true,_5ab);}else{this.store.newItem(args,_5ac);}}});}else{this.store.newItem(args,_5ac);}},pasteItem:function(_5ad,_5ae,_5af,_5b0,_5b1){var _5b2=this.store,_5b3=this.childrenAttrs[0];if(_5ae){dojo.forEach(this.childrenAttrs,function(attr){if(_5b2.containsValue(_5ae,attr,_5ad)){if(!_5b0){var _5b4=dojo.filter(_5b2.getValues(_5ae,attr),function(x){return x!=_5ad;});_5b2.setValues(_5ae,attr,_5b4);}_5b3=attr;}});}if(_5af){if(typeof _5b1=="number"){var _5b5=_5b2.getValues(_5af,_5b3);_5b5.splice(_5b1,0,_5ad);_5b2.setValues(_5af,_5b3,_5b5);}else{_5b2.setValues(_5af,_5b3,_5b2.getValues(_5af,_5b3).concat(_5ad));}}},onChange:function(item){},onChildrenChange:function(_5b6,_5b7){},onDelete:function(_5b8,_5b9){},onNewItem:function(item,_5ba){if(!_5ba){return;}this.getChildren(_5ba.item,dojo.hitch(this,function(_5bb){this.onChildrenChange(_5ba.item,_5bb);}));},onDeleteItem:function(item){this.onDelete(item);},onSetItem:function(item,_5bc,_5bd,_5be){if(dojo.indexOf(this.childrenAttrs,_5bc)!=-1){this.getChildren(item,dojo.hitch(this,function(_5bf){this.onChildrenChange(item,_5bf);}));}else{this.onChange(item);}}});}if(!dojo._hasResource["dijit.tree.ForestStoreModel"]){dojo._hasResource["dijit.tree.ForestStoreModel"]=true;dojo.provide("dijit.tree.ForestStoreModel");dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_5c0){this.root={store:this,root:true,id:_5c0.rootId,label:_5c0.rootLabel,children:_5c0.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_5c1,_5c2,_5c3){if(_5c1===this.root){if(this.root.children){_5c2(this.root.children);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_5c4){this.root.children=_5c4;_5c2(_5c4);}),onError:_5c3});}}else{this.inherited(arguments);}},isItem:function(_5c5){return (_5c5===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_5c6){if(_5c6.identity==this.root.id){var _5c7=_5c6.scope?_5c6.scope:dojo.global;if(_5c6.onItem){_5c6.onItem.call(_5c7,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_5c8,_5c9){if(_5c8===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(args){},pasteItem:function(_5ca,_5cb,_5cc,_5cd,_5ce){if(_5cb===this.root){if(!_5cd){this.onLeaveRoot(_5ca);}}dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,_5ca,_5cb===this.root?null:_5cb,_5cc===this.root?null:_5cc,_5cd,_5ce);if(_5cc===this.root){this.onAddToRoot(_5ca);}},onAddToRoot:function(item){console.log(this,": item ",item," added to root");},onLeaveRoot:function(item){console.log(this,": item ",item," removed from root");},_requeryTop:function(){var _5cf=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_5d0){this.root.children=_5d0;if(_5cf.length!=_5d0.length||dojo.some(_5cf,function(item,idx){return _5d0[idx]!=item;})){this.onChildrenChange(this.root,_5d0);}})});},onNewItem:function(item,_5d1){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(dojo.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);}});}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(_5d2,_5d3){var rxp="^";var c=null;for(var i=0;i<_5d2.length;i++){c=_5d2.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_5d2.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_5d3){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_5d4,_5d5){var _5d6=[];function _5d7(attr,dir,comp,s){return function(_5d8,_5d9){var a=s.getValue(_5d8,attr);var b=s.getValue(_5d9,attr);return dir*comp(a,b);};};var _5da;var map=_5d5.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<_5d4.length;i++){_5da=_5d4[i];var attr=_5da.attribute;if(attr){var dir=(_5da.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_5d6.push(_5d7(attr,dir,comp,_5d5));}}return function(rowA,rowB){var i=0;while(i<_5d6.length){var ret=_5d6[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(_5db){_5db=_5db||{};if(!_5db.store){_5db.store=this;}var self=this;var _5dc=function(_5dd,_5de){if(_5de.onError){var _5df=_5de.scope||dojo.global;_5de.onError.call(_5df,_5dd,_5de);}};var _5e0=function(_5e1,_5e2){var _5e3=_5e2.abort||null;var _5e4=false;var _5e5=_5e2.start?_5e2.start:0;var _5e6=(_5e2.count&&(_5e2.count!==Infinity))?(_5e5+_5e2.count):_5e1.length;_5e2.abort=function(){_5e4=true;if(_5e3){_5e3.call(_5e2);}};var _5e7=_5e2.scope||dojo.global;if(!_5e2.store){_5e2.store=self;}if(_5e2.onBegin){_5e2.onBegin.call(_5e7,_5e1.length,_5e2);}if(_5e2.sort){_5e1.sort(dojo.data.util.sorter.createSortFunction(_5e2.sort,self));}if(_5e2.onItem){for(var i=_5e5;(i<_5e1.length)&&(i<_5e6);++i){var item=_5e1[i];if(!_5e4){_5e2.onItem.call(_5e7,item,_5e2);}}}if(_5e2.onComplete&&!_5e4){var _5e8=null;if(!_5e2.onItem){_5e8=_5e1.slice(_5e5,_5e6);}_5e2.onComplete.call(_5e7,_5e8,_5e2);}};this._fetchItems(_5db,_5e0,_5dc);return _5db;};}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_5e9){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_5e9.url;this._ccUrl=_5e9.url;this.url=_5e9.url;this._jsonData=_5e9.data;this.data=null;this._datatypeMap=_5e9.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_5ea){return dojo.date.stamp.fromISOString(_5ea);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_5e9.urlPreventCache!==undefined){this.urlPreventCache=_5e9.urlPreventCache?true:false;}if(_5e9.hierarchical!==undefined){this.hierarchical=_5e9.hierarchical?true:false;}if(_5e9.clearOnClose){this.clearOnClose=true;}if("failOk" in _5e9){this.failOk=_5e9.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}},_assertIsAttribute:function(_5eb){if(typeof _5eb!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_5ec,_5ed){var _5ee=this.getValues(item,_5ec);return (_5ee.length>0)?_5ee[0]:_5ed;},getValues:function(item,_5ef){this._assertIsItem(item);this._assertIsAttribute(_5ef);return item[_5ef]||[];},getAttributes:function(item){this._assertIsItem(item);var _5f0=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_5f0.push(key);}}return _5f0;},hasAttribute:function(item,_5f1){this._assertIsItem(item);this._assertIsAttribute(_5f1);return (_5f1 in item);},containsValue:function(item,_5f2,_5f3){var _5f4=undefined;if(typeof _5f3==="string"){_5f4=dojo.data.util.filter.patternToRegExp(_5f3,false);}return this._containsValue(item,_5f2,_5f3,_5f4);},_containsValue:function(item,_5f5,_5f6,_5f7){return dojo.some(this.getValues(item,_5f5),function(_5f8){if(_5f8!==null&&!dojo.isObject(_5f8)&&_5f7){if(_5f8.toString().match(_5f7)){return true;}}else{if(_5f6===_5f8){return true;}}});},isItem:function(_5f9){if(_5f9&&_5f9[this._storeRefPropName]===this){if(this._arrayOfAllItems[_5f9[this._itemNumPropName]]===_5f9){return true;}}return false;},isItemLoaded:function(_5fa){return this.isItem(_5fa);},loadItem:function(_5fb){this._assertIsItem(_5fb.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_5fc,_5fd,_5fe){var self=this;var _5ff=function(_600,_601){var _602=[];var i,key;if(_600.query){var _603;var _604=_600.queryOptions?_600.queryOptions.ignoreCase:false;var _605={};for(key in _600.query){_603=_600.query[key];if(typeof _603==="string"){_605[key]=dojo.data.util.filter.patternToRegExp(_603,_604);}else{if(_603 instanceof RegExp){_605[key]=_603;}}}for(i=0;i<_601.length;++i){var _606=true;var _607=_601[i];if(_607===null){_606=false;}else{for(key in _600.query){_603=_600.query[key];if(!self._containsValue(_607,key,_603,_605[key])){_606=false;}}}if(_606){_602.push(_607);}}_5fd(_602,_600);}else{for(i=0;i<_601.length;++i){var item=_601[i];if(item!==null){_602.push(item);}}_5fd(_602,_600);}};if(this._loadFinished){_5ff(_5fc,this._getItemsArray(_5fc.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_5fc,filter:_5ff});}else{this._loadInProgress=true;var _608={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _609=dojo.xhrGet(_608);_609.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_5ff(_5fc,self._getItemsArray(_5fc.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_5fe(e,_5fc);}});_609.addErrback(function(_60a){self._loadInProgress=false;_5fe(_60a,_5fc);});var _60b=null;if(_5fc.abort){_60b=_5fc.abort;}_5fc.abort=function(){var df=_609;if(df&&df.fired===-1){df.cancel();df=null;}if(_60b){_60b.call(_5fc);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_5ff(_5fc,this._getItemsArray(_5fc.queryOptions));}catch(e){_5fe(e,_5fc);}}else{_5fe(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_5fc);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _60c=this._queuedFetches[i];var _60d=_60c.args;var _60e=_60c.filter;if(_60e){_60e(_60d,this._getItemsArray(_60d.queryOptions));}else{this.fetchItemByIdentity(_60d);}}this._queuedFetches=[];}},_getItemsArray:function(_60f){if(_60f&&_60f.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_610){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug("dojo.data.ItemFileReadStore: WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_611){var _612=false;var self=this;function _613(_614){var _615=((_614!==null)&&(typeof _614==="object")&&(!dojo.isArray(_614)||_612)&&(!dojo.isFunction(_614))&&(_614.constructor==Object||dojo.isArray(_614))&&(typeof _614._reference==="undefined")&&(typeof _614._type==="undefined")&&(typeof _614._value==="undefined")&&self.hierarchical);return _615;};function _616(_617){self._arrayOfAllItems.push(_617);for(var _618 in _617){var _619=_617[_618];if(_619){if(dojo.isArray(_619)){var _61a=_619;for(var k=0;k<_61a.length;++k){var _61b=_61a[k];if(_613(_61b)){_616(_61b);}}}else{if(_613(_619)){_616(_619);}}}}};this._labelAttr=_611.label;var i;var item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_611.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item)){_612=true;}_616(item);item[this._rootItemPropName]=true;}var _61c={};var key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _61d=item[key];if(_61d!==null){if(!dojo.isArray(_61d)){item[key]=[_61d];}}else{item[key]=[null];}}_61c[key]=key;}}while(_61c[this._storeRefPropName]){this._storeRefPropName+="_";}while(_61c[this._itemNumPropName]){this._itemNumPropName+="_";}while(_61c[this._reverseRefMap]){this._reverseRefMap+="_";}var _61e;var _61f=_611.identifier;if(_61f){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_61f;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_61e=item[_61f];var _620=_61e[0];if(!this._itemsByIdentity[_620]){this._itemsByIdentity[_620]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_61f+"].  Value collided: ["+_620+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_61f+"].  Value collided: ["+_620+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_61e=item[key];for(var j=0;j<_61e.length;++j){_61d=_61e[j];if(_61d!==null&&typeof _61d=="object"){if(("_type" in _61d)&&("_value" in _61d)){var type=_61d._type;var _621=this._datatypeMap[type];if(!_621){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(dojo.isFunction(_621)){_61e[j]=new _621(_61d._value);}else{if(dojo.isFunction(_621.deserialize)){_61e[j]=_621.deserialize(_61d._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_61d._reference){var _622=_61d._reference;if(!dojo.isObject(_622)){_61e[j]=this._itemsByIdentity[_622];}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _623=this._arrayOfAllItems[k];var _624=true;for(var _625 in _622){if(_623[_625]!=_622[_625]){_624=false;}}if(_624){_61e[j]=_623;}}}if(this.referenceIntegrity){var _626=_61e[j];if(this.isItem(_626)){this._addReferenceToMap(_626,item,key);}}}else{if(this.isItem(_61d)){if(this.referenceIntegrity){this._addReferenceToMap(_61d,item,key);}}}}}}}},_addReferenceToMap:function(_627,_628,_629){},getIdentity:function(item){var _62a=this._features["dojo.data.api.Identity"];if(_62a===Number){return item[this._itemNumPropName];}else{var _62b=item[_62a];if(_62b){return _62b[0];}}return null;},fetchItemByIdentity:function(_62c){var item;var _62d;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_62c});}else{this._loadInProgress=true;var _62e={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _62f=dojo.xhrGet(_62e);_62f.addCallback(function(data){var _630=_62c.scope?_62c.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_62c.identity);if(_62c.onItem){_62c.onItem.call(_630,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_62c.onError){_62c.onError.call(_630,error);}}});_62f.addErrback(function(_631){self._loadInProgress=false;if(_62c.onError){var _632=_62c.scope?_62c.scope:dojo.global;_62c.onError.call(_632,_631);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_62c.identity);if(_62c.onItem){_62d=_62c.scope?_62c.scope:dojo.global;_62c.onItem.call(_62d,item);}}}}else{item=this._getItemByIdentity(_62c.identity);if(_62c.onItem){_62d=_62c.scope?_62c.scope:dojo.global;_62c.onItem.call(_62d,item);}}},_getItemByIdentity:function(_633){var item=null;if(this._itemsByIdentity){item=this._itemsByIdentity[_633];}else{item=this._arrayOfAllItems[_633];}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _634=this._features["dojo.data.api.Identity"];if(_634===Number){return null;}else{return [_634];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _635={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _636=dojo.xhrGet(_635);_636.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_636.addErrback(function(_637){throw _637;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(_638){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return dojo.date.stamp.toISOString(obj,{zulu:true});};}if(_638&&(_638.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_639){if(!_639){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){var _63a=this.getFeatures()["dojo.data.api.Identity"];return _63a;},newItem:function(_63b,_63c){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _63b!="object"&&typeof _63b!="undefined"){throw new Error("newItem() was passed something other than an object");}var _63d=null;var _63e=this._getIdentifierAttribute();if(_63e===Number){_63d=this._arrayOfAllItems.length;}else{_63d=_63b[_63e];if(typeof _63d==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(dojo.isArray(_63d)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_63d]==="undefined");}this._assert(typeof this._pending._newItems[_63d]==="undefined");this._assert(typeof this._pending._deletedItems[_63d]==="undefined");var _63f={};_63f[this._storeRefPropName]=this;_63f[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_63d]=_63f;_63f[_63e]=[_63d];}this._arrayOfAllItems.push(_63f);var _640=null;if(_63c&&_63c.parent&&_63c.attribute){_640={item:_63c.parent,attribute:_63c.attribute,oldValue:undefined};var _641=this.getValues(_63c.parent,_63c.attribute);if(_641&&_641.length>0){var _642=_641.slice(0,_641.length);if(_641.length===1){_640.oldValue=_641[0];}else{_640.oldValue=_641.slice(0,_641.length);}_642.push(_63f);this._setValueOrValues(_63c.parent,_63c.attribute,_642,false);_640.newValue=this.getValues(_63c.parent,_63c.attribute);}else{this._setValueOrValues(_63c.parent,_63c.attribute,_63f,false);_640.newValue=_63f;}}else{_63f[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_63f);}this._pending._newItems[_63d]=_63f;for(var key in _63b){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _643=_63b[key];if(!dojo.isArray(_643)){_643=[_643];}_63f[key]=_643;if(this.referenceIntegrity){for(var i=0;i<_643.length;i++){var val=_643[i];if(this.isItem(val)){this._addReferenceToMap(val,_63f,key);}}}}this.onNew(_63f,_640);return _63f;},_removeArrayElement:function(_644,_645){var _646=dojo.indexOf(_644,_645);if(_646!=-1){_644.splice(_646,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _647=item[this._itemNumPropName];var _648=this.getIdentity(item);if(this.referenceIntegrity){var _649=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=dojo.clone(item[this._reverseRefMap]);}dojo.forEach(_649,function(_64a){dojo.forEach(this.getValues(item,_64a),function(_64b){if(this.isItem(_64b)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_64b),attr:_64a});this._removeReferenceFromMap(_64b,item,_64a);}},this);},this);var _64c=item[this._reverseRefMap];if(_64c){for(var _64d in _64c){var _64e=null;if(this._itemsByIdentity){_64e=this._itemsByIdentity[_64d];}else{_64e=this._arrayOfAllItems[_64d];}if(_64e){for(var _64f in _64c[_64d]){var _650=this.getValues(_64e,_64f)||[];var _651=dojo.filter(_650,function(_652){return !(this.isItem(_652)&&this.getIdentity(_652)==_648);},this);this._removeReferenceFromMap(item,_64e,_64f);if(_651.length<_650.length){this._setValueOrValues(_64e,_64f,_651,true);}}}}}}this._arrayOfAllItems[_647]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_648];}this._pending._deletedItems[_648]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_653,_654){return this._setValueOrValues(item,_653,_654,true);},setValues:function(item,_655,_656){return this._setValueOrValues(item,_655,_656,true);},unsetAttribute:function(item,_657){return this._setValueOrValues(item,_657,[],true);},_setValueOrValues:function(item,_658,_659,_65a){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(dojo.isString(_658));this._assert(typeof _659!=="undefined");var _65b=this._getIdentifierAttribute();if(_658==_65b){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _65c=this._getValueOrValues(item,_658);var _65d=this.getIdentity(item);if(!this._pending._modifiedItems[_65d]){var _65e={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_65e[key]=item[key];}else{if(key===this._reverseRefMap){_65e[key]=dojo.clone(item[key]);}else{_65e[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_65d]=_65e;}var _65f=false;if(dojo.isArray(_659)&&_659.length===0){_65f=delete item[_658];_659=undefined;if(this.referenceIntegrity&&_65c){var _660=_65c;if(!dojo.isArray(_660)){_660=[_660];}for(var i=0;i<_660.length;i++){var _661=_660[i];if(this.isItem(_661)){this._removeReferenceFromMap(_661,item,_658);}}}}else{var _662;if(dojo.isArray(_659)){var _663=_659;_662=_659.slice(0,_659.length);}else{_662=[_659];}if(this.referenceIntegrity){if(_65c){var _660=_65c;if(!dojo.isArray(_660)){_660=[_660];}var map={};dojo.forEach(_660,function(_664){if(this.isItem(_664)){var id=this.getIdentity(_664);map[id.toString()]=true;}},this);dojo.forEach(_662,function(_665){if(this.isItem(_665)){var id=this.getIdentity(_665);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_665,item,_658);}}},this);for(var rId in map){var _666;if(this._itemsByIdentity){_666=this._itemsByIdentity[rId];}else{_666=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_666,item,_658);}}else{for(var i=0;i<_662.length;i++){var _661=_662[i];if(this.isItem(_661)){this._addReferenceToMap(_661,item,_658);}}}}item[_658]=_662;_65f=true;}if(_65a){this.onSet(item,_658,_65c,_659);}return _65f;},_addReferenceToMap:function(_667,_668,_669){var _66a=this.getIdentity(_668);var _66b=_667[this._reverseRefMap];if(!_66b){_66b=_667[this._reverseRefMap]={};}var _66c=_66b[_66a];if(!_66c){_66c=_66b[_66a]={};}_66c[_669]=true;},_removeReferenceFromMap:function(_66d,_66e,_66f){var _670=this.getIdentity(_66e);var _671=_66d[this._reverseRefMap];var _672;if(_671){for(_672 in _671){if(_672==_670){delete _671[_672][_66f];if(this._isEmpty(_671[_672])){delete _671[_672];}}}if(this._isEmpty(_671)){delete _66d[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){console.log("Item: ["+this.getIdentity(item)+"] is referenced by: "+dojo.toJson(item[this._reverseRefMap]));}}},_getValueOrValues:function(item,_673){var _674=undefined;if(this.hasAttribute(item,_673)){var _675=this.getValues(item,_673);if(_675.length==1){_674=_675[0];}else{_674=_675;}}return _674;},_flatten:function(_676){if(this.isItem(_676)){var item=_676;var _677=this.getIdentity(item);var _678={_reference:_677};return _678;}else{if(typeof _676==="object"){for(var type in this._datatypeMap){var _679=this._datatypeMap[type];if(dojo.isObject(_679)&&!dojo.isFunction(_679)){if(_676 instanceof _679.type){if(!_679.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_679.serialize(_676)};}}else{if(_676 instanceof _679){return {_type:type,_value:_676.toString()};}}}}return _676;}},_getNewFileContentString:function(){var _67a={};var _67b=this._getIdentifierAttribute();if(_67b!==Number){_67a.identifier=_67b;}if(this._labelAttr){_67a.label=this._labelAttr;}_67a.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _67c={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _67d=key;var _67e=this.getValues(item,_67d);if(_67e.length==1){_67c[_67d]=this._flatten(_67e[0]);}else{var _67f=[];for(var j=0;j<_67e.length;++j){_67f.push(this._flatten(_67e[j]));_67c[_67d]=_67f;}}}}_67a.items.push(_67c);}}var _680=true;return dojo.toJson(_67a,_680);},_isEmpty:function(_681){var _682=true;if(dojo.isObject(_681)){var i;for(i in _681){_682=false;break;}}else{if(dojo.isArray(_681)){if(_681.length>0){_682=false;}}}return _682;},save:function(_683){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _684=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_683&&_683.onComplete){var _685=_683.scope||dojo.global;_683.onComplete.call(_685);}};var _686=function(err){self._saveInProgress=false;if(_683&&_683.onError){var _687=_683.scope||dojo.global;_683.onError.call(_687,err);}};if(this._saveEverything){var _688=this._getNewFileContentString();this._saveEverything(_684,_686,_688);}if(this._saveCustom){this._saveCustom(_684,_686);}if(!this._saveEverything&&!this._saveCustom){_684();}},revert:function(){this._assert(!this._saveInProgress);var _689;for(_689 in this._pending._modifiedItems){var _68a=this._pending._modifiedItems[_689];var _68b=null;if(this._itemsByIdentity){_68b=this._itemsByIdentity[_689];}else{_68b=this._arrayOfAllItems[_689];}_68a[this._storeRefPropName]=this;for(key in _68b){delete _68b[key];}dojo.mixin(_68b,_68a);}var _68c;for(_689 in this._pending._deletedItems){_68c=this._pending._deletedItems[_689];_68c[this._storeRefPropName]=this;var _68d=_68c[this._itemNumPropName];if(_68c["backup_"+this._reverseRefMap]){_68c[this._reverseRefMap]=_68c["backup_"+this._reverseRefMap];delete _68c["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_68d]=_68c;if(this._itemsByIdentity){this._itemsByIdentity[_689]=_68c;}if(_68c[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_68c);}}for(_689 in this._pending._deletedItems){_68c=this._pending._deletedItems[_689];if(_68c["backupRefs_"+this._reverseRefMap]){dojo.forEach(_68c["backupRefs_"+this._reverseRefMap],function(_68e){var _68f;if(this._itemsByIdentity){_68f=this._itemsByIdentity[_68e.id];}else{_68f=this._arrayOfAllItems[_68e.id];}this._addReferenceToMap(_68f,_68c,_68e.attr);},this);delete _68c["backupRefs_"+this._reverseRefMap];}}for(_689 in this._pending._newItems){var _690=this._pending._newItems[_689];_690[this._storeRefPropName]=null;this._arrayOfAllItems[_690[this._itemNumPropName]]=null;if(_690[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_690);}if(this._itemsByIdentity){delete this._itemsByIdentity[_689];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _691=this.getIdentity(item);return new Boolean(this._pending._newItems[_691]||this._pending._modifiedItems[_691]||this._pending._deletedItems[_691]).valueOf();}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)){return true;}return false;}},onSet:function(item,_692,_693,_694){},onNew:function(_695,_696){},onDelete:function(_697){},close:function(_698){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});}if(!dojo._hasResource["demos.orgchart.widget.StructureView"]){dojo._hasResource["demos.orgchart.widget.StructureView"]=true;dojo.provide("demos.orgchart.widget.StructureView");dojo.declare("demos.orgchart.widget.StructureView",[dijit._Widget,dijit._Templated],{canvasId:"",model:null,tree:null,treeModel:null,canvas:null,_selection:null,_lateInitHandle:null,_inputMode:null,templateString:"<div>\n  <div id=\"treeDiv\" dojoAttachPoint=\"treeDiv\"></div>\n</div>\n",_keyPressedNodeId:null,postCreate:function(){var id=this.canvasId;if(!this.canvas){this.canvas=dijit.byId(this.canvasId);}if(this.canvas==null){this._lateInitHandle=this.connect(dijit.registry,"add","lateInitialization");}else{this.initCanvas();}},lateInitialization:function(_699){if(_699.id==this.canvasId){this.canvas=_699;this.disconnect(this._lateInitHandle);this.initCanvas();}},initCanvas:function(){dojo.connect(this.canvas,"onClickNode",this,"onCanvasNodeClicked");},setSelection:function(_69a){this._selection=_69a;},setInputMode:function(_69b){this._inputMode=_69b;},onCanvasNodeClicked:function(_69c){var _69d=this.tree.lastFocused;if(_69d){var item=_69d.item;var _69e=this.model.getStore().getValue(item,"nodeId");if(_69e==_69c||this._keyPressedNodeId==_69c){return;}}var self=this;var _69f={query:{nodeId:_69c},onComplete:function(_6a0,_6a1){if(_6a0.length==1){var item=_6a0[0];var path=[self.model.getStore().getValue(item,"nodeId")];self._focusItem(item,path);}}};this.model.getStore().fetch(_69f);},_focusItem:function(item,path){var _6a2=this.model.getStore().getValue(item,"parent");if(_6a2){var self=this;var _6a3={query:{nodeId:_6a2},onComplete:function(_6a4,_6a5){if(_6a4.length==1){var item=_6a4[0];path.push(self.model.getStore().getValue(item,"nodeId"));self._focusItem(item,path);}}};this.model.getStore().fetch(_6a3);}else{if(path.length>1){path.reverse();this.tree.attr("path",path);}else{this.tree.focusNode(this.tree.rootNode);}}},setModel:function(_6a6){this.model=_6a6;this.treeModel=new dijit.tree.TreeStoreModel({store:_6a6.getStore(),query:{nodeId:_6a6.getRootItem().nodeId}});this.tree=new dijit.Tree({persist:false,model:this.treeModel,onClick:dojo.hitch(this,"_onTreeNodeClicked")},"treeDiv");dojo.connect(this.tree,"_onEnterKey",this,"_onTreeEnterKey");},_onTreeNodeClicked:function(item){var _6a7=this.model.getStore().getValue(item,"nodeId");if(null!=this._selection){this._selection.clear();this._selection.add(_6a7);}this.centerNode(_6a7);},_onTreeEnterKey:function(_6a8,evt){var item=_6a8.item;var _6a9=this.model.getStore().getValue(item,"nodeId");if(null!=this._selection){this._selection.clear();this._selection.add(_6a9);}this._inputMode.zoomOnNode(_6a9);},centerNode:function(_6aa){var zoom=this.canvas.zoom;var _6ab=this.canvas.getHitTest();var _6ac=_6ab.getBoundsForId(_6aa);if(null!=_6ac){var w=(_6ac.maxX-_6ac.minX);var h=(_6ac.maxY-_6ac.minY);var _6ad=_6ac.minX+0.5*w;var _6ae=_6ac.minY+0.5*h;var vx=_6ad*zoom;var vy=_6ae*zoom;this.canvas.center(vx,vy);this.canvas.recalculateTiles();}}});}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},_setDisabledAttr:function(_6af){this.disabled=_6af;dojo.attr(this.focusNode,"disabled",_6af);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_6af);}dijit.setWaiState(this.focusNode,"disabled",_6af);if(_6af){this._hovering=false;this._active=false;this.focusNode.setAttribute("tabIndex","-1");}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}this._setStateClass();},setDisabled:function(_6b0){dojo.deprecated("setDisabled("+_6b0+") is deprecated. Use attr('disabled',"+_6b0+") instead.","","2.0");this.attr("disabled",_6b0);},_onFocus:function(e){if(this.scrollOnFocus){dijit.scrollIntoView(this.domNode);}this.inherited(arguments);},_onMouse:function(_6b1){var _6b2=_6b1.currentTarget;if(_6b2&&_6b2.getAttribute){this.stateModifier=_6b2.getAttribute("stateModifier")||"";}if(!this.disabled){switch(_6b1.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseout":case "mouseleave":this._hovering=false;this._active=false;break;case "mousedown":this._active=true;this._mouseDown=true;var _6b3=this.connect(dojo.body(),"onmouseup",function(){if(this._mouseDown&&this.isFocusable()){this.focus();}this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(_6b3);});break;}this._setStateClass();}},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){dijit.focus(this.focusNode);},_setStateClass:function(){var _6b4=this.baseClass.split(" ");function _6b5(_6b6){_6b4=_6b4.concat(dojo.map(_6b4,function(c){return c+_6b6;}),"dijit"+_6b6);};if(this.checked){_6b5("Checked");}if(this.state){_6b5(this.state);}if(this.selected){_6b5("Selected");}if(this.disabled){_6b5("Disabled");}else{if(this.readOnly){_6b5("ReadOnly");}else{if(this._active){_6b5(this.stateModifier+"Active");}else{if(this._focused){_6b5("Focused");}if(this._hovering){_6b5(this.stateModifier+"Hover");}}}}var tn=this.stateNode||this.domNode,_6b7={};dojo.forEach(tn.className.split(" "),function(c){_6b7[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _6b7[c];});}dojo.forEach(_6b4,function(c){_6b7[c]=true;});var _6b8=[];for(var c in _6b7){_6b8.push(c);}tn.className=_6b8.join(" ");this._stateClasses=_6b4;},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_6b9){},_onChangeActive:false,_handleOnChange:function(_6ba,_6bb){this._lastValue=_6ba;if(this._lastValueReported==undefined&&(_6bb===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_6ba;}if((this.intermediateChanges||_6bb||_6bb===undefined)&&((typeof _6ba!=typeof this._lastValueReported)||this.compare(_6ba,this._lastValueReported)!=0)){this._lastValueReported=_6ba;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_6ba);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass();},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function(_6bc){dojo.deprecated("dijit.form._FormWidget:setValue("+_6bc+") is deprecated.  Use attr('value',"+_6bc+") instead.","","2.0");this.attr("value",_6bc);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(_6bd){this.readOnly=_6bd;dojo.attr(this.focusNode,"readOnly",_6bd);dijit.setWaiState(this.focusNode,"readonly",_6bd);this._setStateClass();},postCreate:function(){if(dojo.isIE){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}},_setValueAttr:function(_6be,_6bf){this.value=_6be;this._handleOnChange(_6be,_6bf);},_getValueAttr:function(){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_layoutHackIE7:function(){if(dojo.isIE==7){var _6c0=this.domNode;var _6c1=_6c0.parentNode;var _6c2=_6c0.firstChild||_6c0;var _6c3=_6c2.style.filter;while(_6c1&&_6c1.clientHeight==0){_6c1._disconnectHandle=this.connect(_6c1,"onscroll",dojo.hitch(this,function(e){this.disconnect(_6c1._disconnectHandle);_6c1.removeAttribute("_disconnectHandle");_6c2.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_6c2.style.filter=_6c3;},0);}));_6c1=_6c1.parentNode;}}}});}if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouse:function(e){if(e.type=="click"&&!this._seenKeydown){return;}this._seenKeydown=false;if(e.type=="mousedown"){this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseup");}if(this.disabled||this.readOnly){return;}if(this._stopClickEvents){dojo.stopEvent(e);}this.toggleDropDown();if(e.type=="click"||e.type=="keypress"){this._onDropDownMouseup();}},_onDropDownMouseup:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _6c4=this.dropDown,_6c5=false;if(e&&this._opened){var c=dojo.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_6c5){if(dojo.hasClass(t,"dijitPopup")){_6c5=true;}else{t=t.parentNode;}}if(_6c5){t=e.target;if(_6c4.onItemClick){var _6c6;while(t&&!(_6c6=dijit.byNode(t))){t=t.parentNode;}if(_6c6&&_6c6.onClick&&_6c6.getParent){_6c6.getParent().onItemClick(_6c6,e);}}return;}}}if(this._opened&&_6c4.focus){window.setTimeout(dojo.hitch(_6c4,"focus"),1);}},_setupDropdown:function(){this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;this._aroundNode=this._aroundNode||this.domNode;this.connect(this._buttonNode,"onmousedown","_onDropDownMouse");this.connect(this._buttonNode,"onclick","_onDropDownMouse");this.connect(this._buttonNode,"onkeydown","_onDropDownKeydown");this.connect(this._buttonNode,"onblur","_onDropDownBlur");this.connect(this._buttonNode,"onkeypress","_onKey");if(this._setStateClass){this.connect(this,"openDropDown","_setStateClass");this.connect(this,"closeDropDown","_setStateClass");}var _6c7={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+_6c7+"ArrowButton");},postCreate:function(){this._setupDropdown();this.inherited(arguments);},destroyDescendants:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onDropDownKeydown:function(e){this._seenKeydown=true;},_onKeyPress:function(e){if(this._opened&&e.charOrCode==dojo.keys.ESCAPE&&!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.toggleDropDown();dojo.stopEvent(e);return;}this.inherited(arguments);},_onDropDownBlur:function(e){this._seenKeydown=false;},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){return;}}if(d&&this._opened&&e.keyCode==dojo.keys.ESCAPE){this.toggleDropDown();return;}if(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER||e.charOrCode==" "){this._onDropDownMouse(e);}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_6c8){_6c8();},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}this.focus();var _6c9=this.dropDown;if(!_6c9){return;}if(!this._opened){if(!this.isLoaded()){this.loadDropDown(dojo.hitch(this,"openDropDown"));return;}else{this.openDropDown();}}else{this.closeDropDown();}},openDropDown:function(){var _6ca=this.dropDown;var _6cb=_6ca.domNode;var self=this;if(!this._preparedNode){dijit.popup.moveOffScreen(_6cb);this._preparedNode=true;if(_6cb.style.width){this._explicitDDWidth=true;}if(_6cb.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _6cc={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_6cc.width="";}if(!this._explicitDDHeight){_6cc.height="";}dojo.style(_6cb,_6cc);var mb=dojo.marginBox(_6cb);var _6cd=(this.maxHeight&&mb.h>this.maxHeight);dojo.style(_6cb,{overflow:_6cd?"auto":"hidden"});if(this.forceWidth){mb.w=this.domNode.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,this.domNode.offsetWidth);}else{delete mb.w;}}if(_6cd){mb.h=this.maxHeight;if("w" in mb){mb.w+=16;}}else{delete mb.h;}delete mb.t;delete mb.l;if(dojo.isFunction(_6ca.resize)){_6ca.resize(mb);}else{dojo.marginBox(_6cb,mb);}}var _6ce=dijit.popup.open({parent:this,popup:_6ca,around:this._aroundNode,orient:dijit.getPopupAroundAlignment((this.dropDownPosition&&this.dropDownPosition.length)?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){dojo.attr(self._popupStateNode,"popupActive",false);dojo.removeClass(self._popupStateNode,"dijitHasDropDownOpen");self._opened=false;self.state="";}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(self._popupStateNode,"dijitHasDropDownOpen");this._opened=true;this.state="Opened";return _6ce;},closeDropDown:function(_6cf){if(this._opened){dijit.popup.close(this.dropDown);if(_6cf){this.focus();}this._opened=false;this.state="";}}});}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html","<span class=\"dijit dijitReset dijitLeft dijitInline\"\n\tdojoAttachEvent=\"onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\n\t><span class=\"dijitReset dijitRight dijitInline\"\n\t\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\t\tdojoAttachPoint=\"titleNode,focusNode\"\n\t\t\t\t${nameAttrSetting} type=\"${type}\" value=\"${value}\" waiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t\t><span class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\"\n\t\t\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#10003;</span\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\t\tid=\"${id}_label\"\n\t\t\t\t\tdojoAttachPoint=\"containerNode\"\n\t\t\t\t></span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n"),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),_onClick:function(e){if(this.disabled){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!this.focusNode.form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _6d0=dijit.byNode(node);if(_6d0&&typeof _6d0._onSubmit=="function"){_6d0._onSubmit(e);break;}}}}},_setValueAttr:function(_6d1){var attr=this.attributeMap.value||"";if(this[attr.node||attr||"domNode"].tagName=="BUTTON"){if(_6d1!=this.value){console.debug("Cannot change the value attribute on a Button widget.");}}},_fillContent:function(_6d2){if(_6d2&&(!this.params||!("label" in this.params))){this.attr("label",_6d2.innerHTML);}},postCreate:function(){dojo.setSelectable(this.focusNode,false);this.inherited(arguments);},_setShowLabelAttr:function(val){if(this.containerNode){dojo.toggleClass(this.containerNode,"dijitDisplayNone",!val);}this.showLabel=val;},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_6d3){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_6d3);},_setLabelAttr:function(_6d4){this.containerNode.innerHTML=this.label=_6d4;if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html","<span class=\"dijit dijitReset dijitLeft dijitInline\"\n\tdojoAttachPoint=\"_buttonNode\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\n\t><span class='dijitReset dijitRight dijitInline'\n\t\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\t\t${nameAttrSetting} type=\"${type}\" value=\"${value}\"\n\t\t\t\tdojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\t\twaiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\n\t\t\t\t><span class=\"dijitReset dijitInline\"\n\t\t\t\t\tdojoAttachPoint=\"iconNode\"\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\t\tdojoAttachPoint=\"containerNode,_popupStateNode\"\n\t\t\t\t\tid=\"${id}_label\"\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\">&thinsp;</span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n"),_fillContent:function(){if(this.srcNodeRef){var _6d5=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,_6d5[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown){var _6d6=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(_6d6);delete this.dropDownContainer;}this.inherited(arguments);},isLoaded:function(){var _6d7=this.dropDown;return (!_6d7.href||_6d7.isLoaded);},loadDropDown:function(){var _6d8=this.dropDown;if(!_6d8){return;}if(!this.isLoaded()){var _6d9=dojo.connect(_6d8,"onLoad",function(){dojo.disconnect(_6d9);this.openDropDown();});_6d8.refresh();}else{this.openDropDown();}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html","<table class='dijit dijitReset dijitInline dijitLeft'\n\tcellspacing='0' cellpadding='0' waiRole=\"presentation\"\n\t><tbody waiRole=\"presentation\"><tr waiRole=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\"><button id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdojoAttachEvent=\"onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onkeypress:_onButtonKeyPress\"  dojoAttachPoint=\"titleNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\" waiRole=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" waiRole=\"presentation\"></div\n\t\t></button></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdojoAttachPoint=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onkeypress:_onArrowKeyPress\"\n\t\t\tstateModifier=\"DownArrow\"\n\t\t\ttitle=\"${optionsTitle}\" ${nameAttrSetting}\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" waiRole=\"presentation\">&thinsp;</div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" waiRole=\"presentation\">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this._popupStateNode];var isIE=dojo.isIE;dojo.forEach(this._focalNodes,dojo.hitch(this,function(node){this.connect(node,isIE?"onactivate":"onfocus",this._onNodeFocus);this.connect(node,isIE?"ondeactivate":"onblur",this._onNodeBlur);}));if(isIE&&(isIE<8||dojo.isQuirks)){with(this.titleNode){style.width=scrollWidth+"px";this.connect(this.titleNode,"onresize",function(){setTimeout(function(){style.width=scrollWidth+"px";},0);});}}},_onNodeFocus:function(evt){this._focusedNode=evt.currentTarget;var fnc=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.addClass(this._focusedNode,fnc);},_onNodeBlur:function(evt){var fnc=evt.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.removeClass(evt.currentTarget,fnc);},_onBlur:function(){this.inherited(arguments);this._focusedNode=null;},_onButtonKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(evt);}},focus:function(_6da){dijit.focus(_6da=="start"?this.titleNode:this._popupStateNode);}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.attr("checked",!this.checked);},_setCheckedAttr:function(_6db){this.checked=_6db;dojo.attr(this.focusNode||this.domNode,"checked",_6db);dijit.setWaiState(this.focusNode||this.domNode,"pressed",_6db);this._setStateClass();this._handleOnChange(_6db,true);},setChecked:function(_6dc){dojo.deprecated("setChecked("+_6dc+") is deprecated. Use attr('checked',"+_6dc+") instead.","","2.0");this.attr("checked",_6dc);},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);}});}if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:dojo.cache("dijit.form","templates/CheckBox.html","<div class=\"dijitReset dijitInline\" waiRole=\"presentation\"\n\t><input\n\t \t${nameAttrSetting} type=\"${type}\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdojoAttachPoint=\"focusNode\"\n\t \tdojoAttachEvent=\"onmouseover:_onMouse,onmouseout:_onMouse,onclick:_onClick\"\n/></div>\n"),baseClass:"dijitCheckBox",type:"checkbox",value:"on",readOnly:false,attributeMap:dojo.delegate(dijit.form.ToggleButton.prototype.attributeMap,{readOnly:"focusNode"}),_setReadOnlyAttr:function(_6dd){this.readOnly=_6dd;dojo.attr(this.focusNode,"readOnly",_6dd);dijit.setWaiState(this.focusNode,"readonly",_6dd);this._setStateClass();},_setValueAttr:function(_6de){if(typeof _6de=="string"){this.value=_6de;dojo.attr(this.focusNode,"value",_6de);_6de=true;}if(this._created){this.attr("checked",_6de);}},_getValueAttr:function(){return (this.checked?this.value:false);},postMixInProperties:function(){if(this.value==""){this.value="on";}this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments);},_fillContent:function(_6df){},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);this.value=this.params.value||"on";dojo.attr(this.focusNode,"value",this.value);},_onFocus:function(){if(this.id){dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}},_onBlur:function(){if(this.id){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},_onClick:function(e){if(this.readOnly){return false;}return this.inherited(arguments);}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(_6e0){this.inherited(arguments);if(!this._created){return;}if(_6e0){var _6e1=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(_6e2){if(_6e2.name==_6e1.name&&_6e2!=_6e1.focusNode&&_6e2.form==_6e1.focusNode.form){var _6e3=dijit.getEnclosingWidget(_6e2);if(_6e3&&_6e3.checked){_6e3.attr("checked",false);}}});}},_clicked:function(e){if(!this.checked){this.attr("checked",true);}}});}if(!dojo._hasResource["dijit.form.RadioButton"]){dojo._hasResource["dijit.form.RadioButton"]=true;dojo.provide("dijit.form.RadioButton");}if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{action:"",method:"",encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},execute:function(_6e4){},onExecute:function(){},_setEncTypeAttr:function(_6e5){this.encType=_6e5;dojo.attr(this.domNode,"encType",_6e5);if(dojo.isIE){this.domNode.encoding=_6e5;}},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var item=this.srcNodeRef.attributes.getNamedItem("encType");if(item&&!item.specified&&(typeof item.value=="string")){this.attr("encType",item.value);}}this.inherited(arguments);},onReset:function(e){return true;},_onReset:function(e){var faux={returnValue:true,preventDefault:function(){this.returnValue=false;},stopPropagation:function(){},currentTarget:e.currentTarget,target:e.target};if(!(this.onReset(faux)===false)&&faux.returnValue){this.reset();}dojo.stopEvent(e);return false;},_onSubmit:function(e){var fp=dijit.form.Form.prototype;if(this.execute!=fp.execute||this.onExecute!=fp.onExecute){dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues());}if(this.onSubmit(e)===false){dojo.stopEvent(e);}},onSubmit:function(e){return this.isValid();},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit();}}});}if(!dojo._hasResource["demos.orgchart.widget.ViewOptions"]){dojo._hasResource["demos.orgchart.widget.ViewOptions"]=true;dojo.provide("demos.orgchart.widget.ViewOptions");dojo.declare("demos.orgchart.widget.ViewOptions",[dijit._Widget,dijit._Templated],{localViewAction:null,globalViewAction:null,showLocalViewBtn:null,showGlobalViewBtn:null,showColleaguesCB:null,showBusinessUnitsCB:null,_globalViewAction:null,canvasId:"",overviewId:"",_canvas:null,_overview:null,_lateInitHandle:null,_selection:null,_toggleUnit:null,templateString:"<div>\n  <form dojoType=\"dijit.form.Form\">\n    <p>\n      <input dojoType=\"dijit.form.RadioButton\" name=\"view\" type=\"radio\" id=\"showGlobalView\" dojoAttachPoint=\"showGlobalViewBtn\" checked />\n      <label for=\"showGlobalView\">Global View</label>\n      <br />\n      <input dojoType=\"dijit.form.RadioButton\" name=\"view\" type=\"radio\" id=\"showLocalView\" dojoAttachPoint=\"showLocalViewBtn\" />\n      <label for=\"showLocalView\">Local View</label>\n    </p>\n    <p>\n      <input id=\"showColleagues\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"showColleaguesCB\" disabled/>\n      <label for=\"showColleagues\">Show Colleagues</label>\n      <br />\n      <input id=\"showBusinessUnits\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"showBusinessUnitsCB\"/>\n      <label for=\"showBusinessUnits\">Show Business Units</label>\n    </p>\n  </form>\n</div>\n",widgetsInTemplate:true,postCreate:function(){if(!this._canvas){this._canvas=dijit.byId(this.canvasId);}if(this._canvas==null){this._lateInitHandle=this.connect(dijit.registry,"add","lateInitialization");}if(!this._overview){this._overview=dijit.byId(this.overviewId);}if(this._overview==null&&!this._lateInitHandle){this._lateInitHandle=this.connect(dijit.registry,"add","lateInitialization");}if(this._overview&&this._canvas){this.init();}},setSelection:function(_6e6){this._selection=_6e6;},init:function(){this.showColleaguesCB.checked=false;this.showBusinessUnitsCB.checked=false;var self=this;this._globalViewAction=new yfiles.client.tiles.ServerAction({url:"../yFilesAction",id:"yworks.demos.actions.orgChartGlobalViewAction",graphName:"OrgChart",canvas:self._canvas,preRun:function(){self._canvas.clear(false);self._overview.clear(false);var _6e7=self.showBusinessUnitsCB.checked;this.setCustomParameter(""+_6e7+","+self._toggleUnit);return true;},postRun:function(){if(dojo.isIE){self._canvas.refresh();self._overview.refresh();}self._canvas.fitContent();self._overview.fitContent();self._toggleUnit=null;}});this.connect(this.showGlobalViewBtn,"onClick","showGlobalView");this.connect(this.showLocalViewBtn,"onClick",function(){self.showLocalView(true);});this.connect(this.showColleaguesCB,"onClick","layout");this.connect(this.showBusinessUnitsCB,"onClick","layout");},_createLocalViewAction:function(_6e8,_6e9){var self=this;var _6ea=new yfiles.client.tiles.ServerAction({url:"../yFilesAction",id:"yworks.demos.actions.orgChartLocalViewAction",graphName:"OrgChart",canvas:self._canvas,selection:self._selection,preRun:function(){if(!_6e9){self._canvas.clear(false);self._overview.clear(false);}else{self._canvas.pushTiles();self._overview.pushTiles();}var _6eb=self.showColleaguesCB.checked;var _6ec=self.showBusinessUnitsCB.checked;this.setCustomParameter(""+_6eb+","+_6ec+","+self._toggleUnit+","+_6e9);return true;},postRun:function(){if(_6e8){if(dojo.isIE){self._canvas.refresh();}self._canvas.fitContent();}if(_6e9){var _6ed=dojo.fromJson(this.getCustomResponse());self._canvas.refresh(null,_6ed,true);self._overview.refresh(null,_6ed,true);}if(dojo.isIE){self._overview.refresh();}self._overview.fitContent();self._toggleUnit=null;}});return _6ea;},isGlobalView:function(){return this.showGlobalViewBtn.checked;},isLocalView:function(){return this.showLocalViewBtn.checked;},layout:function(_6ee,_6ef){if(this.isGlobalView()){this.showGlobalView();}else{this._createLocalViewAction(_6ee,_6ef).run();}},showLocalView:function(_6f0){this.showColleaguesCB.attr("disabled",false);this._createLocalViewAction(_6f0).run();},showGlobalView:function(){this.showColleaguesCB.attr("disabled",true);this._globalViewAction.run();},toggleBusinessUnit:function(_6f1){this._toggleUnit=_6f1;this.layout();},lateInitialization:function(_6f2){if(_6f2.id==this.canvasId){this._canvas=_6f2;}else{if(_6f2.id==this.overviewId){this._overview=_6f2;}}if(this._overview&&this._canvas){this.disconnect(this._lateInitHandle);this.init();}}});}if(!dojo._hasResource["demos.widget.GraphDescription"]){dojo._hasResource["demos.widget.GraphDescription"]=true;dojo.provide("demos.widget.GraphDescription");dojo.declare("demos.widget.GraphDescription",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"graphDescription\" dojoAttachPoint=\"mainNode\"></div>",canvasId:"",mainNode:null,_canvas:null,_descriptions:null,postCreate:function(){var id=this.canvasId;this._canvas=dijit.byId(id);var _6f3=this._canvas.getGraph();var self=this;dojo.xhrGet({url:_6f3.getBaseURL()+"/resources/graphs/graph-descriptions.json",load:function(_6f4,_6f5){self._descriptions=_6f4;},handleAs:"json"});dojo.connect(_6f3,"onLoad",this,"onGraphLoaded");},onGraphLoaded:function(name,_6f6){var _6f7=this._descriptions[name];if(_6f7&&_6f7!=""){this.mainNode.innerHTML=_6f7;}else{this.mainNode.innerHTML="";}}});}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(node,_6f8){this.node=dojo.byId(node);if(!_6f8){_6f8={};}this.creator=_6f8.creator||null;this.skipForm=_6f8.skipForm;this.parent=_6f8.dropParent&&dojo.byId(_6f8.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(_6f8&&_6f8._skipStartup)){this.startup();}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||dojo.global;var m=this.map,e=dojo.dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dojo.dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_6f9,_6fa){if(!this.parent.firstChild){_6fa=null;}else{if(_6f9){if(!_6fa){_6fa=this.parent.firstChild;}}else{if(_6fa){_6fa=_6fa.nextSibling;}}}if(_6fa){for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.insertBefore(t.node,_6fa);}}else{for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_6fb,node){_6fb._skipStartup=true;return new dojo.dnd.Container(node,_6fb);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_6fc){var _6fd="dojoDnd"+type;var _6fe=type.toLowerCase()+"State";dojo.removeClass(this.node,_6fd+this[_6fe]);dojo.addClass(this.node,_6fd+_6fc);this[_6fe]=_6fc;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _6ff=node.parentNode;_6ff;node=_6ff,_6ff=node.parentNode){if(_6ff==this.parent&&dojo.hasClass(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!dojo.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dojo.dnd.getUniqueId();}dojo.addClass(t.node,"dojoDndItem");return t;}});dojo.dnd._createNode=function(tag){if(!tag){return dojo.dnd._createSpan;}return function(text){return dojo.create(tag,{innerHTML:text});};};dojo.dnd._createTrTd=function(text){var tr=dojo.create("tr");dojo.create("td",{innerHTML:text},tr);return tr;};dojo.dnd._createSpan=function(text){return dojo.create("span",{innerHTML:text});};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[tag]);return function(item,hint){var _700=item&&dojo.isObject(item),data,type,n;if(_700&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(_700&&item.data)?item.data:item;type=(_700&&item.type)?item.type:["text"];n=(hint=="avatar"?dojo.dnd._createSpan:c)(String(data));}n.id=dojo.dnd.getUniqueId();return {node:n,data:data,type:type};};};}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(node,_701){if(!_701){_701={};}this.singular=_701.singular;this.autoSync=_701.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"));},singular:false,getSelectedNodes:function(){var t=new dojo.NodeList();var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dojo.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dojo.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dojo.byId(i);this.delItem(i);dojo.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||dojo.global;var s=this.selection,e=dojo.dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}dojo.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_702,data,_703,_704){var _705=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_705.call(this,item,hint);if(_702){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};dojo.dnd.Selector.superclass.insertNodes.call(this,data,_703,_704);this._normalizedCreator=_705;return this;},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null;},markupFactory:function(_706,node){_706._skipStartup=true;return new dojo.dnd.Selector(node,_706);},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dojo.isCopyKey(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(e.button===dojo.mouseButtons.LEFT){dojo.stopEvent(e);}return;}if(!this.singular&&e.shiftKey){if(!dojo.isCopyKey(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0;for(;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.isCopyKey(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dojo.isCopyKey(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}dojo.stopEvent(e);},onMouseUp:function(e){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(e){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove");},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent;},_removeSelection:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dojo.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(_707){this.manager=_707;this.construct();},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_708=this.manager.source,node,b=dojo.create("tbody",null,a),tr=dojo.create("tr",null,b),td=dojo.create("td",null,tr),icon=this.isA11y?dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td):null,span=dojo.create("span",{innerHTML:_708.generateText?this._generateText():""},td),k=Math.min(5,this.manager.nodes.length),i=0;dojo.attr(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_708.creator){node=_708._normalizedCreator(_708.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _709=dojo.create("table"),_70a=dojo.create("tbody",null,_709);_70a.appendChild(node);node=_709;}}node.id="";tr=dojo.create("tr",null,b);td=dojo.create("td",null,tr);td.appendChild(node);dojo.attr(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){dojo.destroy(this.node);this.node=false;},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var icon=dojo.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}dojo.query(("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":"")),this.node).forEach(function(node){node.innerHTML=this._generateText();},this);},_generateText:function(){return this.manager.nodes.length.toString();}});}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:16,OFFSET_Y:16,overSource:function(_70b){if(this.avatar){this.target=(_70b&&_70b.targetState!="Disabled")?_70b:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}dojo.publish("/dnd/source/over",[_70b]);},outSource:function(_70c){if(this.avatar){if(this.target==_70c){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null]);}}else{dojo.publish("/dnd/source/over",[null]);}},startDrag:function(_70d,_70e,copy){this.source=_70d;this.nodes=_70e;this.copy=Boolean(copy);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[_70d,_70e,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var c="dojoDnd"+(copy?"Copy":"Move");dojo.addClass(dojo.body(),c);},canDrop:function(flag){var _70f=Boolean(this.target&&flag);if(this.canDropFlag!=_70f){this.canDropFlag=_70f;this.avatar.update();}},stopDrag:function(){dojo.removeClass(dojo.body(),"dojoDndCopy");dojo.removeClass(dojo.body(),"dojoDndMove");dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new dojo.dnd.Avatar(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){dojo.dnd.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dojo.isCopyKey(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dojo.isCopyKey(e))),_710=[this.source,this.nodes,copy,this.target];dojo.publish("/dnd/drop/before",_710);dojo.publish("/dnd/drop",_710);}else{dojo.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case dojo.keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==dojo.keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.removeClass(dojo.body(),"dojoDnd"+(this.copy?"Move":"Copy"));dojo.addClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"));}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager();}return dojo.dnd._manager;};}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_711){dojo.mixin(this,dojo.mixin({},_711));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource");}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget");}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal");}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")];},checkAcceptance:function(_712,_713){if(this==_712){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_713.length;++i){var type=_712.getItem(_713[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_714,self){if(_714){return true;}if(arguments.length<2){self=this==dojo.dnd.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null;},markupFactory:function(_715,node){_715._skipStartup=true;return new dojo.dnd.Source(node,_715);},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}dojo.dnd.Source.superclass.onMouseMove.call(this,e);var m=dojo.dnd.manager();if(this.isDragging){var _716=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=dojo.position(this.current,true);}if(this.horizontal){_716=(e.pageX-this.targetBox.x)<(this.targetBox.w/2);}else{_716=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_716!=this.before){this._markTargetAnchor(_716);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}else{if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _717=this.getSelectedNodes();if(_717.length){m.startDrag(this,_717,this.copyState(dojo.isCopyKey(e),true));}}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dojo.dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_718){if(this!=_718){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=dojo.dnd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_719,_71a,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_719?(copy?"Copied":"Moved"):"");}var _71b=this.accept&&this.checkAcceptance(_719,_71a);this._changeState("Target",_71b?"":"Disabled");if(this==_719){dojo.dnd.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_71c,_71d,copy,_71e){if(this==_71e){this.onDrop(_71c,_71d,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_71f,_720,copy){if(this!=_71f){this.onDropExternal(_71f,_720,copy);}else{this.onDropInternal(_720,copy);}},onDropExternal:function(_721,_722,copy){var _723=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _723.call(this,_721.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node,hint){var t=_721.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node,hint){var t=_721.getItem(node.id);_721.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_721.selectNone();}this.insertNodes(true,_722,this.before,this.current);if(!copy&&this.creator){_721.deleteSelectedNodes();}this._normalizedCreator=_723;},onDropInternal:function(_724,copy){var _725=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _725.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_724,this.before,this.current);this._normalizedCreator=_725;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_726){if(this.current==this.targetAnchor&&this.before==_726){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_726;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(!dojo.mouseButtons.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(dojo.hasClass(node,"dojoDndHandle")){return true;}if(dojo.hasClass(node,"dojoDndItem")||dojo.hasClass(node,"dojoDndIgnore")){break;}}return false;}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(node,_727){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource");},markupFactory:function(_728,node){_728._skipStartup=true;return new dojo.dnd.Target(node,_728);}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(node,_729){this.autoSync=true;},markupFactory:function(_72a,node){_72a._skipStartup=true;return new dojo.dnd.AutoSource(node,_72a);}});}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_72b,_72c){var _72d=(this._keyNavCodes={});var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(_72b,function(code){_72d[code]=prev;});dojo.forEach(_72c,function(code){_72d[code]=next;});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"));},addChild:function(_72e,_72f){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_72e);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){var _730=this._getFirstFocusableChild();this.focusChild(_730);},focusNext:function(){var _731=this._getNextFocusableChild(this.focusedChild,1);this.focusChild(_731);},focusPrev:function(){var _732=this._getNextFocusableChild(this.focusedChild,-1);this.focusChild(_732,true);},focusChild:function(_733,last){if(this.focusedChild&&_733!==this.focusedChild){this._onChildBlur(this.focusedChild);}_733.focus(last?"end":"start");this.focusedChild=_733;},_startupChild:function(_734){_734.attr("tabIndex","-1");this.connect(_734,"_onFocus",function(){_734.attr("tabIndex",this.tabIndex);});this.connect(_734,"_onBlur",function(){_734.attr("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt);}},_onChildBlur:function(_735){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getNextFocusableChild:function(_736,dir){if(_736){_736=this._getSiblingOfChild(_736,dir);}var _737=this.getChildren();for(var i=0;i<_737.length;i++){if(!_736){_736=_737[(dir>0)?0:(_737.length-1)];}if(_736.isFocusable()){return _736;}_736=this._getSiblingOfChild(_736,dir);}return null;}});}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\"></div>",postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:"<div class=\"dijit dijitToolbar\" waiRole=\"toolbar\" tabIndex=\"${tabIndex}\" dojoAttachPoint=\"containerNode\">"+"</div>",postCreate:function(){this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW]);},startup:function(){if(this._started){return;}this.startupKeyNavChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset\" waiRole=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\">\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\">\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_738){if(_738&&!("label" in this.params)){this.attr("label",_738.innerHTML);}},postCreate:function(){dojo.setSelectable(this.domNode,false);var _739=this.id+"_text";dojo.attr(this.containerNode,"id",_739);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");_739+=" "+this.id+"_accel";}dijit.setWaiState(this.domNode,"labelledby",_739);},_onHover:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemHover(this);},_onUnhover:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemUnhover(this);},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);},onClick:function(evt){},focus:function(){try{if(dojo.isIE==8){this.containerNode.focus();}dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_73a){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_73a);},setLabel:function(_73b){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_73b);},setDisabled:function(_73c){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",_73c);},_setDisabledAttr:function(_73d){this.disabled=_73d;dojo[_73d?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.focusNode,"disabled",_73d?"true":"false");},_setAccelKeyAttr:function(_73e){this.accelKey=_73e;this.accelKeyNode.style.display=_73e?"":"none";this.accelKeyNode.innerHTML=_73e;dojo.attr(this.containerNode,"colSpan",_73e?"1":"2");}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _73f=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_73f[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset\" waiRole=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\">\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\n\t</td>\n</tr>\n"),checked:false,_setCheckedAttr:function(_740){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_740);dijit.setWaiState(this.domNode,"checked",_740);this.checked=_740;},onChange:function(_741){},_onClick:function(e){if(!this.disabled){this.attr("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html","<tr class=\"dijitMenuSeparator\">\n\t<td colspan=\"4\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n"),postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_742){_742.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_743){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _744=this._getTopMenu();if(_744&&_744._isMenuBar){_744.focusNext();}}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _745=this.currentPopup.parentMenu;if(_745.focusedChild){_745.focusedChild._setSelected(false);}_745.focusedChild=this.currentPopup.from_item;_745.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _746=item.popup;if(_746){this._stopPendingCloseTimer(_746);_746._pendingClose_timer=setTimeout(function(){_746._pendingClose_timer=null;if(_746.parentMenu){_746.parentMenu.currentPopup=null;}dijit.popup.close(_746);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==item){this._hoveredChild=null;}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_stopPendingCloseTimer:function(_747){if(_747._pendingClose_timer){clearTimeout(_747._pendingClose_timer);_747._pendingClose_timer=null;}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(item.disabled){return false;}if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.popup){this._openPopup();}else{this.onExecute();item.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _748=this.focusedChild;if(!_748){return;}var _749=_748.popup;if(_749.isShowingNow){return;}if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup);}_749.parentMenu=this;_749.from_item=_748;var self=this;dijit.popup.open({parent:this,popup:_749,around:_748.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),onCancel:function(){self.focusChild(_748);self._cleanUp();_748._setSelected(true);self.focusedChild=_748;},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=_749;_749.connect(_749.domNode,"onmouseenter",dojo.hitch(self,"_onPopupHover"));if(_749.focus){_749._focus_timer=setTimeout(dojo.hitch(_749,function(){this._focus_timer=null;this.focus();}),0);}},_markActive:function(){this.isActive=true;dojo.addClass(this.domNode,"dijitMenuActive");dojo.removeClass(this.domNode,"dijitMenuPassive");},onOpen:function(e){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;dojo.removeClass(this.domNode,"dijitMenuActive");dojo.addClass(this.domNode,"dijitMenuPassive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null;}if(this.currentPopup){dijit.popup.close(this.currentPopup);this.currentPopup=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this._hoveredChild._onUnhover();}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:dojo.cache("dijit","templates/Menu.html","<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" waiRole=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n"),targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_74a){var win=dijit.getDocumentWindow(this._iframeContentDocument(_74a))||this._iframeContentDocument(_74a)["__parent__"]||(_74a.name&&dojo.doc.frames[_74a.name])||null;return win;},_iframeContentDocument:function(_74b){var doc=_74b.contentDocument||(_74b.contentWindow&&_74b.contentWindow.document)||(_74b.name&&dojo.doc.frames[_74b.name]&&dojo.doc.frames[_74b.name].document)||null;return doc;},bindDomNode:function(node){node=dojo.byId(node);var cn;if(node.tagName.toLowerCase()=="iframe"){var _74c=node,win=this._iframeContentWindow(_74c);cn=dojo.withGlobal(win,dojo.body);}else{cn=(node==dojo.body()?dojo.doc.documentElement:node);}var _74d={node:node,iframe:_74c};dojo.attr(node,"_dijitMenu"+this.id,this._bindings.push(_74d));var _74e=dojo.hitch(this,function(cn){return [dojo.connect(cn,(this.leftClickToOpen)?"onclick":"oncontextmenu",this,function(evt){this._openMyself(evt,cn,_74c);}),dojo.connect(cn,"onkeydown",this,"_contextKey"),dojo.connect(cn,"onmousedown",this,"_contextMouse")];});_74d.connects=cn?_74e(cn):[];if(_74c){_74d.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(_74c);cn=dojo.withGlobal(win,dojo.body);_74d.connects=_74e(cn);});if(_74c.addEventListener){_74c.addEventListener("load",_74d.onloadHandler,false);}else{_74c.attachEvent("onload",_74d.onloadHandler);}}},unBindDomNode:function(_74f){var node;try{node=dojo.byId(_74f);}catch(e){return;}var _750="_dijitMenu"+this.id;if(node&&dojo.hasAttr(node,_750)){var bid=dojo.attr(node,_750)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var _751=b.iframe;if(_751){if(_751.removeEventListener){_751.removeEventListener("load",b.onloadHandler,false);}else{_751.detachEvent("onload",b.onloadHandler);}}dojo.removeAttr(node,_750);delete this._bindings[bid];}},_contextKey:function(e){this._contextMenuWithMouse=false;if(e.keyCode==dojo.keys.F10){dojo.stopEvent(e);if(e.shiftKey&&e.type=="keydown"){var _752={target:e.target,pageX:e.pageX,pageY:e.pageY};_752.preventDefault=_752.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(_752);}),1);}}},_contextMouse:function(e){this._contextMenuWithMouse=true;},_openMyself:function(e,node,_753){if(this.leftClickToOpen&&e.button>0){return;}dojo.stopEvent(e);var x,y;if(dojo.isSafari||this._contextMenuWithMouse){x=e.pageX;y=e.pageY;if(_753){var od=e.target.ownerDocument,ifc=dojo.position(_753,true),win=this._iframeContentWindow(_753),_754=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_753),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_753,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_753,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_753,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_753,cs.borderTopWidth):0);x+=ifc.x+left-_754.x;y+=ifc.y+top-_754.y;}}else{var _755=dojo.position(e.target,true);x=_755.x+10;y=_755.y+10;}var self=this;var _756=dijit.getFocus(this);function _757(){if(self.refocus){dijit.focus(_756);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:x,y:y,onExecute:_757,onCancel:_757,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuBar"]){dojo._hasResource["dijit.MenuBar"]=true;dojo.provide("dijit.MenuBar");dojo.declare("dijit.MenuBar",dijit._MenuBase,{templateString:dojo.cache("dijit","templates/MenuBar.html","<div class=\"dijitMenuBar dijitMenuPassive\" dojoAttachPoint=\"containerNode\"  waiRole=\"menubar\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress: _onKeyPress\"></div>\n"),_isMenuBar:true,constructor:function(){this._orient=this.isLeftToRight()?{BL:"TL"}:{BR:"TR"};},postCreate:function(){var k=dojo.keys,l=this.isLeftToRight();this.connectKeyNavHandlers(l?[k.LEFT_ARROW]:[k.RIGHT_ARROW],l?[k.RIGHT_ARROW]:[k.LEFT_ARROW]);},focusChild:function(item){var _758=this.focusedChild,_759=_758&&_758.popup&&_758.popup.isShowingNow;this.inherited(arguments);if(_759&&item.popup&&!item.disabled){this._openPopup();}},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._moveToPopup(evt);dojo.stopEvent(evt);}},onItemClick:function(item,evt){if(item.popup&&item.popup.isShowingNow){item.popup.onCancel();}else{this.inherited(arguments);}}});}if(!dojo._hasResource["dijit.MenuBarItem"]){dojo._hasResource["dijit.MenuBarItem"]=true;dojo.provide("dijit.MenuBarItem");dojo.declare("dijit._MenuBarItemMixin",null,{templateString:dojo.cache("dijit","templates/MenuBarItem.html","<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"'\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<span dojoAttachPoint=\"containerNode\"></span>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"}})});dojo.declare("dijit.MenuBarItem",[dijit.MenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["dijit.PopupMenuBarItem"]){dojo._hasResource["dijit.PopupMenuBarItem"]=true;dojo.provide("dijit.PopupMenuBarItem");dojo.declare("dijit.PopupMenuBarItem",[dijit.PopupMenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(str,_75a){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_75a&&_75a.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_75b){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_75b);};dojo.regexp.group=function(_75c,_75d){return "("+(_75d?"?:":"")+_75c+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(name,_75e,_75f){var c=document.cookie;if(arguments.length==1){var _760=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return _760?decodeURIComponent(_760[1]):undefined;}else{_75f=_75f||{};var exp=_75f.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_75f.expires=d;}if(exp&&exp.toUTCString){_75f.expires=exp.toUTCString();}_75e=encodeURIComponent(_75e);var _761=name+"="+_75e,_762;for(_762 in _75f){_761+="; "+_762;var _763=_75f[_762];if(_763!==true){_761+="="+_763;}}document.cookie=_761;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){if(!this.gutters){this.baseClass+="NoGutter";}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this._splitters={};this._splitterThickness={};},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments);},_setupChild:function(_764){var _765=_764.region;if(_765){this.inherited(arguments);dojo.addClass(_764.domNode,this.baseClass+"Pane");var ltr=this.isLeftToRight();if(_765=="leading"){_765=ltr?"left":"right";}if(_765=="trailing"){_765=ltr?"right":"left";}this["_"+_765]=_764.domNode;this["_"+_765+"Widget"]=_764;if((_764.splitter||this.gutters)&&!this._splitters[_765]){var _766=dojo.getObject(_764.splitter?this._splitterClass:"dijit.layout._Gutter");var _767=new _766({container:this,child:_764,region:_765,live:this.liveSplitters});_767.isSplitter=true;this._splitters[_765]=_767.domNode;dojo.place(this._splitters[_765],_764.domNode,"after");_767.startup();}_764.region=_765;}},_computeSplitterThickness:function(_768){this._splitterThickness[_768]=this._splitterThickness[_768]||dojo.marginBox(this._splitters[_768])[(/top|bottom/.test(_768)?"h":"w")];},layout:function(){for(var _769 in this._splitters){this._computeSplitterThickness(_769);}this._layoutChildren();},addChild:function(_76a,_76b){this.inherited(arguments);if(this._started){this.layout();}},removeChild:function(_76c){var _76d=_76c.region;var _76e=this._splitters[_76d];if(_76e){dijit.byNode(_76e).destroy();delete this._splitters[_76d];delete this._splitterThickness[_76d];}this.inherited(arguments);delete this["_"+_76d];delete this["_"+_76d+"Widget"];if(this._started){this._layoutChildren(_76c.region);}dojo.removeClass(_76c.domNode,this.baseClass+"Pane");},getChildren:function(){return dojo.filter(this.inherited(arguments),function(_76f){return !_76f.isSplitter;});},getSplitter:function(_770){var _771=this._splitters[_770];return _771?dijit.byNode(_771):null;},resize:function(_772,_773){if(!this.cs||!this.pe){var node=this.domNode;this.cs=dojo.getComputedStyle(node);this.pe=dojo._getPadExtents(node,this.cs);this.pe.r=dojo._toPixelValue(node,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(node,this.cs.paddingBottom);dojo.style(node,"padding","0px");}this.inherited(arguments);},_layoutChildren:function(_774){if(!this._borderBox||!this._borderBox.h){return;}var _775=(this.design=="sidebar");var _776=0,_777=0,_778=0,_779=0;var _77a={},_77b={},_77c={},_77d={},_77e=(this._center&&this._center.style)||{};var _77f=/left|right/.test(_774);var _780=!_774||(!_77f&&!_775);var _781=!_774||(_77f&&_775);if(this._top){_77a=_781&&this._top.style;_776=dojo.marginBox(this._top).h;}if(this._left){_77b=_780&&this._left.style;_778=dojo.marginBox(this._left).w;}if(this._right){_77c=_780&&this._right.style;_779=dojo.marginBox(this._right).w;}if(this._bottom){_77d=_781&&this._bottom.style;_777=dojo.marginBox(this._bottom).h;}var _782=this._splitters;var _783=_782.top,_784=_782.bottom,_785=_782.left,_786=_782.right;var _787=this._splitterThickness;var _788=_787.top||0,_789=_787.left||0,_78a=_787.right||0,_78b=_787.bottom||0;if(_789>50||_78a>50){setTimeout(dojo.hitch(this,function(){this._splitterThickness={};for(var _78c in this._splitters){this._computeSplitterThickness(_78c);}this._layoutChildren();}),50);return false;}var pe=this.pe;var _78d={left:(_775?_778+_789:0)+pe.l+"px",right:(_775?_779+_78a:0)+pe.r+"px"};if(_783){dojo.mixin(_783.style,_78d);_783.style.top=_776+pe.t+"px";}if(_784){dojo.mixin(_784.style,_78d);_784.style.bottom=_777+pe.b+"px";}_78d={top:(_775?0:_776+_788)+pe.t+"px",bottom:(_775?0:_777+_78b)+pe.b+"px"};if(_785){dojo.mixin(_785.style,_78d);_785.style.left=_778+pe.l+"px";}if(_786){dojo.mixin(_786.style,_78d);_786.style.right=_779+pe.r+"px";}dojo.mixin(_77e,{top:pe.t+_776+_788+"px",left:pe.l+_778+_789+"px",right:pe.r+_779+_78a+"px",bottom:pe.b+_777+_78b+"px"});var _78e={top:_775?pe.t+"px":_77e.top,bottom:_775?pe.b+"px":_77e.bottom};dojo.mixin(_77b,_78e);dojo.mixin(_77c,_78e);_77b.left=pe.l+"px";_77c.right=pe.r+"px";_77a.top=pe.t+"px";_77d.bottom=pe.b+"px";if(_775){_77a.left=_77d.left=_778+_789+pe.l+"px";_77a.right=_77d.right=_779+_78a+pe.r+"px";}else{_77a.left=_77d.left=pe.l+"px";_77a.right=_77d.right=pe.r+"px";}var _78f=this._borderBox.h-pe.t-pe.b,_790=_78f-(_776+_788+_777+_78b),_791=_775?_78f:_790;var _792=this._borderBox.w-pe.l-pe.r,_793=_792-(_778+_789+_779+_78a),_794=_775?_793:_792;var dim={top:{w:_794,h:_776},bottom:{w:_794,h:_777},left:{w:_778,h:_791},right:{w:_779,h:_791},center:{h:_790,w:_793}};var _795=dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.some(this.getChildren(),function(_796){return _796.domNode.tagName=="TEXTAREA"||_796.domNode.tagName=="INPUT";});if(_795){var _797=function(_798,_799,_79a){if(_798){(_798.resize?_798.resize(_799,_79a):dojo.marginBox(_798.domNode,_799));}};if(_785){_785.style.height=_791;}if(_786){_786.style.height=_791;}_797(this._leftWidget,{h:_791},dim.left);_797(this._rightWidget,{h:_791},dim.right);if(_783){_783.style.width=_794;}if(_784){_784.style.width=_794;}_797(this._topWidget,{w:_794},dim.top);_797(this._bottomWidget,{w:_794},dim.bottom);_797(this._centerWidget,dim.center);}else{var _79b={};if(_774){_79b[_774]=_79b.center=true;if(/top|bottom/.test(_774)&&this.design!="sidebar"){_79b.left=_79b.right=true;}else{if(/left|right/.test(_774)&&this.design=="sidebar"){_79b.top=_79b.bottom=true;}}}dojo.forEach(this.getChildren(),function(_79c){if(_79c.resize&&(!_774||_79c.region in _79b)){_79c.resize(null,dim[_79c.region]);}},this);}},destroy:function(){for(var _79d in this._splitters){var _79e=this._splitters[_79d];dijit.byNode(_79e).destroy();dojo.destroy(_79e);}delete this._splitters;delete this._splitterThickness;this.inherited(arguments);}});dojo.extend(dijit._Widget,{region:"",splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:"<div class=\"dijitSplitter\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse\" tabIndex=\"0\" waiRole=\"separator\"><div class=\"dijitSplitterThumb\"></div></div>",postCreate:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region;if(this.container.persist){var _79f=dojo.cookie(this._cookieName);if(_79f){this.child.domNode.style[this.horizontal?"height":"width"]=_79f;}}},_computeMaxSize:function(){var dim=this.horizontal?"h":"w",_7a0=this.container._splitterThickness[this.region];var flip={left:"right",right:"left",top:"bottom",bottom:"top",leading:"trailing",trailing:"leading"},_7a1=this.container["_"+flip[this.region]];var _7a2=dojo.contentBox(this.container.domNode)[dim]-(_7a1?dojo.marginBox(_7a1)[dim]:0)-20-_7a0*2;return Math.min(this.child.maxSize,_7a2);},_startDrag:function(e){if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after");}dojo.addClass(this.cover,"dijitSplitterCoverActive");if(this.fake){dojo.destroy(this.fake);}if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after");}dojo.addClass(this.domNode,"dijitSplitterActive");dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake){dojo.removeClass(this.fake,"dijitSplitterHover");dojo.removeClass(this.fake,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover");}var _7a3=this._factor,max=this._computeMaxSize(),min=this.child.minSize||20,_7a4=this.horizontal,axis=_7a4?"pageY":"pageX",_7a5=e[axis],_7a6=this.domNode.style,dim=_7a4?"h":"w",_7a7=dojo.marginBox(this.child.domNode)[dim],_7a8=this.region,_7a9=parseInt(this.domNode.style[_7a8],10),_7aa=this._resize,mb={},_7ab=this.child.domNode,_7ac=dojo.hitch(this.container,this.container._layoutChildren),de=dojo.doc.body;this._handlers=(this._handlers||[]).concat([dojo.connect(de,"onmousemove",this._drag=function(e,_7ad){var _7ae=e[axis]-_7a5,_7af=_7a3*_7ae+_7a7,_7b0=Math.max(Math.min(_7af,max),min);if(_7aa||_7ad){mb[dim]=_7b0;dojo.marginBox(_7ab,mb);_7ac(_7a8);}_7a6[_7a8]=_7a3*_7ae+_7a9+(_7b0-_7af)+"px";}),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(de,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(e);},_onMouse:function(e){var o=(e.type=="mouseover"||e.type=="mouseenter");dojo.toggleClass(this.domNode,"dijitSplitterHover",o);dojo.toggleClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",o);},_stopDrag:function(e){try{if(this.cover){dojo.removeClass(this.cover,"dijitSplitterCoverActive");}if(this.fake){dojo.destroy(this.fake);}dojo.removeClass(this.domNode,"dijitSplitterActive");dojo.removeClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Active");dojo.removeClass(this.domNode,"dijitSplitterShadow");this._drag(e);this._drag(e,true);}finally{this._cleanupHandlers();delete this._drag;}if(this.container.persist){dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365});}},_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers;},_onKeyPress:function(e){this._resize=true;var _7b1=this.horizontal;var tick=1;var dk=dojo.keys;switch(e.charOrCode){case _7b1?dk.UP_ARROW:dk.LEFT_ARROW:tick*=-1;case _7b1?dk.DOWN_ARROW:dk.RIGHT_ARROW:break;default:return;}var _7b2=dojo.marginBox(this.child.domNode)[_7b1?"h":"w"]+this._factor*tick;var mb={};mb[this.horizontal?"h":"w"]=Math.max(Math.min(_7b2,this._computeMaxSize()),this.child.minSize);dojo.marginBox(this.child.domNode,mb);this.container._layoutChildren(this.region);dojo.stopEvent(e);},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments);}});dojo.declare("dijit.layout._Gutter",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitGutter\" waiRole=\"presentation\"></div>",postCreate:function(){this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"));}});}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton");}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles={};this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(info){dojo.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(dijit.byId(pane));}this.inherited(arguments);},onAddChild:function(page,_7b3){var _7b4=dojo.doc.createElement("span");this.domNode.appendChild(_7b4);var cls=dojo.getObject(this.buttonWidget);var _7b5=new cls({id:this.id+"_"+page.id,label:page.title,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip},_7b4);dijit.setWaiState(_7b5.focusNode,"selected","false");this.pane2handles[page.id]=[this.connect(page,"attr",function(name,_7b6){if(arguments.length==2){var _7b7={title:"label",showTitle:"showLabel",iconClass:"iconClass",closable:"closeButton",tooltip:"title"}[name];if(_7b7){_7b5.attr(_7b7,_7b6);}}}),this.connect(_7b5,"onClick",dojo.hitch(this,"onButtonClick",page)),this.connect(_7b5,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",page))];this.addChild(_7b5,_7b3);this.pane2button[page.id]=_7b5;page.controlButton=_7b5;if(!this._currentChild){_7b5.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(_7b5.focusNode,"selected","true");this._currentChild=page;}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}dojo.forEach(this.pane2handles[page.id],this.disconnect,this);delete this.pane2handles[page.id];var _7b8=this.pane2button[page.id];if(_7b8){this.removeChild(_7b8);delete this.pane2button[page.id];_7b8.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _7b9=this.pane2button[this._currentChild.id];_7b9.attr("checked",false);dijit.setWaiState(_7b9.focusNode,"selected","false");_7b9.focusNode.setAttribute("tabIndex","-1");}var _7ba=this.pane2button[page.id];_7ba.attr("checked",true);dijit.setWaiState(_7ba.focusNode,"selected","true");this._currentChild=page;_7ba.focusNode.setAttribute("tabIndex","0");var _7bb=dijit.byId(this.containerId);dijit.setWaiState(_7bb.containerNode,"labelledby",_7ba.id);},onButtonClick:function(page){var _7bc=dijit.byId(this.containerId);_7bc.selectChild(page);},onCloseButtonClick:function(page){var _7bd=dijit.byId(this.containerId);_7bd.closeChild(page);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){dijit.focus(b.focusNode||b.domNode);}}},adjacent:function(_7be){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_7be=!_7be;}var _7bf=this.getChildren();var _7c0=dojo.indexOf(_7bf,this.pane2button[this._currentChild.id]);var _7c1=_7be?1:_7bf.length-1;return _7bf[(_7c0+_7c1)%_7bf.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _7c2=null;if(e.ctrlKey||!e._djpage){var k=dojo.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_7c2=false;}break;case k.PAGE_UP:if(e.ctrlKey){_7c2=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_7c2=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_7c2=true;}break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();dojo.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);}}}}if(_7c2!==null){this.adjacent(_7c2).onClick();dojo.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(evt){dijit.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments);},onClick:function(evt){dijit.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _7c3=this.getChildren();dojo.forEach(_7c3,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));}else{dojo.some(_7c3,function(_7c4){if(_7c4.selected){this.selectedChildWidget=_7c4;}return _7c4.selected;},this);}var _7c5=this.selectedChildWidget;if(!_7c5&&_7c3[0]){_7c5=this.selectedChildWidget=_7c3[0];_7c5.selected=true;}dojo.publish(this.id+"-startup",[{children:_7c3,selected:_7c5}]);this.inherited(arguments);},resize:function(){var _7c6=this.selectedChildWidget;if(_7c6&&!this._hasBeenShown){this._hasBeenShown=true;this._showChild(_7c6);}this.inherited(arguments);},_setupChild:function(_7c7){this.inherited(arguments);dojo.removeClass(_7c7.domNode,"dijitVisible");dojo.addClass(_7c7.domNode,"dijitHidden");_7c7.domNode.title="";},addChild:function(_7c8,_7c9){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[_7c8,_7c9]);this.layout();if(!this.selectedChildWidget){this.selectChild(_7c8);}}},removeChild:function(page){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-removeChild",[page]);}if(this._beingDestroyed){return;}if(this._started){this.layout();}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _7ca=this.getChildren();if(_7ca.length){this.selectChild(_7ca[0]);}}}},selectChild:function(page){page=dijit.byId(page);if(this.selectedChildWidget!=page){this._transition(page,this.selectedChildWidget);this.selectedChildWidget=page;dojo.publish(this.id+"-selectChild",[page]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}},_transition:function(_7cb,_7cc){if(_7cc){this._hideChild(_7cc);}this._showChild(_7cb);if(_7cb.resize){if(this.doLayout){_7cb.resize(this._containerContentBox||this._contentBox);}else{_7cb.resize();}}},_adjacent:function(_7cd){var _7ce=this.getChildren();var _7cf=dojo.indexOf(_7ce,this.selectedChildWidget);_7cf+=_7cd?1:_7ce.length-1;return _7ce[_7cf%_7ce.length];},forward:function(){this.selectChild(this._adjacent(true));},back:function(){this.selectChild(this._adjacent(false));},_onKeyPress:function(e){dojo.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._contentBox);}},_showChild:function(page){var _7d0=this.getChildren();page.isFirstChild=(page==_7d0[0]);page.isLastChild=(page==_7d0[_7d0.length-1]);page.selected=true;dojo.removeClass(page.domNode,"dijitHidden");dojo.addClass(page.domNode,"dijitVisible");page._onShow();},_hideChild:function(page){page.selected=false;dojo.removeClass(page.domNode,"dijitVisible");dojo.addClass(page.domNode,"dijitHidden");page.onHide();},closeChild:function(page){var _7d1=page.onClose(this,page);if(_7d1){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_7d2){dojo.forEach(this.getChildren(),function(_7d3){this.removeChild(_7d3);_7d3.destroyRecursive(_7d2);},this);}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true,onClose:function(){return true;}});}if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html","<div class=\"dijitTabContainer\">\n\t<div class=\"dijitTabListWrapper\" dojoAttachPoint=\"tablistNode\"></div>\n\t<div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n"),postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested");}else{dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));}},_setupChild:function(tab){dojo.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}if(this.doLayout){var _7d4=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=_7d4;var _7d5=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:_7d4},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,_7d5);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,_7d5[2]);if(this.selectedChildWidget){if(this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox);}}}else{if(this.tablist.resize){this.tablist.resize({w:dojo.contentBox(this.domNode).w});}this.selectedChildWidget.resize();}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _7d6=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_7d6=Math.max(_7d6,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_7d6+"px";}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div waiRole=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent,focusNode'>\n\t        <img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='iconNode' waiRole=\"presentation\"/>\n\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\n\t        <span class=\"closeButton\" dojoAttachPoint='closeNode'\n\t        \t\tdojoAttachEvent='onclick: onClickCloseButton, onmouseenter: _onCloseButtonEnter, onmouseleave: _onCloseButtonLeave'>\n\t        \t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='closeIcon' class='closeImage' waiRole=\"presentation\"/>\n\t            <span dojoAttachPoint='closeText' class='closeText'>x</span>\n\t        </span>\n        </div>\n    </div>\n</div>\n"),scrollOnFocus:false,postMixInProperties:function(){if(!this.iconClass){this.iconClass="dijitTabButtonIcon";}},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);if(this.iconNode.className=="dijitTabButtonIcon"){dojo.style(this.iconNode,"width","1px");}},startup:function(){this.inherited(arguments);var n=this.domNode;setTimeout(function(){n.className=n.className;},1);},_setCloseButtonAttr:function(disp){this.closeButton=disp;dojo.toggleClass(this.innerDiv,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _7d7=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",_7d7.itemClose);if(dojo.isIE<8){dojo.attr(this.closeIcon,"title",_7d7.itemClose);}}var _7d7=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:_7d7.itemClose,onClick:dojo.hitch(this,"onClickCloseButton")}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);},_onCloseButtonEnter:function(){dojo.addClass(this.closeNode,"closeButton-hover");},_onCloseButtonLeave:function(){dojo.removeClass(this.closeNode,"closeButton-hover");}});}if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html","<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\" buttonType=\"menuBtn\" buttonClass=\"tabStripMenuButton\"\n\t\t\ttabPosition=\"${tabPosition}\" dojoAttachPoint=\"_menuBtn\" showLabel=false>&darr;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\" buttonType=\"leftBtn\" buttonClass=\"tabStripSlideButtonLeft\"\n\t\t\ttabPosition=\"${tabPosition}\" dojoAttachPoint=\"_leftBtn\" dojoAttachEvent=\"onClick: doSlideLeft\" showLabel=false>&larr;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\" buttonType=\"rightBtn\" buttonClass=\"tabStripSlideButtonRight\"\n\t\t\ttabPosition=\"${tabPosition}\" dojoAttachPoint=\"_rightBtn\" dojoAttachEvent=\"onClick: doSlideRight\" showLabel=false>&rarr;</div>\n\t<div class='dijitTabListWrapper' dojoAttachPoint='tablistWrapper'>\n\t\t<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'\n\t\t\t\tdojoAttachPoint='containerNode' class='nowrapTabStrip'>\n\t\t</div>\n\t</div>\n</div>\n"),useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),postCreate:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(n,"tabStrip-disabled");}dojo.addClass(this.tablistWrapper,this.tabStripClass);},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true;},onAddChild:function(page,_7d8){this.inherited(arguments);var _7d9;if(this.useMenu){_7d9=new dijit.MenuItem({label:page.title,onClick:dojo.hitch(this,function(){this.onSelectChild(page);})});this._menuChildren[page.id]=_7d9;this._menu.addChild(_7d9,_7d8);}this.pane2handles[page.id].push(this.connect(this.pane2button[page.id],"attr",function(name,_7da){if(this._postStartup){if(arguments.length==2&&name=="label"){if(_7d9){_7d9.attr(name,_7da);}if(this._dim){this.resize(this._dim);}}}}));dojo.style(this.containerNode,"width",(dojo.style(this.containerNode,"width")+200)+"px");},onRemoveChild:function(page,_7db){var _7dc=this.pane2button[page.id];if(this._selectedTab===_7dc.domNode){this._selectedTab=null;}if(this.useMenu&&page&&page.id&&this._menuChildren[page.id]){this._menu.removeChild(this._menuChildren[page.id]);this._menuChildren[page.id].destroy();delete this._menuChildren[page.id];}this.inherited(arguments);},_initButtons:function(){this._menuChildren={};this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(btn){if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){this._btnWidth+=dojo.marginBox(btn).w;return true;}else{dojo.style(btn,"display","none");return false;}},this);if(this.useMenu){this._menu=new dijit.Menu({id:this.id+"_menu",targetNodeIds:[this._menuBtn.domNode],leftClickToOpen:true,refocus:false});this._supportingWidgets.push(this._menu);}},_getTabsWidth:function(){var _7dd=this.getChildren();if(_7dd.length){var _7de=_7dd[this.isLeftToRight()?0:_7dd.length-1].domNode,_7df=_7dd[this.isLeftToRight()?_7dd.length-1:0].domNode;return _7df.offsetLeft+dojo.style(_7df,"width")-_7de.offsetLeft;}else{return 0;}},_enableBtn:function(_7e0){var _7e1=this._getTabsWidth();_7e0=_7e0||dojo.style(this.scrollNode,"width");return _7e1>0&&_7e0<_7e1;},resize:function(dim){if(this.domNode.offsetWidth==0){return;}this._dim=dim;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:dim.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);var _7e2=this._enableBtn(this._contentBox.w);this._buttons.style("display",_7e2?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){var w=this.scrollNode,sl=this._convertToScrollLeft(this._getScrollForSelectedTab());w.scrollLeft=sl;}this._setButtonClass(this._getScroll());},_getScroll:function(){var sl=(this.isLeftToRight()||dojo.isIE<8)?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft;return sl;},_convertToScrollLeft:function(val){if(this.isLeftToRight()||dojo.isIE<8){return val;}else{var _7e3=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return (dojo.isIE==8?-1:1)*(val-_7e3);}},onSelectChild:function(page){var tab=this.pane2button[page.id];if(!tab||!page){return;}var node=tab.domNode;if(node!=this._selectedTab){this._selectedTab=node;var sl=this._getScroll();if(sl>node.offsetLeft||sl+dojo.style(this.scrollNode,"width")<node.offsetLeft+dojo.style(node,"width")){var anim=this.createSmoothScroll();dojo.connect(anim,"onEnd",function(){tab.onClick(null);});anim.play();}else{tab.onClick(null);}}this.inherited(arguments);},_getScrollBounds:function(){var _7e4=this.getChildren(),_7e5=dojo.style(this.scrollNode,"width"),_7e6=dojo.style(this.containerNode,"width"),_7e7=_7e6-_7e5,_7e8=this._getTabsWidth();if(_7e4.length&&_7e8>_7e5){return {min:this.isLeftToRight()?0:_7e4[_7e4.length-1].domNode.offsetLeft,max:this.isLeftToRight()?(_7e4[_7e4.length-1].domNode.offsetLeft+dojo.style(_7e4[_7e4.length-1].domNode,"width"))-_7e5:_7e7};}else{var _7e9=this.isLeftToRight()?0:_7e7;return {min:_7e9,max:_7e9};}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,_7ea=dojo.style(this.scrollNode,"width"),_7eb=this._getScrollBounds();var pos=(n.offsetLeft+dojo.style(n,"width")/2)-_7ea/2;pos=Math.min(Math.max(pos,_7eb.min),_7eb.max);return pos;},createSmoothScroll:function(x){if(arguments.length>0){var _7ec=this._getScrollBounds();x=Math.min(Math.max(x,_7ec.min),_7ec.max);}else{x=this._getScrollForSelectedTab();}if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var self=this,w=this.scrollNode,anim=new dojo._Animation({beforeBegin:function(){if(this.curve){delete this.curve;}var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new dojo._Line(oldS,newS);},onAnimate:function(val){w.scrollLeft=val;}});this._anim=anim;this._setButtonClass(x);return anim;},_getBtnNode:function(e){var n=e.target;while(n&&!dojo.hasClass(n,"tabStripButton")){n=n.parentNode;}return n;},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e));},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e));},doSlide:function(_7ed,node){if(node&&dojo.hasClass(node,"dijitTabBtnDisabled")){return;}var _7ee=dojo.style(this.scrollNode,"width");var d=(_7ee*0.75)*_7ed;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play();},_setButtonClass:function(_7ef){var cls="dijitTabBtnDisabled",_7f0=this._getScrollBounds();dojo.toggleClass(this._leftBtn.domNode,cls,_7ef<=_7f0.min);dojo.toggleClass(this._rightBtn.domNode,cls,_7ef>=_7f0.max);}});dojo.declare("dijit.layout._ScrollingTabControllerButton",dijit.form.Button,{baseClass:"dijitTab",buttonType:"",buttonClass:"",tabPosition:"top",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html","<div id=\"${id}-${buttonType}\" class=\"tabStripButton dijitTab ${buttonClass} tabStripButton-${tabPosition}\"\n\t\tdojoAttachEvent=\"onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\">\n\t<div role=\"presentation\" wairole=\"presentation\" class=\"dijitTabInnerDiv\" dojoattachpoint=\"innerDiv,focusNode\">\n\t\t<div role=\"presentation\" wairole=\"presentation\" class=\"dijitTabContent dijitButtonContents\" dojoattachpoint=\"tabContent\">\n\t\t\t<img src=\"${_blankGif}\"/>\n\t\t\t<span dojoAttachPoint=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\n\t\t</div>\n\t</div>\n</div>\n"),tabIndex:""});}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_7f1){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_7f2=dojo.getObject(this.controllerWidget);return new _7f2({id:this.id+"_tablist",tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_7f1);},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget){this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController";}}});}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,templateString:dojo.cache("dijit.form","templates/TextBox.html","<input class=\"dijit dijitReset dijitLeft\" dojoAttachPoint='textbox,focusNode'\n\tdojoAttachEvent='onmouseenter:_onMouse,onmouseleave:_onMouse'\n\tautocomplete=\"off\" type=\"${type}\" ${nameAttrSetting}\n\t/>\n"),baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),_getValueAttr:function(){return this.parse(this.attr("displayedValue"),this.constraints);},_setValueAttr:function(_7f3,_7f4,_7f5){var _7f6;if(_7f3!==undefined){_7f6=this.filter(_7f3);if(typeof _7f5!="string"){if(_7f6!==null&&((typeof _7f6!="number")||!isNaN(_7f6))){_7f5=this.filter(this.format(_7f6,this.constraints));}else{_7f5="";}}}if(_7f5!=null&&_7f5!=undefined&&((typeof _7f5)!="number"||!isNaN(_7f5))&&this.textbox.value!=_7f5){this.textbox.value=_7f5;}this.inherited(arguments,[_7f6,_7f4]);},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use attr('displayedValue') instead.","","2.0");return this.attr("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(_7f7){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use attr('displayedValue', ...) instead.","","2.0");this.attr("displayedValue",_7f7);},_setDisplayedValueAttr:function(_7f8){if(_7f8===null||_7f8===undefined){_7f8="";}else{if(typeof _7f8!="string"){_7f8=String(_7f8);}}this.textbox.value=_7f8;this._setValueAttr(this.attr("value"),undefined,_7f8);},format:function(_7f9,_7fa){return ((_7f9==null||_7f9==undefined)?"":(_7f9.toString?_7f9.toString():_7f9));},parse:function(_7fb,_7fc){return _7fb;},_refreshState:function(){},_onInput:function(e){if(e&&e.type&&/key/i.test(e.type)&&e.keyCode){switch(e.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return;}}if(this.intermediateChanges){var _7fd=this;setTimeout(function(){_7fd._handleOnChange(_7fd.attr("value"),false);},0);}this._refreshState();},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput",this._onInput);}else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput);}},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=dojo.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.attr("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}if(this.selectOnClick&&dojo.isMoz){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var _7fe;if(dojo.isIE){var _7ff=dojo.doc.selection.createRange();var _800=_7ff.parentElement();_7fe=_800==this.textbox&&_7ff.text.length==0;}else{_7fe=this.textbox.selectionStart==this.textbox.selectionEnd;}if(_7fe){dijit.selectInputText(this.textbox);}});}this._refreshState();this.inherited(arguments);},reset:function(){this.textbox.value="";this.inherited(arguments);}});dijit.selectInputText=function(_801,_802,stop){var _803=dojo.global;var _804=dojo.doc;_801=dojo.byId(_801);if(isNaN(_802)){_802=0;}if(isNaN(stop)){stop=_801.value?_801.value.length:0;}dijit.focus(_801);if(_804["selection"]&&dojo.body()["createTextRange"]){if(_801.createTextRange){var _805=_801.createTextRange();with(_805){collapse(true);moveStart("character",-99999);moveStart("character",_802);moveEnd("character",stop-_802);select();}}}else{if(_803["getSelection"]){if(_801.setSelectionRange){_801.setSelectionRange(_802,stop);}}}};}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\n\t<div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div>\n\t<div class=\"dijitTooltipConnector\"></div>\n</div>\n"),postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_806,_807,_808){if(this.aroundNode&&this.aroundNode===_807){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_806;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var pos=dijit.placeOnScreenAroundElement(this.domNode,_807,dijit.getPopupAroundAlignment((_808&&_808.length)?_808:dijit.Tooltip.defaultPosition,this.isLeftToRight()),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_807;},orient:function(node,_809,_80a){node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_809+"-"+_80a];},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_80b){if(this._onDeck&&this._onDeck[1]==_80b){this._onDeck=null;}else{if(this.aroundNode===_80b){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_80c,_80d,_80e){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_80c,_80d,_80e);};dijit.hideTooltip=function(_80f){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_80f);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],constructor:function(){this._nodeConnectionsById={};},_setConnectIdAttr:function(_810){for(var _811 in this._nodeConnectionsById){this.removeTarget(_811);}dojo.forEach(dojo.isArrayLike(_810)?_810:[_810],this.addTarget,this);},_getConnectIdAttr:function(){var ary=[];for(var id in this._nodeConnectionsById){ary.push(id);}return ary;},addTarget:function(id){var node=dojo.byId(id);if(!node){return;}if(node.id in this._nodeConnectionsById){return;}this._nodeConnectionsById[node.id]=[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")];if(dojo.isIE&&!node.style.zoom){node.style.zoom=1;}},removeTarget:function(node){var id=node.id||node;if(id in this._nodeConnectionsById){dojo.forEach(this._nodeConnectionsById[id],this.disconnect,this);delete this._nodeConnectionsById[id];}},postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _812=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_812);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_813){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_813,this.position);this._connectNode=_813;this.onShow(_813,this.position);},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_814,_815){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\" waiRole=\"presentation\"\n\t><div style=\"overflow:hidden;\"\n\t\t><div class=\"dijitReset dijitValidationIcon\"><br></div\n\t\t><div class=\"dijitReset dijitValidationIconText\">&Chi;</div\n\t\t><div class=\"dijitReset dijitInputField\"\n\t\t\t><input class=\"dijitReset\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${nameAttrSetting} type='${type}'\n\t\t/></div\n\t></div\n></div>\n"),baseClass:"dijitTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(_816){return this.regExp;},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused);},validator:function(_817,_818){return (new RegExp("^(?:"+this.regExpGen(_818)+")"+(this.required?"":"?")+"$")).test(_817)&&(!this.required||!this._isEmpty(_817))&&(this._isEmpty(_817)||this.parse(_817,_818)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(_819){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_81a){return /^\s*$/.test(_81a);},getErrorMessage:function(_81b){return this.invalidMessage;},getPromptMessage:function(_81c){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_81d){var _81e="";var _81f=this.disabled||this.isValid(_81d);if(_81f){this._maskValidSubsetError=true;}var _820=!_81f&&_81d&&this._isValidSubset();var _821=this._isEmpty(this.textbox.value);if(_821){this._maskValidSubsetError=true;}this.state=(_81f||(!this._hasBeenBlurred&&_821)||_820)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=false;}this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",_81f?"false":"true");if(_81d){if(_821){_81e=this.getPromptMessage(true);}if(!_81e&&(this.state=="Error"||(_820&&!this._maskValidSubsetError))){_81e=this.getErrorMessage(true);}}this.displayMessage(_81e);return _81f;},_message:"",displayMessage:function(_822){if(this._message==_822){return;}this._message=_822;dijit.hideTooltip(this.domNode);if(_822){dijit.showTooltip(_822,this.domNode,this.tooltipPosition);}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments);},constructor:function(){this.constraints={};},postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}var p=this.regExpGen(this.constraints);this.regExp=p;var _823="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_823+=re;break;case ")":_823+="|$)";break;default:_823+="(?:"+re+"|$)";break;}});}try{"".search(_823);}catch(e){_823=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp);}this._partialre="^(?:"+_823+")$";},_setDisabledAttr:function(_824){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_825){this.required=_825;dijit.setWaiState(this.focusNode,"required",_825);this._refreshState();},postCreate:function(){if(dojo.isIE){var s=dojo.getComputedStyle(this.focusNode);if(s){var ff=s.fontFamily;if(ff){this.focusNode.style.fontFamily=ff;}}}this.inherited(arguments);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},serialize:function(val,_826){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.attr("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name+"'":"")+">",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(_827,_828){return ("min" in _828?(this.compare(_827,_828.min)>=0):true)&&("max" in _828?(this.compare(_827,_828.max)<=0):true);},isInRange:function(_829){return this.rangeCheck(this.attr("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.attr("value");var _82a=false;var _82b=false;if("min" in this.constraints){var min=this.constraints.min;min=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min);_82a=(typeof min=="number")&&min<0;}if("max" in this.constraints){var max=this.constraints.max;max=this.compare(val,((typeof max!="number")||max>0)?max:0);_82b=(typeof max=="number")&&max>0;}return _82a||_82b;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_82c){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_82c));},getErrorMessage:function(_82d){var v=this.attr("value");if(v!==null&&v!==""&&v!==undefined&&!this.isInRange(_82d)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},postCreate:function(){this.inherited(arguments);if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max);}},_setValueAttr:function(_82e,_82f){dijit.setWaiState(this.focusNode,"valuenow",_82e);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:dojo.cache("dijit.form","templates/Spinner.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\" waiRole=\"presentation\"\n\t><div class=\"dijitInputLayoutContainer\"\n\t\t><div class=\"dijitReset dijitSpinnerButtonContainer\"\n\t\t\t>&nbsp;<div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\t\tdojoAttachPoint=\"upArrowNode\"\n\t\t\t\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse\"\n\t\t\t\tstateModifier=\"UpArrow\"\n\t\t\t\t><div class=\"dijitArrowButtonInner\">&thinsp;</div\n\t\t\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div\n\t\t\t></div\n\t\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\t\tdojoAttachPoint=\"downArrowNode\"\n\t\t\t\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse\"\n\t\t\t\tstateModifier=\"DownArrow\"\n\t\t\t\t><div class=\"dijitArrowButtonInner\">&thinsp;</div\n\t\t\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div\n\t\t\t></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitValidationIcon\"><br></div\n\t\t><div class=\"dijitReset dijitValidationIconText\">&Chi;</div\n\t\t><div class=\"dijitReset dijitInputField\"\n\t\t\t><input class='dijitReset' dojoAttachPoint=\"textbox,focusNode\" type=\"${type}\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\n\t\t\t\twaiRole=\"spinbutton\" autocomplete=\"off\" ${nameAttrSetting}\n\t\t/></div\n\t></div\n></div>\n"),baseClass:"dijitSpinner",adjust:function(val,_830){return val;},_arrowState:function(node,_831){this._active=_831;this.stateModifier=node.getAttribute("stateModifier")||"";this._setStateClass();},_arrowPressed:function(_832,_833,_834){if(this.disabled||this.readOnly){return;}this._arrowState(_832,true);this._setValueAttr(this.adjust(this.attr("value"),_833*_834),false);dijit.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(node){this._wheelTimer=null;if(this.disabled||this.readOnly){return;}this._arrowState(node,false);},_typematicCallback:function(_835,node,evt){var inc=this.smallDelta;if(node==this.textbox){var k=dojo.keys;var key=evt.charOrCode;inc=(key==k.PAGE_UP||key==k.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==k.UP_ARROW||key==k.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_835==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){dojo.stopEvent(evt);var _836=evt.detail?(evt.detail*-1):(evt.wheelDelta/120);if(_836!==0){var node=this[(_836>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_836,this.smallDelta);if(!this._wheelTimer){clearTimeout(this._wheelTimer);}this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",node),50);}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));if(dojo.isIE){var _837=this;(function resize(){var sz=_837.upArrowNode.parentNode.offsetHeight;if(sz){_837.upArrowNode.style.height=sz>>1;_837.downArrowNode.style.height=sz-(sz>>1);_837.focusNode.parentNode.style.height=sz;}})();this.connect(this.domNode,"onresize",function(){setTimeout(function(){resize();_837._setStateClass();},0);});this._layoutHackIE7();}}});}if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.number.format=function(_838,_839){_839=dojo.mixin({},_839||{});var _83a=dojo.i18n.normalizeLocale(_839.locale);var _83b=dojo.i18n.getLocalization("dojo.cldr","number",_83a);_839.customs=_83b;var _83c=_839.pattern||_83b[(_839.type||"decimal")+"Format"];if(isNaN(_838)||Math.abs(_838)==Infinity){return null;}return dojo.number._applyPattern(_838,_83c,_839);};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(_83d,_83e,_83f){_83f=_83f||{};var _840=_83f.customs.group;var _841=_83f.customs.decimal;var _842=_83e.split(";");var _843=_842[0];_83e=_842[(_83d<0)?1:0]||("-"+_843);if(_83e.indexOf("%")!=-1){_83d*=100;}else{if(_83e.indexOf("")!=-1){_83d*=1000;}else{if(_83e.indexOf("")!=-1){_840=_83f.customs.currencyGroup||_840;_841=_83f.customs.currencyDecimal||_841;_83e=_83e.replace(/\u00a4{1,3}/,function(_844){var prop=["symbol","currency","displayName"][_844.length-1];return _83f[prop]||_83f.currency||"";});}else{if(_83e.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _845=dojo.number._numberPatternRE;var _846=_843.match(_845);if(!_846){throw new Error("unable to find a number expression in pattern: "+_83e);}if(_83f.fractional===false){_83f.places=0;}return _83e.replace(_845,dojo.number._formatAbsolute(_83d,_846[0],{decimal:_841,group:_840,places:_83f.places,round:_83f.round}));};dojo.number.round=function(_847,_848,_849){var _84a=10/(_849||10);return (_84a*+_847).toFixed(_848)/_84a;};if((0.9).toFixed()==0){(function(){var _84b=dojo.number.round;dojo.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _84b(v,p,m)+(v>0?d:-d);};})();}dojo.number._formatAbsolute=function(_84c,_84d,_84e){_84e=_84e||{};if(_84e.places===true){_84e.places=0;}if(_84e.places===Infinity){_84e.places=6;}var _84f=_84d.split(".");var _850=(_84e.places>=0)?_84e.places:(_84f[1]&&_84f[1].length)||0;if(!(_84e.round<0)){_84c=dojo.number.round(_84c,_850,_84e.round);}var _851=String(Math.abs(_84c)).split(".");var _852=_851[1]||"";if(_84e.places){var _853=dojo.isString(_84e.places)&&_84e.places.indexOf(",");if(_853){_84e.places=_84e.places.substring(_853+1);}_851[1]=dojo.string.pad(_852.substr(0,_84e.places),_84e.places,"0",true);}else{if(_84f[1]&&_84e.places!==0){var pad=_84f[1].lastIndexOf("0")+1;if(pad>_852.length){_851[1]=dojo.string.pad(_852,pad,"0",true);}var _854=_84f[1].length;if(_854<_852.length){_851[1]=_852.substr(0,_854);}}else{if(_851[1]){_851.pop();}}}var _855=_84f[0].replace(",","");pad=_855.indexOf("0");if(pad!=-1){pad=_855.length-pad;if(pad>_851[0].length){_851[0]=dojo.string.pad(_851[0],pad);}if(_855.indexOf("#")==-1){_851[0]=_851[0].substr(_851[0].length-pad);}}var _856=_84f[0].lastIndexOf(",");var _857,_858;if(_856!=-1){_857=_84f[0].length-_856-1;var _859=_84f[0].substr(0,_856);_856=_859.lastIndexOf(",");if(_856!=-1){_858=_859.length-_856-1;}}var _85a=[];for(var _85b=_851[0];_85b;){var off=_85b.length-_857;_85a.push((off>0)?_85b.substr(off):_85b);_85b=(off>0)?_85b.slice(0,off):"";if(_858){_857=_858;delete _858;}}_851[0]=_85a.reverse().join(_84e.group||",");return _851.join(_84e.decimal||".");};dojo.number.regexp=function(_85c){return dojo.number._parseInfo(_85c).regexp;};dojo.number._parseInfo=function(_85d){_85d=_85d||{};var _85e=dojo.i18n.normalizeLocale(_85d.locale);var _85f=dojo.i18n.getLocalization("dojo.cldr","number",_85e);var _860=_85d.pattern||_85f[(_85d.type||"decimal")+"Format"];var _861=_85f.group;var _862=_85f.decimal;var _863=1;if(_860.indexOf("%")!=-1){_863/=100;}else{if(_860.indexOf("")!=-1){_863/=1000;}else{var _864=_860.indexOf("")!=-1;if(_864){_861=_85f.currencyGroup||_861;_862=_85f.currencyDecimal||_862;}}}var _865=_860.split(";");if(_865.length==1){_865.push("-"+_865[0]);}var re=dojo.regexp.buildGroupRE(_865,function(_866){_866="(?:"+dojo.regexp.escapeString(_866,".")+")";return _866.replace(dojo.number._numberPatternRE,function(_867){var _868={signed:false,separator:_85d.strict?_861:[_861,""],fractional:_85d.fractional,decimal:_862,exponent:false};var _869=_867.split(".");var _86a=_85d.places;if(_869.length==1||_86a===0){_868.fractional=false;}else{if(_86a===undefined){_86a=_85d.pattern?_869[1].lastIndexOf("0")+1:Infinity;}if(_86a&&_85d.fractional==undefined){_868.fractional=true;}if(!_85d.places&&(_86a<_869[1].length)){_86a+=","+_869[1].length;}_868.places=_86a;}var _86b=_869[0].split(",");if(_86b.length>1){_868.groupSize=_86b.pop().length;if(_86b.length>1){_868.groupSize2=_86b.pop().length;}}return "("+dojo.number._realNumberRegexp(_868)+")";});},true);if(_864){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_86c,_86d,_86e,_86f){var prop=["symbol","currency","displayName"][_86e.length-1];var _870=dojo.regexp.escapeString(_85d[prop]||_85d.currency||"");_86d=_86d?"[\\s\\xa0]":"";_86f=_86f?"[\\s\\xa0]":"";if(!_85d.strict){if(_86d){_86d+="*";}if(_86f){_86f+="*";}return "(?:"+_86d+_870+_86f+")?";}return _86d+_870+_86f;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_861,decimal:_862,factor:_863};};dojo.number.parse=function(_871,_872){var info=dojo.number._parseInfo(_872);var _873=(new RegExp("^"+info.regexp+"$")).exec(_871);if(!_873){return NaN;}var _874=_873[1];if(!_873[1]){if(!_873[2]){return NaN;}_874=_873[2];info.factor*=-1;}_874=_874.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _874*info.factor;};dojo.number._realNumberRegexp=function(_875){_875=_875||{};if(!("places" in _875)){_875.places=Infinity;}if(typeof _875.decimal!="string"){_875.decimal=".";}if(!("fractional" in _875)||/^0/.test(_875.places)){_875.fractional=[true,false];}if(!("exponent" in _875)){_875.exponent=[true,false];}if(!("eSigned" in _875)){_875.eSigned=[true,false];}var _876=dojo.number._integerRegexp(_875);var _877=dojo.regexp.buildGroupRE(_875.fractional,function(q){var re="";if(q&&(_875.places!==0)){re="\\"+_875.decimal;if(_875.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_875.places+"}";}}return re;},true);var _878=dojo.regexp.buildGroupRE(_875.exponent,function(q){if(q){return "([eE]"+dojo.number._integerRegexp({signed:_875.eSigned})+")";}return "";});var _879=_876+_877;if(_877){_879="(?:(?:"+_879+")|(?:"+_877+"))";}return _879+_878;};dojo.number._integerRegexp=function(_87a){_87a=_87a||{};if(!("signed" in _87a)){_87a.signed=[true,false];}if(!("separator" in _87a)){_87a.separator="";}else{if(!("groupSize" in _87a)){_87a.groupSize=3;}}var _87b=dojo.regexp.buildGroupRE(_87a.signed,function(q){return q?"[-+]":"";},true);var _87c=dojo.regexp.buildGroupRE(_87a.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=dojo.regexp.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==""){sep="\\s\\xa0";}}var grp=_87a.groupSize,grp2=_87a.groupSize2;if(grp2){var _87d="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_87d+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_87d;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _87b+_87c;};}if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,postMixInProperties:function(){var _87e=typeof this.constraints.places=="number"?this.constraints.places:0;if(_87e){_87e++;}if(typeof this.constraints.max!="number"){this.constraints.max=9*Math.pow(10,15-_87e);}if(typeof this.constraints.min!="number"){this.constraints.min=-9*Math.pow(10,15-_87e);}this.inherited(arguments);},_onFocus:function(){if(this.disabled){return;}var val=this.attr("value");if(typeof val=="number"&&!isNaN(val)){var _87f=this.format(val,this.constraints);if(_87f!==undefined){this.textbox.value=_87f;}}this.inherited(arguments);},format:function(_880,_881){if(typeof _880!="number"){return String(_880);}if(isNaN(_880)){return "";}if(("rangeCheck" in this)&&!this.rangeCheck(_880,_881)){return String(_880);}if(this.editOptions&&this._focused){_881=dojo.mixin({},_881,this.editOptions);}return this._formatter(_880,_881);},parse:dojo.number.parse,_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_882){return (_882===null||_882===""||_882===undefined)?NaN:this.inherited(arguments);},serialize:function(_883,_884){return (typeof _883!="number"||isNaN(_883))?"":this.inherited(arguments);},_setValueAttr:function(_885,_886,_887){if(_885!==undefined&&_887===undefined){if(typeof _885=="number"){if(isNaN(_885)){_887="";}else{if(("rangeCheck" in this)&&!this.rangeCheck(_885,this.constraints)){_887=String(_885);}}}else{if(!_885){_887="";_885=NaN;}else{_887=String(_885);_885=undefined;}}}this.inherited(arguments,[_885,_886,_887]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?|\d/i.test(this.textbox.value)&&(new RegExp("^"+dojo.number._realNumberRegexp(dojo.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_888){if(!this._focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.attr("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{});}if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{adjust:function(val,_889){var tc=this.constraints,v=isNaN(val),_88a=!isNaN(tc.max),_88b=!isNaN(tc.min);if(v&&_889!=0){val=(_889>0)?_88b?tc.min:_88a?tc.max:0:_88a?this.constraints.max:_88b?tc.min:0;}var _88c=val+_889;if(v||isNaN(_88c)){return val;}if(_88a&&(_88c>tc.max)){_88c=tc.max;}if(_88b&&(_88c<tc.min)){_88c=tc.min;}return _88c;},_onKeyPress:function(e){if((e.charOrCode==dojo.keys.HOME||e.charOrCode==dojo.keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.attr("value")!="undefined"){var _88d=this.constraints[(e.charOrCode==dojo.keys.HOME?"min":"max")];if(_88d){this._setValueAttr(_88d,true);}dojo.stopEvent(e);}}});}if(!dojo._hasResource["dijit.form.HorizontalSlider"]){dojo._hasResource["dijit.form.HorizontalSlider"]=true;dojo.provide("dijit.form.HorizontalSlider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:dojo.cache("dijit.form","templates/HorizontalSlider.html","<table class=\"dijit dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"topDecoration\" class=\"dijitReset\" style=\"text-align:center;width:100%;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" waiRole=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\" style=\"right:0px;\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset\" style=\"text-align:center;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n"),value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:dijit.defaultDuration,widgetsInTemplate:true,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,false);break;case dojo.keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case (this._descending===false?dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW):case (this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case (this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW):case (this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN):this.decrement(e);break;default:return;}dojo.stopEvent(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!dojo.isIE){dijit.focus(this.sliderHandle);}dojo.stopEvent(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}dijit.focus(this.sliderHandle);dojo.stopEvent(e);var _88e=dojo.position(this.sliderBarContainer,true);var _88f=e[this._mousePixelCoord]-_88e[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_88e[this._pixelCount]-_88f):_88f,_88e[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_890,_891,_892){if(this.disabled||this.readOnly){return;}_890=_890<0?0:_891<_890?_891:_890;var _893=this.discreteValues;if(_893<=1||_893==Infinity){_893=_891;}_893--;var _894=_891/_893;var _895=Math.round(_890/_894);this._setValueAttr((this.maximum-this.minimum)*_895/_893+this.minimum,_892);},_setValueAttr:function(_896,_897){this.valueNode.value=this.value=_896;dijit.setWaiState(this.focusNode,"valuenow",_896);this.inherited(arguments);var _898=(_896-this.minimum)/(this.maximum-this.minimum);var _899=(this._descending===false)?this.remainingBar:this.progressBar;var _89a=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_897&&this.slideDuration>0&&_899.style[this._progressPixelSize]){var _89b=this;var _89c={};var _89d=parseFloat(_899.style[this._progressPixelSize]);var _89e=this.slideDuration*(_898-_89d/100);if(_89e==0){return;}if(_89e<0){_89e=0-_89e;}_89c[this._progressPixelSize]={start:_89d,end:_898*100,units:"%"};this._inProgressAnim=dojo.animateProperty({node:_899,duration:_89e,onAnimate:function(v){_89a.style[_89b._progressPixelSize]=(100-parseFloat(v[_89b._progressPixelSize]))+"%";},onEnd:function(){delete _89b._inProgressAnim;},properties:_89c});this._inProgressAnim.play();}else{_899.style[this._progressPixelSize]=(_898*100)+"%";_89a.style[this._progressPixelSize]=((1-_898)*100)+"%";}},_bumpValue:function(_89f,_8a0){if(this.disabled||this.readOnly){return;}var s=dojo.getComputedStyle(this.sliderBarContainer);var c=dojo._getContentBox(this.sliderBarContainer,s);var _8a1=this.discreteValues;if(_8a1<=1||_8a1==Infinity){_8a1=c[this._pixelCount];}_8a1--;var _8a2=(this.value-this.minimum)*_8a1/(this.maximum-this.minimum)+_89f;if(_8a2<0){_8a2=0;}if(_8a2>_8a1){_8a2=_8a1;}_8a2=_8a2*(this.maximum-this.minimum)/_8a1+this.minimum;this._setValueAttr(_8a2,_8a0);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){dojo.stopEvent(evt);var _8a3=!dojo.isMozilla;var _8a4=evt[(_8a3?"wheelDelta":"detail")]*(_8a3?1:-1);this._bumpValue(_8a4<0?-1:1,true);},startup:function(){dojo.forEach(this.getChildren(),function(_8a5){if(this[_8a5.container]!=this.containerNode){this[_8a5.container].appendChild(_8a5.domNode);}},this);},_typematicCallback:function(_8a6,_8a7,e){if(_8a6==-1){this._setValueAttr(this.value,true);}else{this[(_8a7==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},postCreate:function(){if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _8a8=dojo.declare(dijit.form._SliderMover,{widget:this});this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:_8a8});var _8a9=dojo.query("label[for=\""+this.id+"\"]");if(_8a9.length){_8a9[0].id=(this.id+"_label");dijit.setWaiState(this.focusNode,"labelledby",_8a9[0].id);}dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);this.inherited(arguments);this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this._supportingWidgets=dijit.findWidgets(this.domNode);this.inherited(arguments);}});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(e){var _8aa=this.widget;var _8ab=_8aa._abspos;if(!_8ab){_8ab=_8aa._abspos=dojo.position(_8aa.sliderBarContainer,true);_8aa._setPixelValue_=dojo.hitch(_8aa,"_setPixelValue");_8aa._isReversed_=_8aa._isReversed();}var _8ac=e[_8aa._mousePixelCoord]-_8ab[_8aa._startingPixelCoord];_8aa._setPixelValue_(_8aa._isReversed_?(_8ab[_8aa._pixelCount]-_8ac):_8ac,_8ab[_8aa._pixelCount],false);},destroy:function(e){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var _8ad=this.widget;_8ad._abspos=null;_8ad._setValueAttr(_8ad.value,true);}});}if(!dojo._hasResource["dijit.form.VerticalSlider"]){dojo._hasResource["dijit.form.VerticalSlider"]=true;dojo.provide("dijit.form.VerticalSlider");dojo.declare("dijit.form.VerticalSlider",dijit.form.HorizontalSlider,{templateString:dojo.cache("dijit.form","templates/VerticalSlider.html","<table class=\"dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n><tbody class=\"dijitReset\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderIncrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper dijitSliderTopBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td dojoAttachPoint=\"leftDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\n\t\t><td class=\"dijitReset\" style=\"height:100%;\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${nameAttrSetting}\n\t\t\t/><center class=\"dijitReset dijitSliderBarContainerV\" waiRole=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV\" dojoAttachEvent=\"onmousedown:_onBarClick\"><!--#5629--></div\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV\" dojoAttachEvent=\"onmousedown:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable\" style=\"vertical-align:top;\"\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleV\" dojoAttachEvent=\"onmousedown:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint=\"containerNode,rightDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper dijitSliderBottomBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderDecrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></tbody></table>\n"),_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:true,startup:function(){if(this._started){return;}if(!this.isLeftToRight()&&dojo.isMoz){if(this.leftDecoration){this._rtlRectify(this.leftDecoration);}if(this.rightDecoration){this._rtlRectify(this.rightDecoration);}}this.inherited(arguments);},_isReversed:function(){return this._descending;},_rtlRectify:function(_8ae){var _8af=[];while(_8ae.firstChild){_8af.push(_8ae.firstChild);_8ae.removeChild(_8ae.firstChild);}for(var i=_8af.length-1;i>=0;i--){if(_8af[i]){_8ae.appendChild(_8af[i]);}}}});}if(!dojo._hasResource["dijit.form.HorizontalRule"]){dojo._hasResource["dijit.form.HorizontalRule"]=true;dojo.provide("dijit.form.HorizontalRule");dojo.declare("dijit.form.HorizontalRule",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH\"></div>",count:3,container:"containerNode",ruleStyle:"",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkH\" style=\"left:",_positionSuffix:"%;",_suffix:"\"></div>",_genHTML:function(pos,ndx){return this._positionPrefix+pos+this._positionSuffix+this.ruleStyle+this._suffix;},_isHorizontal:true,postCreate:function(){var _8b0;if(this.count==1){_8b0=this._genHTML(50,0);}else{var i;var _8b1=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){_8b0=this._genHTML(0,0);for(i=1;i<this.count-1;i++){_8b0+=this._genHTML(_8b1*i,i);}_8b0+=this._genHTML(100,this.count-1);}else{_8b0=this._genHTML(100,0);for(i=1;i<this.count-1;i++){_8b0+=this._genHTML(100-_8b1*i,i);}_8b0+=this._genHTML(0,this.count-1);}}this.domNode.innerHTML=_8b0;}});}if(!dojo._hasResource["dijit.form.VerticalRule"]){dojo._hasResource["dijit.form.VerticalRule"]=true;dojo.provide("dijit.form.VerticalRule");dojo.declare("dijit.form.VerticalRule",dijit.form.HorizontalRule,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkV\" style=\"top:",_isHorizontal:false});}if(!dojo._hasResource["dijit.form.HorizontalRuleLabels"]){dojo._hasResource["dijit.form.HorizontalRuleLabels"]=true;dojo.provide("dijit.form.HorizontalRuleLabels");dojo.declare("dijit.form.HorizontalRuleLabels",dijit.form.HorizontalRule,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH\"></div>",labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerH\" style=\"left:",_labelPrefix:"\"><span class=\"dijitRuleLabel dijitRuleLabelH\">",_suffix:"</span></div>",_calcPosition:function(pos){return pos;},_genHTML:function(pos,ndx){return this._positionPrefix+this._calcPosition(pos)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[ndx]+this._suffix;},getLabels:function(){var _8b2=this.labels;if(!_8b2.length){_8b2=dojo.query("> li",this.srcNodeRef).map(function(node){return String(node.innerHTML);});}this.srcNodeRef.innerHTML="";if(!_8b2.length&&this.count>1){var _8b3=this.minimum;var inc=(this.maximum-_8b3)/(this.count-1);for(var i=0;i<this.count;i++){_8b2.push((i<this.numericMargin||i>=(this.count-this.numericMargin))?"":dojo.number.format(_8b3,this.constraints));_8b3+=inc;}}return _8b2;},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length;}});}if(!dojo._hasResource["dijit.form.VerticalRuleLabels"]){dojo._hasResource["dijit.form.VerticalRuleLabels"]=true;dojo.provide("dijit.form.VerticalRuleLabels");dojo.declare("dijit.form.VerticalRuleLabels",dijit.form.HorizontalRuleLabels,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerV\" style=\"top:",_labelPrefix:"\"><span class=\"dijitRuleLabel dijitRuleLabelV\">",_calcPosition:function(pos){return 100-pos;}});}if(!dojo._hasResource["dijit.form.Slider"]){dojo._hasResource["dijit.form.Slider"]=true;dojo.provide("dijit.form.Slider");dojo.deprecated("Call require() for HorizontalSlider / VerticalRule, explicitly rather than 'dijit.form.Slider' itself","","2.0");}if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE){var _8b4=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;}var _8b5=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var _8b6=dojox.html._adjustCssPaths=function(_8b7,_8b8){if(!_8b8||!_8b7){return;}if(_8b4){_8b8=_8b8.replace(_8b4,function(_8b9,pre,_8ba,url,post){return pre+(new dojo._Url(_8b7,"./"+url).toString())+post;});}return _8b8.replace(_8b5,function(_8bb,_8bc,_8bd,_8be,_8bf,_8c0){if(_8bd){return "@import \""+(new dojo._Url(_8b7,"./"+_8bd).toString())+"\""+_8c0;}else{return "url("+(new dojo._Url(_8b7,"./"+_8bf).toString())+")"+_8c0;}});};var _8c1=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var _8c2=dojox.html._adjustHtmlPaths=function(_8c3,cont){var url=_8c3||"./";return cont.replace(_8c1,function(tag,_8c4,name,_8c5,_8c6,_8c7,_8c8,end){return _8c4+(name?(name+"="+_8c5+(new dojo._Url(url,_8c6).toString())+_8c5):("style="+_8c7+_8b6(url,_8c8)+_8c7))+end;});};var _8c9=dojox.html._snarfStyles=function(_8ca,cont,_8cb){_8cb.attributes=[];return cont.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(_8cc,_8cd,_8ce,_8cf,_8d0,href){var i,attr=(_8cd||_8cf||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(_8ce){i=_8cb.push(_8ca?_8b6(_8ca,_8ce):_8ce);}else{i=_8cb.push("@import \""+href+"\";");attr=attr.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"");}if(attr){attr=attr.split(/\s+/);var _8d1={},tmp;for(var j=0,e=attr.length;j<e;j++){tmp=attr[j].split("=");_8d1[tmp[0]]=tmp[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");}_8cb.attributes[i-1]=_8d1;}return "";});};var _8d2=dojox.html._snarfScripts=function(cont,_8d3){_8d3.code="";cont=cont.replace(/<[!][-][-](.|\s){5,}?[-][-]>/g,function(_8d4){return _8d4.replace(/<(\/?)script\b([^>]|\s)*\>/ig,"&lt;$1Script$2&gt;");});function _8d5(src){if(_8d3.downloadRemote){src=src.replace(/&([a-z0-9#]+);/g,function(m,name){switch(name){case "amp":return "&";case "gt":return ">";case "lt":return "<";default:return name.charAt(0)=="#"?String.fromCharCode(name.substring(1)):"&"+name+";";}});dojo.xhrGet({url:src,sync:true,load:function(code){_8d3.code+=code+";";},error:_8d3.errBack});}};return cont.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(_8d6,_8d7,src,code){if(src){_8d5(src);}else{_8d3.code+=code;}return "";});};var _8d8=dojox.html.evalInGlobal=function(code,_8d9){_8d9=_8d9||dojo.doc.body;var n=_8d9.ownerDocument.createElement("script");n.type="text/javascript";_8d9.appendChild(n);n.text=code;};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(_8da){this._styleNodes=[];var st,att,_8db,doc=this.node.ownerDocument;var head=doc.getElementsByTagName("head")[0];for(var i=0,e=_8da.length;i<e;i++){_8db=_8da[i];att=_8da.attributes[i];st=doc.createElement("style");st.setAttribute("type","text/css");for(var x in att){st.setAttribute(x,att[x]);}this._styleNodes.push(st);head.appendChild(st);if(st.styleSheet){st.styleSheet.cssText=_8db;}else{st.appendChild(doc.createTextNode(_8db));}}},empty:function(){this.inherited("empty",arguments);this._styles=[];},onBegin:function(){this.inherited("onBegin",arguments);var cont=this.content,node=this.node;var _8dc=this._styles;if(dojo.isString(cont)){if(this.adjustPaths&&this.referencePath){cont=_8c2(this.referencePath,cont);}if(this.renderStyles||this.cleanContent){cont=_8c9(this.referencePath,cont,_8dc);}if(this.executeScripts){var _8dd=this;var _8de={downloadRemote:true,errBack:function(e){_8dd._onError.call(_8dd,"Exec","Error downloading remote script in \""+_8dd.id+"\"",e);}};cont=_8d2(cont,_8de);this._code=_8de.code;}}this.content=cont;},onEnd:function(){var code=this._code,_8df=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}if(this.renderStyles&&_8df&&_8df.length){this._renderStyles(_8df);}if(this.executeScripts&&code){if(this.cleanContent){code=code.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"");}if(this.scriptHasHooks){code=code.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);}try{_8d8(code,this.node);}catch(e){this._onError("Exec","Error eval script in "+this.id+", "+e.message,e);}}this.inherited("onEnd",arguments);},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype);}});dojox.html.set=function(node,cont,_8e0){if(!_8e0){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojox.html._ContentSetter(dojo.mixin(_8e0,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dojox.layout.ContentPane"]){dojo._hasResource["dojox.layout.ContentPane"]=true;dojo.provide("dojox.layout.ContentPane");dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet;},onExecError:function(e){},_setContent:function(cont){var _8e1=this._contentSetter;if(!(_8e1&&_8e1 instanceof dojox.html._ContentSetter)){_8e1=this._contentSetter=new dojox.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _8e2=this.onContentError(e);try{this.containerNode.innerHTML=_8e2;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments);}});}if(!dojo._hasResource["dojox.layout.ResizeHandle"]){dojo._hasResource["dojox.layout.ResizeHandle"]=true;dojo.provide("dojox.layout.ResizeHandle");dojo.experimental("dojox.layout.ResizeHandle");dojo.declare("dojox.layout.ResizeHandle",[dijit._Widget,dijit._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=dijit.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new dojox.layout._ResizeHelper({id:"dojoxGlobalResizeHelper"}).placeAt(dojo.body());dojo.addClass(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _8e3=dojo.partial(dojo.addClass,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_8e3("dojoxResizeNW");break;case "x":this._resizeX=true;_8e3("dojoxResizeW");break;case "y":this._resizeY=true;_8e3("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return false;}dojo.publish(this.startTopic,[this]);this.targetWidget=dijit.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:dojo.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return false;}if(!this.activeResize){var c=dojo.coords(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var mb=this.targetWidget?dojo.marginBox(this.targetDomNode):dojo.contentBox(this.targetDomNode);this.startSize={w:mb.w,h:mb.h};if(this.fixedAspect){var max,val;if(mb.w>mb.h){max="w";val=mb.w/mb.h;}else{max="h";val=mb.h/mb.w;}this._aspect={prop:max};this._aspect[max]=val;}this._pconnects=[];this._pconnects.push(dojo.connect(dojo.doc,"onmousemove",this,"_updateSizing"));this._pconnects.push(dojo.connect(dojo.doc,"onmouseup",this,"_endSizing"));dojo.stopEvent(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=this.startPoint.x-e.clientX,dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0);return this._checkConstraints(newW,newH);},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var ta=this._aspect[this._aspect.prop];if(newW<newH){newH=newW*ta;}else{if(newH<newW){newW=newH*ta;}}}return {w:newW,h:newH};},_changeSizing:function(e){var tmp=this._getNewCoords(e);if(tmp===false){return;}if(this.targetWidget&&dojo.isFunction(this.targetWidget.resize)){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=dojo.fx[this.animateMethod]([dojo.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),dojo.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{dojo.style(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){dojo.forEach(this._pconnects,dojo.disconnect);var pub=dojo.partial(dojo.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});dojo.declare("dojox.layout._ResizeHelper",dijit._Widget,{show:function(){dojo.fadeIn({node:this.domNode,duration:120,beforeBegin:function(n){dojo.style(n,"display","");}}).play();},hide:function(){dojo.fadeOut({node:this.domNode,duration:250,onEnd:function(n){dojo.style(n,"display","none");}}).play();},resize:function(dim){dojo.marginBox(this.domNode,dim);}});}if(!dojo._hasResource["dojox.layout.FloatingPane"]){dojo._hasResource["dojox.layout.FloatingPane"]=true;dojo.provide("dojox.layout.FloatingPane");dojo.experimental("dojox.layout.FloatingPane");dojo.declare("dojox.layout.FloatingPane",[dojox.layout.ContentPane,dijit._Templated],{closable:true,dockable:true,resizable:false,maxable:false,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:dojo.cache("dojox.layout","resources/FloatingPane.html","<div class=\"dojoxFloatingPane\" id=\"${id}\">\n\t<div tabindex=\"0\" waiRole=\"button\" class=\"dojoxFloatingPaneTitle\" dojoAttachPoint=\"focusNode\">\n\t\t<span dojoAttachPoint=\"closeNode\" dojoAttachEvent=\"onclick: close\" class=\"dojoxFloatingCloseIcon\"></span>\n\t\t<span dojoAttachPoint=\"maxNode\" dojoAttachEvent=\"onclick: maximize\" class=\"dojoxFloatingMaximizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"restoreNode\" dojoAttachEvent=\"onclick: _restore\" class=\"dojoxFloatingRestoreIcon\">&thinsp;</span>\t\n\t\t<span dojoAttachPoint=\"dockNode\" dojoAttachEvent=\"onclick: minimize\" class=\"dojoxFloatingMinimizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"titleNode\" class=\"dijitInline dijitTitleNode\"></span>\n\t</div>\n\t<div dojoAttachPoint=\"canvas\" class=\"dojoxFloatingPaneCanvas\">\n\t\t<div dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\" class=\"${contentClass}\">\n\t\t</div>\n\t\t<span dojoAttachPoint=\"resizeHandle\" class=\"dojoxFloatingResizeHandle\"></span>\n\t</div>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:{type:"innerHTML",node:"titleNode"}}),postCreate:function(){this.inherited(arguments);new dojo.dnd.Moveable(this.domNode,{handle:this.focusNode});if(!this.dockable){this.dockNode.style.display="none";}if(!this.closable){this.closeNode.style.display="none";}if(!this.maxable){this.maxNode.style.display="none";this.restoreNode.style.display="none";}if(!this.resizable){this.resizeHandle.style.display="none";}else{this.domNode.style.width=dojo.marginBox(this.domNode).w+"px";}this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new dijit.BackgroundIframe(this.domNode);this._naturalState=dojo.coords(this.domNode);},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.resizable){if(dojo.isIE){this.canvas.style.overflow="auto";}else{this.containerNode.style.overflow="auto";}this._resizeHandle=new dojox.layout.ResizeHandle({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle);}if(this.dockable){var _8e4=this.dockTo;if(this.dockTo){this.dockTo=dijit.byId(this.dockTo);}else{this.dockTo=dijit.byId("dojoxGlobalFloatingDock");}if(!this.dockTo){var _8e5,_8e6;if(_8e4){_8e5=_8e4;_8e6=dojo.byId(_8e4);}else{_8e6=dojo.create("div",null,dojo.body());dojo.addClass(_8e6,"dojoxFloatingDockDefault");_8e5="dojoxGlobalFloatingDock";}this.dockTo=new dojox.layout.Dock({id:_8e5,autoPosition:"south"},_8e6);this.dockTo.startup();}if((this.domNode.style.display=="none")||(this.domNode.style.visibility=="hidden")){this.minimize();}}this.connect(this.focusNode,"onmousedown","bringToTop");this.connect(this.domNode,"onmousedown","bringToTop");this.resize(dojo.coords(this.domNode));this._started=true;},setTitle:function(_8e7){dojo.deprecated("pane.setTitle","Use pane.attr('title', someTitle)","2.0");this.attr("title",_8e7);},close:function(){if(!this.closable){return;}dojo.unsubscribe(this._listener);this.hide(dojo.hitch(this,function(){this.destroyRecursive();}));},hide:function(_8e8){dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(_8e8){_8e8();}})}).play();},show:function(_8e9){var anim=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility="visible";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(typeof _8e9=="function"){_8e9();}this._isDocked=false;if(this._dockNode){this._dockNode.destroy();this._dockNode=null;}})}).play();this.resize(dojo.coords(this.domNode));},minimize:function(){if(!this._isDocked){this.hide(dojo.hitch(this,"_dock"));}},maximize:function(){if(this._maximized){return;}this._naturalState=dojo.position(this.domNode);if(this._isDocked){this.show();setTimeout(dojo.hitch(this,"maximize"),this.duration);}dojo.addClass(this.focusNode,"floatingPaneMaximized");this.resize(dijit.getViewport());this._maximized=true;},_restore:function(){if(this._maximized){this.resize(this._naturalState);dojo.removeClass(this.focusNode,"floatingPaneMaximized");this._maximized=false;}},_dock:function(){if(!this._isDocked&&this.dockable){this._dockNode=this.dockTo.addNode(this);this._isDocked=true;}},resize:function(dim){dim=dim||this._naturalState;this._currentState=dim;var dns=this.domNode.style;if("t" in dim){dns.top=dim.t+"px";}if("l" in dim){dns.left=dim.l+"px";}dns.width=dim.w+"px";dns.height=dim.h+"px";var _8ea={l:0,t:0,w:dim.w,h:(dim.h-this.focusNode.offsetHeight)};dojo.marginBox(this.canvas,_8ea);this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(_8ea);}},bringToTop:function(){var _8eb=dojo.filter(this._allFPs,function(i){return i!==this;},this);_8eb.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex;});_8eb.push(this);dojo.forEach(_8eb,function(w,x){w.domNode.style.zIndex=this._startZ+(x*2);dojo.removeClass(w.domNode,"dojoxFloatingPaneFg");},this);dojo.addClass(this.domNode,"dojoxFloatingPaneFg");},destroy:function(){this._allFPs.splice(dojo.indexOf(this._allFPs,this),1);if(this._resizeHandle){this._resizeHandle.destroy();}this.inherited(arguments);}});dojo.declare("dojox.layout.Dock",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dojoxDock\"><ul dojoAttachPoint=\"containerNode\" class=\"dojoxDockList\"></ul></div>",_docked:[],_inPositioning:false,autoPosition:false,addNode:function(_8ec){var div=dojo.create("li",null,this.containerNode),node=new dojox.layout._DockNode({title:_8ec.title,paneRef:_8ec},div);node.startup();return node;},startup:function(){if(this.id=="dojoxGlobalFloatingDock"||this.isFixedDock){this.connect(window,"onresize","_positionDock");this.connect(window,"onscroll","_positionDock");if(dojo.isIE){this.connect(this.domNode,"onresize","_positionDock");}}this._positionDock(null);this.inherited(arguments);},_positionDock:function(e){if(!this._inPositioning){if(this.autoPosition=="south"){setTimeout(dojo.hitch(this,function(){this._inPositiononing=true;var _8ed=dijit.getViewport();var s=this.domNode.style;s.left=_8ed.l+"px";s.width=(_8ed.w-2)+"px";s.top=(_8ed.h+_8ed.t)-this.domNode.offsetHeight+"px";this._inPositioning=false;}),125);}}}});dojo.declare("dojox.layout._DockNode",[dijit._Widget,dijit._Templated],{title:"",paneRef:null,templateString:"<li dojoAttachEvent=\"onclick: restore\" class=\"dojoxDockNode\">"+"<span dojoAttachPoint=\"restoreNode\" class=\"dojoxDockRestoreButton\" dojoAttachEvent=\"onclick: restore\"></span>"+"<span class=\"dojoxDockTitleNode\" dojoAttachPoint=\"titleNode\">${title}</span>"+"</li>",restore:function(){this.paneRef.show();this.paneRef.bringToTop();if(!this.paneRef.isLoaded){this.paneRef.refresh();}this.destroy();}});}if(!dojo._hasResource["dojox.widget.Toaster"]){dojo._hasResource["dojox.widget.Toaster"]=true;dojo.provide("dojox.widget.Toaster");dojo.declare("dojox.widget.Toaster",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitToasterClip\" dojoAttachPoint=\"clipNode\"><div class=\"dijitToasterContainer\" dojoAttachPoint=\"containerNode\" dojoAttachEvent=\"onclick:onSelect\"><div class=\"dijitToasterContent\" dojoAttachPoint=\"contentNode\"></div></div></div>",messageTopic:"",messageTypes:{MESSAGE:"message",WARNING:"warning",ERROR:"error",FATAL:"fatal"},defaultType:"message",positionDirection:"br-up",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:2000,slideDuration:500,separator:"<hr></hr>",postCreate:function(){this.inherited(arguments);this.hide();dojo.body().appendChild(this.domNode);if(this.messageTopic){dojo.subscribe(this.messageTopic,this,"_handleMessage");}},_handleMessage:function(_8ee){if(dojo.isString(_8ee)){this.setContent(_8ee);}else{this.setContent(_8ee.message,_8ee.type,_8ee.duration);}},_capitalize:function(w){return w.substring(0,1).toUpperCase()+w.substring(1);},setContent:function(_8ef,_8f0,_8f1){_8f1=_8f1||this.duration;if(this.slideAnim){if(this.slideAnim.status()!="playing"){this.slideAnim.stop();}if(this.slideAnim.status()=="playing"||(this.fadeAnim&&this.fadeAnim.status()=="playing")){setTimeout(dojo.hitch(this,function(){this.setContent(_8ef,_8f0,_8f1);}),50);return;}}for(var type in this.messageTypes){dojo.removeClass(this.containerNode,"dijitToaster"+this._capitalize(this.messageTypes[type]));}dojo.style(this.containerNode,"opacity",1);this._setContent(_8ef);dojo.addClass(this.containerNode,"dijitToaster"+this._capitalize(_8f0||this.defaultType));this.show();var _8f2=dojo.marginBox(this.containerNode);this._cancelHideTimer();if(this.isVisible){this._placeClip();if(!this._stickyMessage){this._setHideTimer(_8f1);}}else{var _8f3=this.containerNode.style;var pd=this.positionDirection;if(pd.indexOf("-up")>=0){_8f3.left=0+"px";_8f3.top=_8f2.h+10+"px";}else{if(pd.indexOf("-left")>=0){_8f3.left=_8f2.w+10+"px";_8f3.top=0+"px";}else{if(pd.indexOf("-right")>=0){_8f3.left=0-_8f2.w-10+"px";_8f3.top=0+"px";}else{if(pd.indexOf("-down")>=0){_8f3.left=0+"px";_8f3.top=0-_8f2.h-10+"px";}else{throw new Error(this.id+".positionDirection is invalid: "+pd);}}}}this.slideAnim=dojo.fx.slideTo({node:this.containerNode,top:0,left:0,duration:this.slideDuration});this.connect(this.slideAnim,"onEnd",function(_8f4,anim){this.fadeAnim=dojo.fadeOut({node:this.containerNode,duration:1000});this.connect(this.fadeAnim,"onEnd",function(evt){this.isVisible=false;this.hide();});this._setHideTimer(_8f1);this.connect(this,"onSelect",function(evt){this._cancelHideTimer();this._stickyMessage=false;this.fadeAnim.play();});this.isVisible=true;});this.slideAnim.play();}},_setContent:function(_8f5){if(dojo.isFunction(_8f5)){_8f5(this);return;}if(_8f5&&this.isVisible){_8f5=this.contentNode.innerHTML+this.separator+_8f5;}this.contentNode.innerHTML=_8f5;},_cancelHideTimer:function(){if(this._hideTimer){clearTimeout(this._hideTimer);this._hideTimer=null;}},_setHideTimer:function(_8f6){this._cancelHideTimer();if(_8f6>0){this._cancelHideTimer();this._hideTimer=setTimeout(dojo.hitch(this,function(evt){if(this.bgIframe&&this.bgIframe.iframe){this.bgIframe.iframe.style.display="none";}this._hideTimer=null;this._stickyMessage=false;this.fadeAnim.play();}),_8f6);}else{this._stickyMessage=true;}},_placeClip:function(){var view=dijit.getViewport();var _8f7=dojo.marginBox(this.containerNode);var _8f8=this.clipNode.style;_8f8.height=_8f7.h+"px";_8f8.width=_8f7.w+"px";var pd=this.positionDirection;if(pd.match(/^t/)){_8f8.top=view.t+"px";}else{if(pd.match(/^b/)){_8f8.top=(view.h-_8f7.h-2+view.t)+"px";}}if(pd.match(/^[tb]r-/)){_8f8.left=(view.w-_8f7.w-1-view.l)+"px";}else{if(pd.match(/^[tb]l-/)){_8f8.left=0+"px";}}_8f8.clip="rect(0px, "+_8f7.w+"px, "+_8f7.h+"px, 0px)";if(dojo.isIE){if(!this.bgIframe){this.clipNode.id=dijit.getUniqueId("dojox_widget_Toaster_clipNode");this.bgIframe=new dijit.BackgroundIframe(this.clipNode);}var _8f9=this.bgIframe.iframe;if(_8f9){_8f9.style.display="block";}}},onSelect:function(e){},show:function(){dojo.style(this.domNode,"display","block");this._placeClip();if(!this._scrollConnected){this._scrollConnected=dojo.connect(window,"onscroll",this,this._placeClip);}},hide:function(){dojo.style(this.domNode,"display","none");if(this._scrollConnected){dojo.disconnect(this._scrollConnected);this._scrollConnected=false;}dojo.style(this.containerNode,"opacity",1);}});}if(!dojo._hasResource["demos.widget.GraphEditor"]){dojo._hasResource["demos.widget.GraphEditor"]=true;dojo.provide("demos.widget.GraphEditor");dojo.declare("demos.widget.GraphEditor",[dijit._Widget,dijit._Templated],{baseURL:".",path:"",zoomFactor:2,contextMenu:null,canvas:null,overview:null,toolbar:null,canvasPane:null,_layoutContainer:null,_overviewPane:null,_optionsPane:null,_optionsContents:null,_nodeChoice:null,_hierarchyManager:null,_editMode:null,_zoomAreaMode:null,_squelchClickMode:null,_newButton:null,_newMenu:null,_downloadButton:null,_downloadMenu:null,_editButton:null,_deleteButton:null,_zoomInButton:null,_zoomOutButton:null,_zoomAreaButton:null,_fitContentButton:null,_zoomInMenu:null,_zoomOutMenu:null,_fitContentMenu:null,_viewParentMenu:null,_viewGroupMenu:null,_groupMenu:null,_ungroupMenu:null,_openGroupMenu:null,_closeGroupMenu:null,_layoutMenu:null,_hierarchicalMenu:null,_organicMenu:null,_orthogonalMenu:null,_overviewMenu:null,_paletteMenu:null,_helpMenu:null,_optionsMenu:null,_zoomFactorSpinner:null,_sensitivitySlider:null,_sensitivityValue:null,_formatSelect:null,_contextMenu:null,_zoomInContextMenu:null,_zoomOutContextMenu:null,_fitContentContextMenu:null,_deleteContextMenu:null,_editLabelContextMenu:null,_openURLContextMenu:null,_lastId:null,_lastHref:null,_editModeActiveOnMenuOpen:false,templateString:"<div class=\"graphEditorRoot\">\n<!--                                                                     -->\n<!--  This file is part of yFiles AJAX.                                  -->\n<!--                                                                     -->\n<!--  yWorks proprietary/confidential. Use is subject to license terms.  -->\n<!--                                                                     -->\n<!--  Unauthorized redistribution of this file is strictly forbidden.    -->\n<!--                                                                     -->\n<!--  Copyright (c) 2006-2010 by yWorks GmbH, Vor dem Kreuzberg 28,      -->\n<!--  72070 Tuebingen, Germany. All rights reserved.                     -->\n<!--                                                                     -->\n\n<!-- ------------------ 1. Static Content ------------------- -->\n<div dojoType=\"dijit.layout.BorderContainer\" gutters=\"false\"\n  liveSplitters=\"false\" style=\"width: 100%; height: 100%;\" dojoAttachPoint=\"_layoutContainer\" class=\"graphEditorLayout\">\n\n  <div dojoType=\"dijit.layout.ContentPane\" region=\"top\">\n  <!-- ---------------------- Menu Bar ---------------------- -->\n  <div dojoType=\"dijit.MenuBar\" class=\"menuBar\">\n\t\t<div dojoType=\"dijit.PopupMenuBarItem\">\n\t\t\t<span>File</span>\n\t\t\t<div dojoType=\"dijit.Menu\">\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_newMenu\"\n             iconClass=\"yFilesEditorIcon yFilesEditorIconNew\">New</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_downloadMenu\"\n             iconClass=\"yFilesEditorIcon yFilesEditorIconDownload\">Download</div>\n\t\t\t</div>\n\t\t</div>\n    <div dojoType=\"dijit.PopupMenuBarItem\">\n\t\t\t<span>View</span>\n\t\t\t<div dojoType=\"dijit.Menu\">\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_zoomInMenu\"\n             iconClass=\"yFilesEditorIcon yFilesEditorIconZoomIn\">Zoom In</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_zoomOutMenu\"\n             iconClass=\"yFilesEditorIcon yFilesEditorIconZoomOut\">Zoom Out</div>\n        <div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_fitContentMenu\"\n             iconClass=\"yFilesEditorIcon yFilesEditorIconFitContent\">Fit Content</div>\n      </div>\n\t\t</div>\n    <div dojoType=\"dijit.PopupMenuBarItem\">\n\t\t\t<span>Grouping</span>\n\t\t\t<div dojoType=\"dijit.Menu\">\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_viewParentMenu\">View Parent</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_viewGroupMenu\">View Group Content</div>\n        <div dojoType=\"dijit.MenuSeparator\"></div>        \n        <div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_groupMenu\">Group</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_ungroupMenu\">Ungroup</div>\n        <div dojoType=\"dijit.MenuSeparator\"></div> \n        <div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_openGroupMenu\">Open Group</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_closeGroupMenu\">Close Group</div>\n      </div>\n\t\t</div>\n    <div dojoType=\"dijit.PopupMenuBarItem\" dojoAttachPoint=\"_layoutMenu\">\n\t\t\t<span>Layout</span>\n\t\t\t<div dojoType=\"dijit.Menu\">\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_hierarchicalMenu\">Hierarchical</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_organicMenu\">Organic</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_orthogonalMenu\">Orthogonal</div>\n\t\t\t</div>\n\t\t</div>\n    <div dojoType=\"dijit.PopupMenuBarItem\">\n\t\t\t<span>Windows</span>\n      <!--<div dojoType=\"dijit.Menu\">-->\n\t\t\t\t<!--<div dojoType=\"dijit.CheckedMenuItem\" dojoAttachPoint=\"_overviewMenu\">Overview</div>-->\n\t\t\t\t<!--<div dojoType=\"dijit.CheckedMenuItem\" dojoAttachPoint=\"_paletteMenu\">Palette</div>-->\n\t\t\t\t<!--<div dojoType=\"dijit.CheckedMenuItem\" dojoAttachPoint=\"_optionsMenu\">Options</div>-->\n\t\t\t<!--</div>-->\n\n      <div dojoType=\"dijit.Menu\">\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_overviewMenu\">Overview</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_paletteMenu\">Palette</div>\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_optionsMenu\">Options</div>\n\t\t\t</div>\n    </div>\n    <div dojoType=\"dijit.PopupMenuBarItem\">\n\t\t\t<span>Help</span>\n\t\t\t<div dojoType=\"dijit.Menu\">\n\t\t\t\t<div dojoType=\"dijit.MenuItem\" dojoAttachPoint=\"_helpMenu\"\n             iconClass=\"yFilesEditorIcon yFilesEditorIconHelp\">Help</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n  <!-- ---------------------- Toolbar ---------------------- -->\n  <div dojoType=\"dijit.Toolbar\" dojoAttachPoint=\"toolbar\" layoutAlign=\"top\">\n\n  <button name=\"new\" dojoAttachPoint=\"_newButton\" dojoType=\"dijit.form.Button\" title=\"New\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconNew\" showLabel=\"false\">New\n  </button>\n  <button name=\"download\" dojoAttachPoint=\"_downloadButton\" dojoType=\"dijit.form.Button\" title=\"Download\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconDownload\" showLabel=\"false\">Download\n  </button>\n\n  <div dojoType=\"dijit.ToolbarSeparator\">&nbsp;</div>\n\n  <button name=\"edit\" dojoAttachPoint=\"_editButton\" dojoType=\"dijit.form.ToggleButton\" title=\"Toggle Pan/Edit Mode\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconEdit\" checked=\"checked\" showLabel=\"false\">Toggle Pan/Edit Mode\n  </button>\n  <button name=\"delete\" dojoAttachPoint=\"_deleteButton\" dojoType=\"dijit.form.Button\" title=\"Delete Selection\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconDelete\" showLabel=\"false\">Delete Selection\n  </button>\n\n  <div dojoType=\"dijit.ToolbarSeparator\">&nbsp;</div>\n\n  <button name=\"zoomIn\" dojoAttachPoint=\"_zoomInButton\" dojoType=\"dijit.form.Button\" title=\"Zoom In\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconZoomIn\" showLabel=\"false\">Zoom In\n  </button>\n  <button name=\"zoomOut\" dojoAttachPoint=\"_zoomOutButton\" dojoType=\"dijit.form.Button\" title=\"Zoom Out\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconZoomOut\" showLabel=\"false\">Zoom Out\n  </button>\n  <button name=\"zoomArea\" dojoAttachPoint=\"_zoomAreaButton\" dojoType=\"dijit.form.ToggleButton\" title=\"Zoom Area\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconZoomArea\" showLabel=\"false\">Zoom Area\n  </button>\n  <button name=\"fitContent\" dojoAttachPoint=\"_fitContentButton\" dojoType=\"dijit.form.Button\" title=\"Fit Content\"\n          iconClass=\"yFilesEditorIcon yFilesEditorIconFitContent\" showLabel=\"false\">Fit Content\n  </button>\n</div>\n</div>\n\n<div dojoType=\"dijit.layout.ContentPane\" region=\"center\">  \n    <!-- ---------------------- Graph Canvas ---------------------- -->\n  <div dojoType=\"yfiles.client.tiles.widget.GraphCanvas\" dojoAttachPoint=\"canvas\" layoutAlign=\"client\"\n       nodeEvents=\"true\" edgeEvents=\"true\" nodeLabelEvents=\"true\" paperEvents=\"true\" maxZoomForFitContent=\"1.0\">\n  </div>\n</div>\n</div>  \n\n<!-- ----------------- 2. Dynamic Content ----------------- -->\n<!-- ---------------------- Overview ---------------------- -->\n<div dojoAttachPoint=\"_overviewPane\" dojoType=\"dojox.layout.FloatingPane\" closable=\"true\" resizable=\"true\"\n     dockable=\"false\" title=\"Overview\" contentClass=\"graphEditorOverview\"\n     style=\"top: 80px; left: 40px; width: 200px; height: 150px; position: absolute;z-index:101\">\n    <div dojoType=\"yfiles.client.tiles.widget.GraphCanvas\" dojoAttachPoint=\"overview\"\n         tileSize=\"350\" layoutAlign=\"client\"></div>\n</div>\n\n<!-- ----------------------- Options ---------------------- -->\n<div dojoAttachPoint=\"_optionsPane\" dojoType=\"dojox.layout.FloatingPane\" title=\"Options\" class=\"graphEditorOptions\"\n         closable=\"true\" resizable=\"false\" dockable=\"false\"\n         style=\"width: 500px; height: 280px; left: 60px; top: 60px; position: absolute;\">\n      <div dojoAttachPoint=\"_optionsContents\" style=\"padding: 10px;\">\n        <div dojoType=\"dijit.layout.TabContainer\" style=\"height: 200px;\">\n          <div dojoType=\"dijit.layout.ContentPane\" title=\"Zoom\" style=\"overflow: hidden; padding:5px; height: 200px\">\n            <p><b>Zoom Factor</b> <input dojoType=\"dijit.form.NumberSpinner\" value=\"2.0\"\n                                         smallDelta=\"0.1\" constraints=\"{min:1.1,max:10.0,places:1,round:true}\"\n                                         maxlength=\"7\" dojoAttachPoint=\"_zoomFactorSpinner\"></p>\n\n            <p>\n              The Zoom Factor determines by how much the zoom value is changed, if you zoom in or zoom out\n              using the toolbar buttons.\n            </p>\n          </div>\n          <div dojoType=\"dijit.layout.ContentPane\" title=\"Hit Test\" style=\"overflow: hidden; padding:5px;  height: 200px\">\n            <p><b>Edge Test Sensitivity:</b> <span dojoAttachPoint=\"_sensitivityValue\">5</span></p>\n\n            <div style=\"padding-left: 5px; padding-right: 5px;\"\n                 dojoAttachPoint=\"_sensitivitySlider\" dojoType=\"dijit.form.HorizontalSlider\" value=\"5\"\n                 minimum=\"1\" maximum=\"15\" discreteValues=\"15\" intermediateChanges=\"true\">\n              <div dojoType=\"dijit.form.HorizontalRule\" container=\"bottomDecoration\" count=\"8\"\n                   style=\"height:5px;\"></div>\n              <ol dojoType=\"dijit.form.HorizontalRuleLabels\" container=\"bottomDecoration\"\n                  style=\"height:1.2em;font-size:75%;color:gray;\"\n                  count=\"8\" minimum=\"1\" maximum=\"15\" constraints=\"{pattern:'#'}\"></ol>\n            </div>\n\n            <p>\n              The mouse is considered to be over an edge, if its distance in pixels to the centerline of the edge\n              is at most the Edge Test Sensitivity.\n            </p>\n          </div>\n          <div dojoType=\"dijit.layout.ContentPane\" title=\"Download\" style=\"overflow: hidden; padding:5px;  height: 200px\">\n            <p><b>Download Format</b></p>\n            <select title=\"Choose a Download Format\" dojoAttachPoint=\"_formatSelect\">\n              <!-- filled dynamically -->\n            </select>\n\n            <p>\n              Downloaded graphs will be served using the specified format.\n            </p>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n<!-- ---------------------- Palette ---------------------- -->\n<div title=\"Node Types\" dojoAttachPoint=\"_nodeChoice\" dojoType=\"dojox.layout.FloatingPane\"\n     contentClass=\"graphEditorNodeTypes\" dockable=\"false\" closable=\"true\" resizable=\"true\"\n     style=\"width: 200px; height: 160px; left: 40px; top: 250px; position: absolute;z-index:100\">\n</div>\n\n<!-- -------------------- context menu -------------------- -->\n<div dojoAttachPoint=\"_contextMenu\" dojoType=\"dijit.Menu\" contextMenuForWindow=\"true\">\n  <div dojoType=\"dijit.MenuItem\" iconClass=\"yFilesEditorIcon yFilesEditorIconZoomIn\" label=\"Zoom In\"\n       dojoAttachPoint=\"_zoomInContextMenu\"></div>\n  <div dojoType=\"dijit.MenuItem\" iconClass=\"yFilesEditorIcon yFilesEditorIconZoomOut\" label=\"Zoom Out\"\n       dojoAttachPoint=\"_zoomOutContextMenu\"></div>\n  <div dojoType=\"dijit.MenuItem\" iconClass=\"yFilesEditorIcon yFilesEditorIconFitContent\" label=\"Fit Content\"\n       dojoAttachPoint=\"_fitContentContextMenu\"></div>\n  <div dojoType=\"dijit.MenuSeparator\"></div>\n  <div dojoType=\"dijit.MenuItem\" iconClass=\"yFilesEditorIcon yFilesEditorIconDelete\" label=\"Delete\" disabled=\"true\"\n       dojoAttachPoint=\"_deleteContextMenu\"></div>\n  <div dojoType=\"dijit.MenuItem\" iconClass=\"yFilesEditorIcon yFilesEditorIconEditLabel\" label=\"Edit Label\"\n       disabled=\"true\" dojoAttachPoint=\"_editLabelContextMenu\"></div>\n  <div dojoType=\"dijit.MenuSeparator\"></div>\n  <div dojoType=\"dijit.MenuItem\" iconClass=\"yFilesEditorIcon yFilesEditorIconOpenUrl\" label=\"Open URL\" disabled=\"true\"\n       dojoAttachPoint=\"_openURLContextMenu\"></div>\n</div>\n\n<!-- -------------------- Special Info -------------------- -->\n<div dojoType=\"dojox.widget.Toaster\" positionDirection=\"tr-down\" messageTopic=\"yGraphEditorTopic\"></div>\n\n</div>\n",widgetsInTemplate:true,postCreate:function(){this.setBaseURL(this.baseURL);this._hierarchyManager=new yfiles.client.tiles.HierarchyManager(this.canvas.getGraph());this.overview.setNoInteractionMode();var _8fa=new yfiles.client.tiles.widget.ViewPortMarker({canvas:this.canvas,overview:this.overview});this.overview.domNode.appendChild(_8fa.domNode);var _8fb=this._overviewPane;_8fb.resize({w:200,h:150});_8fb.close=function(){_8fb.hide();};var _8fc=this._optionsPane;_8fc.close=function(){_8fc.hide();};_8fc.hide();this._createNodePalette();this._zoomAreaMode=new yfiles.client.tiles.ZoomAreaMode(this.canvas);this._editMode=new yfiles.client.tiles.EditMode(this.canvas,true,true,false,this._hierarchyManager);this._squelchClickMode=new yfiles.client.tiles.SquelchClickMode(this.canvas);this._editMode.setEdgeTestSensitivity(5);this._editMode.getMoveSelectionMode().setRouteEdges(false);this.setPath(this.path);this._initActions();},setBaseURL:function(_8fd){this.baseURL=_8fd;this.canvas.setBaseURL(_8fd);this.overview.setBaseURL(_8fd);},setPath:function(path,_8fe){this.path=path;dojo.doc.title="Graph Editor ["+path+"]";this.canvas.setPath(path,!_8fe);},_initActions:function(){this._connectMenu();this._connectToolbar();this._connectContextMenu();this._connectGraphEvents();this._connectHierarchyEvents();this._connectCanvasEvents();this._connectInputModes();this.connect(this._zoomFactorSpinner,"onChange","_changeZoomFactor");this.connect(this._sensitivitySlider,"onChange","_changeSensitivity");this._initFormatSelection();this._setEditMode();},_connectMenu:function(){this.connect(this._newMenu,"onClick","_newGraph");this.connect(this._downloadMenu,"onClick","_downloadGraph");this.connect(this._zoomInMenu,"onClick","_zoomIn");this.connect(this._zoomOutMenu,"onClick","_zoomOut");this.connect(this._fitContentMenu,"onClick","_fitContent");this.connect(this._viewParentMenu,"onClick","_viewParent");this.connect(this._viewGroupMenu,"onClick","_viewGroup");this.connect(this._groupMenu,"onClick","_group");this.connect(this._ungroupMenu,"onClick","_ungroup");this.connect(this._openGroupMenu,"onClick","_openGroup");this.connect(this._closeGroupMenu,"onClick","_closeGroup");var _8ff=dojo.hitch(this,this._doLayout,"hierarchic");this.connect(this._hierarchicalMenu,"onClick",_8ff);var _900=dojo.hitch(this,this._doLayout,"organic");this.connect(this._organicMenu,"onClick",_900);var _901=dojo.hitch(this,this._doLayout,"orthogonal");this.connect(this._orthogonalMenu,"onClick",_901);var _902=dojo.hitch(this,this._showFloatingPane,this._overviewPane);this.connect(this._overviewMenu,"onClick",_902);var _903=dojo.hitch(this,this._showFloatingPane,this._nodeChoice);this.connect(this._paletteMenu,"onClick",_903);var _904=dojo.hitch(this,this._showFloatingPane,this._optionsPane);this.connect(this._optionsMenu,"onClick",_904);this.connect(this._helpMenu,"onClick","_openHelp");},_connectToolbar:function(){this._deleteButton.setDisabled(true);this.connect(this._newButton,"onClick","_newGraph");this.connect(this._downloadButton,"onClick","_downloadGraph");this.connect(this._editButton,"onChange","_toggleEditMode");this.connect(this._deleteButton,"onClick","_deleteSelection");this.connect(this._zoomInButton,"onClick","_zoomIn");this.connect(this._zoomOutButton,"onClick","_zoomOut");this.connect(this._zoomAreaButton,"onChange","_toggleZoomMode");this.connect(this._fitContentButton,"onClick","_fitContent");},_connectInputModes:function(){var self=this;var _905=function(){self._zoomAreaButton.attr("checked",false);};this.connect(this._zoomAreaMode,"deactivate",_905);var _906=dojo.hitch(this,this._selectButton,this._editButton);this.connect(this._editMode,"onReactivate",_906);this.connect(this._editMode,"deactivate","_onDeactivateEditMode");this.connect(this._editMode,"activate","_onActivateEditMode");},_connectGraphEvents:function(){var _907=this.canvas.getGraph();this.connect(_907,"onNodeCreated","_refreshOverview");this.connect(_907,"onEdgeCreated","_refreshOverview");this.connect(_907,"onLabelSet","_refreshOverview");this.connect(_907,"onNodesMoved","_refreshOverview");this.connect(_907,"onRemove","_refreshOverview");},_connectHierarchyEvents:function(){var _908=this._hierarchyManager;this.connect(_908,"onCreateGroup","_refreshCanvas");this.connect(_908,"onCloseGroup","_refreshCanvas");this.connect(_908,"onOpenGroup","_refreshCanvas");this.connect(_908,"onMoveToSubgraph","_refreshCanvasOnGroupMove");this.connect(_908,"onMoveToParent","_refreshCanvasOnGroupMove");this.connect(_908,"onSwitchToSubgraph","_refreshCanvasOnGroupSwitch");this.connect(_908,"onSwitchToParent","_refreshCanvasOnGroupSwitch");},_connectContextMenu:function(){this.connect(this._contextMenu,"onOpen","_contextMenuOpened");this.connect(this._zoomInContextMenu,"onClick","_zoomIn");this.connect(this._zoomOutContextMenu,"onClick","_zoomOut");this.connect(this._fitContentContextMenu,"onClick","_fitContent");this.connect(this._deleteContextMenu,"onClick","_deleteHover");this.connect(this._editLabelContextMenu,"onClick","_editLabelHover");this.connect(this._openURLContextMenu,"onClick","_openURL");},_connectCanvasEvents:function(){this.connect(this.canvas,"onClickNode","_onClickNodeOrEdge");this.connect(this.canvas,"onClickEdge","_onClickNodeOrEdge");this.connect(this.canvas,"onMouseOverNode","_onMouseOverNodeOrEdge");this.connect(this.canvas,"onMouseOverEdge","_onMouseOverNodeOrEdge");this.connect(this.canvas,"onMouseOutNode","_unIndicateURL");this.connect(this.canvas,"onMouseOutEdge","_unIndicateURL");dojo.connect(this.canvas,"pathSet",this.overview,"setPath");},_refreshCanvas:function(id,_909){this.canvas.refresh(_909);this._refreshOverview();},_refreshCanvasOnGroupMove:function(id,_90a){this._editMode.getSelection().clear();this._refreshCanvas(id,_90a);},_refreshCanvasOnGroupSwitch:function(id,_90b){this._refreshCanvasOnGroupMove(id,_90b);this.canvas.fitContent();},_viewParent:function(){this._hierarchyManager.switchToParent();},_viewGroup:function(){var _90c=this._editMode.getSelection().getNodes();if(_90c.length==1){this._hierarchyManager.switchToSubgraph(_90c[0]);}},_group:function(){var _90d=this._editMode.getSelection().getNodes();if(_90d.length>0){var _90e=this._hierarchyManager;_90e.createGroup({subNodeIds:_90d});}},_ungroup:function(){var _90f=this._editMode.getSelection().getNodes();if(_90f.length>0){var _910=this._hierarchyManager;for(var i=0;i<_90f.length;i++){var node=_90f[i];var _911=_910.getParent(node);if(_911&&_910.isGroupNode(_911)){_910.moveToParent([node]);}}}},_openGroup:function(){var _912=this._editMode.getSelection().getNodes();if(_912.length>0){var _913=this._hierarchyManager;for(var i=0;i<_912.length;i++){var node=_912[i];if(_913.isFolderNode(node)){_913.openGroup(node);}}}},_closeGroup:function(){var _914=this._editMode.getSelection().getNodes();if(_914.length>0){var _915=this._hierarchyManager;for(var i=0;i<_914.length;i++){var node=_914[i];if(_915.isGroupNode(node)){_915.closeGroup(node);}}}},_onDeactivateEditMode:function(){this._deselectButton(this._editButton);this._deleteButton.setDisabled(true);this._paletteMenu.setDisabled(true);this._layoutMenu.setDisabled(true);},_onActivateEditMode:function(){this._selectButton(this._editButton);this._zoomAreaMode.deactivate();this._paletteMenu.setDisabled(false);this._layoutMenu.setDisabled(false);this._deleteButton.setDisabled(false);},_initFormatSelection:function(){var self=this;dojo.xhrGet({url:this.baseURL+"/downloadableFormats",load:function(list,_916){var _917=self._formatSelect;for(var idx in list){var _918=list[idx];var desc=_918[0];var _919=_918[1];if(_919!="ygf"&&_919!="gml"&&_919!="tgf"){var _91a=dojo.doc.createElement("OPTION");_91a.setAttribute("value",_919);_91a.appendChild(dojo.doc.createTextNode(desc+" (*."+_919+")"));_917.appendChild(_91a);}}},handleAs:"json"});},_downloadGraph:function(){this._editMode.deactivate();var _91b=this._formatSelect.value;var _91c=this.path;var _91d=this.path.lastIndexOf(".");if(_91d>0){_91c=_91c.substring(0,_91d);}var _91e=_91c+"."+_91b;var pf="?path="+this.path+"&format="+_91b;var vp;with(this.canvas){vp="&x="+(-x)+"&y="+(-y)+"&w="+width+"&h="+height+"&z="+zoom;}window.location.href=this.baseURL+"/downloadGraph/"+_91e+pf+vp;},_newGraph:function(){var name="<New Graph>";var self=this;dojo.xhrPost({url:this.baseURL+"/newGraph",content:{name:name},load:function(res,_91f){self.setPath(name,true);}});},_toggleZoomMode:function(){if(this._zoomAreaButton.checked){this._activateZoomArea();}else{if(this._zoomAreaMode.isActive()){this._zoomAreaMode.deactivate();}}},_activateZoomArea:function(){if(this._editMode.isActive()){this._deselectButton(this._editButton);this._editMode.setChild(this._zoomAreaMode);}else{this._zoomAreaMode.activate();}},_selectButton:function(_920){_920.checked=true;dojo.attr(_920.focusNode||_920.domNode,"checked",true);dijit.setWaiState(_920.focusNode||_920.domNode,"pressed",true);_920._setStateClass();},_deselectButton:function(_921){_921.checked=false;dojo.attr(_921.focusNode||_921.domNode,"checked",false);dijit.setWaiState(_921.focusNode||_921.domNode,"pressed",false);_921._setStateClass();},_zoomIn:function(){this.canvas.setZoom(this.canvas.zoom*this.zoomFactor);if(this._squelchClickMode.isActive()){this._squelchClickMode.deactivate();}},_zoomOut:function(){this.canvas.setZoom(this.canvas.zoom/this.zoomFactor);if(this._squelchClickMode.isActive()){this._squelchClickMode.deactivate();}},_fitContent:function(){this.canvas.fitContent();if(this._squelchClickMode.isActive()){this._squelchClickMode.deactivate();}},_showFloatingPane:function(pane){if(pane.domNode.style.visibility=="hidden"){pane.show(function(){pane.bringToTop();});}},_toggleEditMode:function(){if(!this._editMode.isActive()){this._setEditMode();}else{this._editMode.deactivate();}},_setEditMode:function(){this._zoomAreaMode.deactivate();this._editMode.activate();},_doLayout:function(_922){dojo.xhrPost({url:this.baseURL+"/layout",content:{"name":this.path,"type":_922},load:dojo.hitch(this,this._refresh),handleAs:"json"});},_refresh:function(_923,_924){this._hierarchyManager.refresh();this.canvas.refresh(_923);this.canvas.fitContent();this._refreshOverview();},_changeZoomFactor:function(_925){if(!isNaN(_925)){this.zoomFactor=_925;}},_changeSensitivity:function(_926){this._sensitivityValue.innerHTML=_926.toString();this._editMode.setEdgeTestSensitivity(_926);},_resizeOverview:function(){var oBox=dojo.contentBox(this._overviewPane.domNode);var _927=dojo.marginBox(this._overviewPane.focusNode);oBox.h-=_927.h;this.overview.resize(oBox);},_refreshOverview:function(){this.overview.refresh();this.overview.fitContent();},_initNodeButtons:function(_928){var base=this.baseURL;var _929=this._nodeChoice.containerNode;for(var idx in _928){var type=_928[idx];var img=dojo.doc.createElement("img");img.setAttribute("src",base+"/getRealizerImage?type="+type);img.setAttribute("alt",type);img.setAttribute("title",type);_929.appendChild(img);dojo.addClass(img,"graphEditorNodeType");img.setAttribute("dndType",type);dojo.addClass(img,"dojoDndItem");dojo.connect(img,"onclick",this,"_selectNodeType");}new dojo.dnd.Source(_929,{singular:true});new yfiles.client.tiles.widget.GraphEditorNodeDropTarget(this.canvas.domNode,{accept:_928,copyOnly:true},this.canvas);var _92a=this._nodeChoice;_92a.resize({w:200,h:160});_92a.close=function(){_92a.hide();};},_createNodePalette:function(){var self=this;dojo.xhrGet({url:this.baseURL+"/getRealizers",load:function(data,_92b){self._initNodeButtons(data.nodeRealizers);},handleAs:"json"});},_selectNodeType:function(evt){var _92c=this._nodeChoice.containerNode;for(var idx in _92c.childNodes){dojo.removeClass(_92c.childNodes[idx],"selected");}var img=evt.target;dojo.addClass(img,"selected");this._editMode.nodeType=img.getAttribute("title");},_openHelp:function(){var _92d=300;var top=0;var _92e=screen.availHeight;var left=screen.availWidth-_92d;window.open(this.baseURL+"/resources/help/GraphEditor",null,"left="+left+",top="+top+",width="+_92d+",height="+_92e+",location=no,menubar=no,toolbar=no,scrollbars=yes,resizable=yes");},_contextMenuOpened:function(){this._editModeActiveOnMenuOpen=this._editMode.isActive();this._editMode.setChild(this._squelchClickMode);var info=this.canvas.getLastHitInfo();this._lastId=yfiles.client.tiles.HitTest.getHitId(info);if(this._lastId&&this._editModeActiveOnMenuOpen){this._deleteContextMenu.setDisabled(false);var _92f=yfiles.client.tiles.HitTest.getElementType(this._lastId);if(_92f=="Node"||_92f=="NodeLabel"){this._editLabelContextMenu.setDisabled(false);}else{this._editLabelContextMenu.setDisabled(true);}}else{this._deleteContextMenu.setDisabled(true);this._editLabelContextMenu.setDisabled(true);}this._lastHref=yfiles.client.tiles.HitTest.getUrl(info);if(this._lastHref){this._openURLContextMenu.setDisabled(false);}else{this._openURLContextMenu.setDisabled(true);}},_deleteSelection:function(){var _930=this._editMode.getSelection();this.canvas.getGraph().remove(_930.get());},_deleteHover:function(){var id=this._lastId;if(id){this.canvas.getGraph().remove([id]);}this._lastId=null;if(this._squelchClickMode.isActive()){this._squelchClickMode.deactivate();}},_editLabelHover:function(){if(this._squelchClickMode.isActive()){this._squelchClickMode.deactivate();}var id=this._lastId;if(id){this._editMode.editLabel(id);}},_onClickNodeOrEdge:function(id,info,evt){if(!this._editMode.isActive()){this._openURL(info);}},_onMouseOverNodeOrEdge:function(id,info,evt){this._lastHref=yfiles.client.tiles.HitTest.getUrl(info);if(this._lastHref){this._indicateURL(info);}},_indicateURL:function(_931){if(!this._editMode.isActive()){this._editMode.setCursor("pointer","default");}var desc=yfiles.client.tiles.HitTest.getDescription(_931);var _932=(desc?desc+": ":"")+this._lastHref;dojo.publish("yGraphEditorTopic",[_932]);window.status=_932;},_unIndicateURL:function(){if(!this._editMode.isActive()){this._editMode.restoreCursor();}window.status="";},_openURL:function(){if(this._lastHref){window.open(this._lastHref);}}});dojo.declare("yfiles.client.tiles.widget.GraphEditorNodeDropTarget",dojo.dnd.Target,{_canvas:null,constructor:function(node,_933,_934){this._canvas=_934;},insertNodes:function(data,_935,_936){if(dojo.isArray(_935)&&_935.length>0){var _937=this._canvas.getWorldCoordinates();this._canvas.getGraph().createNode(_937.x,_937.y,_935[0].getAttribute("dndType"));}}});}if(!dojo._hasResource["demos.widget.NetworkMonitorList"]){dojo._hasResource["demos.widget.NetworkMonitorList"]=true;dojo.provide("demos.widget.NetworkMonitorList");dojo.declare("demos.widget.NetworkMonitorList",[dijit._Widget,dijit._Templated],{networkListTableBody:null,stateStrings:["OK","Warning","Error"],templateString:"<div dojoAttachPoint=\"networkList\">\n\n  <table class=\"networkListTable\" style=\"width:100%\" dojoAttachPoint=\"networkListTable\" dojoAttachEvent=\"onclick:onTableClicked\">\n    <tr>\n      <th>Node</th>\n      <th>Load</th>\n      <th>Status</th>\n    </tr>\n    <tbody dojoAttachPoint=\"networkListTableBody\" id=\"networkListTableBody\">\n\n    </tbody>\n  </table>\n  \n</div>\n",labels:null,updateStatus:function(_938){this._removeDOMChildren(this.networkListTableBody);var i=0;for(var _939 in _938){var o=_938[_939];var _93a=null!=this.labels?this.labels[_939]:"";var _93b=o.load;var _93c=o.state;var _93d=dojo.doc.createElement("tr");_93d.id=_939;var _93e=dojo.doc.createElement("td");var _93f=dojo.doc.createTextNode(_93a);_93e.appendChild(_93f);_93d.appendChild(_93e);var _940=dojo.doc.createElement("td");var _941=dojo.doc.createTextNode(_93b);_940.appendChild(_941);_93d.appendChild(_940);var _942=dojo.doc.createElement("td");var _943=dojo.doc.createTextNode(this.stateStrings[_93c]);_942.appendChild(_943);_93d.appendChild(_942);var _944=i%2==0?"d0":"d1";_93d.className=_944;this.networkListTableBody.appendChild(_93d);i++;}},setLabels:function(_945){this.labels=_945;},onTableClicked:function(e){var _946=e.target;var _947=_946.parentNode;if(null!=_947){var id=_947.id;if(null!=id){this.nodeRowClicked(id);}}},nodeRowClicked:function(_948){},_removeDOMChildren:function(_949){while(_949.hasChildNodes()){this._removeDOMChildren(_949.firstChild);dojo._destroyElement(_949.firstChild);}}});}if(!dojo._hasResource["demos.widget.NetworkMonitorOverlay"]){dojo._hasResource["demos.widget.NetworkMonitorOverlay"]=true;dojo.provide("demos.widget.NetworkMonitorOverlay");dojo.declare("demos.widget.NetworkMonitorOverlay",[dijit._Widget,dijit._Templated],{statics:{STATE_OK:0,STATE_WARNING:1,STATE_ERROR:2},_canvas:null,canvasId:"",networkOverlays:null,_lastStatus:null,_nodeOverlays:null,_lastZoom:null,loadBarHeight:12,loadBarPadding:5,barBorderSize1:3,barBorderSize2:0,barColors:["#2fbb00","#58be00","#95c201","#d9c701","#fcca01","#fba104","#fa6908","#f9460b","#f7120e","#FF0000"],stateColors:["#00FF00","#FFCC33","#FF0000"],templateString:"<div class=\"networkOverlays\" dojoAttachPoint=\"networkOverlays\"\n   style=\"padding:0pt;margin:0pt;position:absolute;z-index:10;\">\n</div>\n",postCreate:function(){this._nodeOverlays={};var id=this.canvasId;this._canvas=dijit.byId(id);this._lastZoom=this._canvas.zoom;dojo.connect(this._canvas,"viewPortChanged",this,"onViewPortChanged");},onViewPortChanged:function(x,y,_94a,_94b,zoom){if(this._lastZoom!=zoom){this.updateStatus(this._lastStatus);this._lastZoom=zoom;}},clearStatus:function(){this._nodeOverlays={};this._removeDOMChildren(this.networkOverlays);},updateStatus:function(_94c){this._lastStatus=_94c;for(var _94d in _94c){var o=_94c[_94d];var _94e=o.state;var _94f=o.load;this.updateNodeState(_94d,_94f,_94e);}},updateNodeState:function(_950,load,_951){var _952=this._canvas.getHitTest();var zoom=this._canvas.zoom;var _953=_952.getBoundsForId(_950);if(_953){var _954=this._nodeOverlays[_950];var _955,_956;if(null==_954){_955=dojo.doc.createElement("div");_956=dojo.doc.createElement("div");this._nodeOverlays[_950]=[_955,_956];this.networkOverlays.appendChild(_955);this.networkOverlays.appendChild(_956);}else{_955=this._nodeOverlays[_950][0];_956=this._nodeOverlays[_950][1];}this._initLoadDiv(_955,_953,zoom);this._initStatusDiv(_956,_953,zoom);this.drawLoad(_955,_953,load,zoom);this.drawState(_956,_953,_951,zoom);}},_initStatusDiv:function(div,_957,zoom){dojo.style(div,"left",(_957.minX*zoom)+"px");dojo.style(div,"top",(_957.minY*zoom)+"px");dojo.style(div,"width",(_957.width()*zoom)+"px");dojo.style(div,"height",(_957.height()*zoom)+"px");dojo.style(div,"display","block");dojo.style(div,"position","absolute");},_initLoadDiv:function(div,_958,zoom){dojo.style(div,"left",(_958.minX*zoom)+"px");dojo.style(div,"top",((_958.minY-this.loadBarHeight-this.loadBarPadding-this.barBorderSize2-this.barBorderSize1-1)*zoom)+"px");dojo.style(div,"width",(_958.width()*zoom)+"px");dojo.style(div,"height",(_958.height()*zoom)+"px");dojo.style(div,"display","block");dojo.style(div,"position","absolute");},drawLoad:function(_959,_95a,load,zoom){this._removeDOMChildren(_959);var _95b=dojox.gfx.createSurface(_959,_959.width,_959.height);var _95c=8;var _95d=(_95a.width()-_95c*2)*zoom;var r=0.1*(load+1);var w=r*_95d;var h=this.loadBarHeight*zoom;var x=_95c*zoom;var y=1+this.barBorderSize1+this.barBorderSize2;var _95e=_95b.createRect({x:x-this.barBorderSize1,y:y-this.barBorderSize1,width:_95d+2*this.barBorderSize1,height:h+2*this.barBorderSize1});_95e.setStroke("black");_95e.setFill("#CCCCCC");var _95f=_95b.createRect({x:x-this.barBorderSize2,y:y-this.barBorderSize2,width:_95d+2*this.barBorderSize2,height:h+2*this.barBorderSize2});_95f.setStroke("black");_95f.setFill("#EEEEEE");var rect=_95b.createRect({x:x,y:y,width:w,height:h});rect.setFill(this.barColors[load]);rect.setStroke("black");},drawState:function(_960,_961,_962,zoom){this._removeDOMChildren(_960);var _963=dojox.gfx.createSurface(_960,_960.width,_960.height);var _964=15;var _965=15;var _966=5;var _967=5;var w=_965*zoom;var h=_964*zoom;var x=_966*zoom;var y=_967*zoom;var _968=x+0.5*w;var _969=y+0.5*h;var _96a=0.5*w;var _96b=this.stateColors[_962];var _96c=_963.createCircle({cx:_968,cy:_969,r:_96a});_96c.setStroke("black");_96c.setFill("white");var _96d=_963.createCircle({cx:_968,cy:_969,r:_96a-3});_96d.setStroke("black");_96d.setFill(_96b);},_removeDOMChildren:function(_96e){while(_96e.hasChildNodes()){this._removeDOMChildren(_96e.firstChild);dojo._destroyElement(_96e.firstChild);}}});}dojo.i18n._preloadLocalizations("dojo.nls.yfiles-ajax-complete",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nl","nl-nl","no","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
